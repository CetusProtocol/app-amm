import{_ as le}from"./back.0c96ec39.js";import{_ as ae}from"./assets-card.30c5cf16.js";import{_ as re}from"./swap-setting.17484c88.js";import{v as e,M as ce,u as U,c as j,b as W,e as O,i as z,f as K,g as E,B as G,z as ue,d as de,T as f,t as me,A as M,w as X,x as pe,y as ve,L as fe,I as ye,C as ge,S as he}from"../server.mjs";import{_ as H}from"./_plugin-vue_export-helper.a1a6add7.js";/* empty css              */import"#internal/nitro";const Ce=e.defineComponent({components:{Modal:ce},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(o,t){const S=U();j();const c=W();e.computed(()=>c),O();const b=e.ref(S.slippage||1),a=e.ref(!0),u=e.ref(!1);function m(y){a.value=y}return{slippage:b,importIcon:z,fixD:K,decimalFormat:E,direct:a,changeDirect:m,rateChange:u,clickNextBtn:async()=>{console.log("toRemove1111####"),t.emit("to-remove")}}}});const D=o=>(e.pushScopeId("data-v-116c28e5"),o=o(),e.popScopeId(),o),Ve=D(()=>e.createElementVNode("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ne={class:"remove-confirm-container"},ke={class:"card-content"},Ee={class:"top"},Se={class:"coin"},be=["src"],_e=e.createTextVNode(" \xA0\xA0 "),Be=D(()=>e.createElementVNode("div",{class:"svg-box"},[e.createElementVNode("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-icon-add1"})])],-1)),we={class:"coin"},$e=["src"],Le=e.createTextVNode(" \xA0\xA0 "),Ae={class:"bottom"},Ie={class:"desc"},De={class:"induction"},qe={class:"item"},Re=D(()=>e.createElementVNode("div",{class:"induction-text"},"Rate",-1)),Te={class:"induction-value induction-value-change"},Me={key:0},Oe={key:1},Fe=D(()=>e.createElementVNode("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Pe=[Fe],Ye={class:"item"},Xe={class:"induction-text"},Ue={class:"induction-value"},je=e.createTextVNode(e.toDisplayString("Confirm Remove"));function We(o,t,S,c,b,a){const u=G,m=e.resolveComponent("Modal");return e.openBlock(),e.createBlock(m,{width:"440px",visible:!0,footer:null,title:"You will receive",class:"remove-confirm-modal",onCancel:t[1]||(t[1]=N=>o.$emit("on-close"))},{closeIcon:e.withCtx(()=>[Ve]),default:e.withCtx(()=>[e.createElementVNode("div",Ne,[e.createElementVNode("div",ke,[e.createElementVNode("div",Ee,[e.createElementVNode("div",Se,[e.createElementVNode("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,be),e.createElementVNode("p",null,e.toDisplayString(o.fromCoinAmount),1),_e,e.createElementVNode("p",null,e.toDisplayString(o.fromCoin.symbol),1)]),Be,e.createElementVNode("div",we,[e.createElementVNode("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,$e),e.createElementVNode("p",null,e.toDisplayString(o.toCoinAmount),1),Le,e.createElementVNode("p",null,e.toDisplayString(o.toCoin.symbol),1)])]),e.createElementVNode("div",Ae,[e.createElementVNode("div",Ie,"Output is estimated. if the price changes by more than "+e.toDisplayString(o.slippage)+"% your transaction will revert.",1),e.createElementVNode("div",De,[e.createElementVNode("div",qe,[Re,e.createElementVNode("div",Te,[o.rateChange?(e.openBlock(),e.createElementBlock("span",Oe,"1 "+e.toDisplayString(o.toCoin.symbol)+" \u2248 "+e.toDisplayString(o.fixD(1/o.currentLpInfo.price,2))+" "+e.toDisplayString(o.fromCoin.symbol),1)):(e.openBlock(),e.createElementBlock("span",Me,"1 "+e.toDisplayString(o.fromCoin.symbol)+" \u2248 "+e.toDisplayString(o.fixD(o.currentLpInfo.price,2))+" "+e.toDisplayString(o.toCoin.symbol),1)),(e.openBlock(),e.createElementBlock("svg",{class:"icon-change","aria-hidden":"true",onClick:t[0]||(t[0]=N=>o.rateChange=!o.rateChange)},Pe))])]),e.createElementVNode("div",Ye,[e.createElementVNode("div",Xe,e.toDisplayString(o.fromCoin.symbol)+" - "+e.toDisplayString(o.toCoin.symbol)+" LP Burned",1),e.createElementVNode("div",Ue,e.toDisplayString(o.burnValue),1)])])])])]),e.createVNode(u,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:e.withCtx(()=>[je]),_:1},8,["onClick"])]),_:1})}const ze=H(Ce,[["render",We],["__scopeId","data-v-116c28e5"]]),Ke=e.defineComponent({setup(o,t){const S=e.h(ue,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),c=de.exports.useRouter();O();const b=W(),a=e.computed(()=>b),u=O(),m=e.computed(()=>u);let N=e.ref(!1),y=e.ref(!1),g=e.ref(!1),_=e.ref(!1);const B=e.ref(!1),w=e.ref(!0),n=e.ref(!0),p=e.ref(""),h=e.ref(""),k=e.ref("50"),q=U(),J=e.computed(()=>q.slippage),C=e.ref(f[c.currentRoute.value.query.from]||f.USDC),V=e.ref(f[c.currentRoute.value.query.to]||f.USDT),s=e.ref({}),R=e.ref(""),F=e.ref(""),Q=e.computed(()=>Number(p.value)?"Remove":"Enter an amount"),Z=()=>{B.value=!0,setTimeout(()=>{B.value=!1},1e3),a.value.address&&u.setMyLplist(a.value.address)},x=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],ee=()=>{const i=C.value;C.value=V.value,V.value=i,_.value=!0,setTimeout(()=>{_.value=!1},300)},oe=i=>{i==="fromCoin"?(w.value=!0,p.value=C.value&&E(C.value.balance,s.value.coinA.value.decimals)||""):(w.value=!1,h.value=V.value&&E(V.value.balance,s.value.coinB.value.decimals)||"")},$=j();e.watch(k,me((i,d)=>{if(k.value=i,i!==d){const r=Number(k.value)/100;k.value==="100"?T(s.value.balanceOrigin):T(M(s.value.balanceOrigin).mul(r).toString())}},500)),e.watch(s,()=>{s.value&&T(M(s.value.balanceOrigin).mul(Number(k.value)/100).toString())});const T=async i=>{console.log("getAmount###val###",i);const d=X(C.value.symbol,V.value.symbol);R.value=i,F.value=E(M(i).div(Math.pow(10,d.decimals)).toString(),d.decimals)||"";const r=e.ref({});if(i!==""&&i!==0&&i!=="0"){if(r.value={coinX:f[C.value.symbol],coinY:f[V.value.symbol],liquidity:i},r.value)try{const l=await $.getCoinXYForLiquidity(r.value);p.value=E(l.coinXAmount,s.value.coinA.decimals)||"",h.value=E(l.coinYAmount,s.value.coinB.decimals)||""}catch(l){console.log("testGetCoinXYForLiquidityerr",l)}}else h.value="",p.value=""},L=e.ref(!1),{setIsShowSuccess:te,setIsShowRejected:P,setIsShowWaiting:A,setTransactionDesc:ne,setTransactionTxid:Y}=q,ie=async()=>{console.log("toRemove222####"),y.value=!1,L.value=!0,Y(""),ne(`Removing ${p.value} ${s.value.coinA.symbol} and 
        ${h.value} ${s.value.coinB.symbol}`),A(!0);try{const i=e.ref({});i.value={coinX:f[s.value.coinA.symbol],coinY:f[s.value.coinB.symbol],liquidity:parseInt(R.value),slippage:Number(q.slippage)/100},console.log(i.value,888999);const d=await $.removeLiquidityTransactionPayload(i.value);console.log("removeLiquidityTransactionPayload###result####",d);const r=await a.value.currentWallet.signAndSubmitTransaction(d);if(r&&r.hash){Y(r.hash),A(!1),te(!0);const l={title:"Remove Liquidity",desc:`Removed ${p.value} ${s.value.coinA.symbol} and 
        ${h.value} ${s.value.coinB.symbol}`,hash:r.hash};$.showTransitionPending(l),await $.watchTransaction(l)&&setTimeout(()=>{console.log("remove \u6210\u529F\u540E\u91CD\u65B0\u8BF7\u6C42\u4E86\u5417###"),u.setMyLplist(a.value.address)},3e3)}else A(!1),P(!0);L.value=!1}catch(i){console.log("Remove error",i),L.value=!1,A(!1),P(!0)}};return e.watchEffect(async()=>{a.value.address&&u.setMyLplist(a.value.address)}),e.watchEffect(()=>{if(m.value.myLplist&&a.value.address){console.log("remove page watch###");const i=m.value.myLplist,d=c.currentRoute.value.query.from,r=c.currentRoute.value.query.to;let l;if(d&&r&&(l=X(d,r)),console.log("remove page watch###currentLP####",l),l){const I=i.filter(se=>se.symbol===l.symbol)[0];console.log("remove page watch###info####",I),(!l.balance||!Number(l.balance))&&(console.log("router####",c),c.push("/pools")),I&&(s.value=I)}}}),{loading:L,indicator:S,addCommom:pe,fixD:K,prettyAmount:ve,liquidity:m,clickExchange:ee,change:_,fixedFromCoin:w,router:c,wallet:a,refresh:B,amountArr:x,sliderVal:k,slippage:J,importIcon:z,clickRefresh:Z,isShowSwapSetting:N,fromCoin:C,toCoin:V,maxBtnSelect:oe,fromCoinAmount:p,toCoinAmount:h,direct:n,rateChange:g,isShowRemoveModal:y,btnText:Q,LP_TOKENS:fe,currentLpInfo:s,selectLp:R,selectLpView:F,toRemove:ie}}});const v=o=>(e.pushScopeId("data-v-2f985f32"),o=o(),e.popScopeId(),o),Ge={class:"management-remove-liquidity"},He={class:"remove-liquidity-top"},Je=v(()=>e.createElementVNode("div",{class:"remove-title"},"Remove Liquidity",-1)),Qe={class:"right title-right"},Ze=v(()=>e.createElementVNode("svg",{class:"icon","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),xe=v(()=>e.createElementVNode("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),eo=[xe],oo={class:"remove-liquidity-center"},to={class:"bottom"},no={class:"add-amount"},io={class:"add-amount-header"},so=v(()=>e.createElementVNode("span",null,"Amount",-1)),lo={class:"amount-list"},ao=["onClick"],ro={class:"slider-box"},co={class:"card-container"},uo={class:"card-item"},mo={class:"card-item"},po={class:"induction remove-liquidity-bottom"},vo={class:"item"},fo=v(()=>e.createElementVNode("div",{class:"induction-text"},"Rate",-1)),yo={key:0},go={key:0},ho={key:1},Co=v(()=>e.createElementVNode("svg",{class:"icon-change","aria-hidden":"true"},[e.createElementVNode("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),Vo={key:0,"aria-hidden":"true"},No=v(()=>e.createElementVNode("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),ko=[No],Eo={key:0,class:"showMyLiquidity"},So={class:"myLiquidity"},bo=v(()=>e.createElementVNode("div",{class:"left"},"Your Liquidity",-1)),_o={key:0,class:"right"},Bo={class:"liquidityAsset"},wo={class:"item"},$o={class:"left"},Lo=["src"],Ao={key:0,class:"right"},Io={class:"item"},Do={class:"left"},qo=["src"],Ro={key:0,class:"right"},To={class:"induction induction-liquidity"},Mo={class:"item"},Oo=v(()=>e.createElementVNode("div",{class:"induction-text"},"Share of Pool",-1)),Fo={key:0,class:"induction-value"};function Po(o,t,S,c,b,a){const u=le,m=ye,N=ge,y=ae,g=he,_=G,B=re,w=ze;return e.openBlock(),e.createElementBlock("div",Ge,[e.createVNode(u),e.createElementVNode("div",He,[Je,e.createElementVNode("div",Qe,[e.createElementVNode("div",{class:"slippage-icon",onClick:t[0]||(t[0]=n=>o.isShowSwapSetting=!0)},[Ze,e.createElementVNode("span",null,e.toDisplayString(o.slippage)+"%",1)]),(e.openBlock(),e.createElementBlock("svg",{"aria-hidden":"true",class:e.normalizeClass(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:t[1]||(t[1]=(...n)=>o.clickRefresh&&o.clickRefresh(...n))},eo,2))])]),e.createElementVNode("div",oo,[e.createElementVNode("div",to,[e.createElementVNode("div",no,[e.createElementVNode("div",io,[so,e.createElementVNode("div",lo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.amountArr,(n,p)=>(e.openBlock(),e.createElementBlock("div",{key:p,class:e.normalizeClass(["amount-item",o.sliderVal==n.value?"amount-item-active":""]),onClick:h=>o.sliderVal=n.value},e.toDisplayString(n.name),11,ao))),128))])]),e.createElementVNode("div",ro,[e.createVNode(m,{value:o.sliderVal,"onUpdate:value":t[2]||(t[2]=n=>o.sliderVal=n),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),e.createVNode(N,{value:o.sliderVal,"onUpdate:value":t[3]||(t[3]=n=>o.sliderVal=n)},null,8,["value"])])])])]),e.createElementVNode("div",co,[e.createElementVNode("div",uo,[e.createVNode(y,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=n=>o.fromCoinAmount=n),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.currentLpInfo.myCoinXAmount||null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:t[5]||(t[5]=n=>o.maxBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=n=>o.fromCoinAmount=n),onOnFocus:t[7]||(t[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e.createElementVNode("div",mo,[e.createVNode(y,{modelValue:o.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=n=>o.toCoinAmount=n),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":o.toCoinAmount,"coin-name":o.fromCoin?o.toCoin.symbol:"",balance:o.currentLpInfo.myCoinYAmount||null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:t[9]||(t[9]=n=>o.maxBtnSelect("toCoin")),onOnInput:t[10]||(t[10]=n=>o.toCoinAmount=n),onOnFocus:t[11]||(t[11]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])])]),e.createElementVNode("div",po,[e.createElementVNode("div",vo,[fo,e.createElementVNode("div",{class:"induction-value induction-value-change",onClick:t[12]||(t[12]=n=>o.rateChange=!o.rateChange)},[o.rateChange?(e.openBlock(),e.createElementBlock("span",ho,"1 "+e.toDisplayString(o.toCoin.symbol)+" \u2248 "+e.toDisplayString(o.fixD(1/o.currentLpInfo.price,2))+" "+e.toDisplayString(o.fromCoin.symbol),1)):(e.openBlock(),e.createElementBlock("span",yo,[e.createTextVNode(" 1 "+e.toDisplayString(o.fromCoin.symbol)+" \u2248 ",1),o.currentLpInfo.price?(e.openBlock(),e.createElementBlock("span",go,e.toDisplayString(o.fixD(o.currentLpInfo.price,2)),1)):(e.openBlock(),e.createBlock(g,{key:1,indicator:o.indicator},null,8,["indicator"])),e.createTextVNode(" "+e.toDisplayString(o.toCoin.symbol),1)])),Co])])]),e.createVNode(_,{disabled:!o.fromCoinAmount||!o.toCoinAmount||o.loading,class:"remove-btn big-btn",onClick:t[13]||(t[13]=n=>o.wallet.connected?o.isShowRemoveModal=!0:o.wallet.setIsShowWalletModal(!0))},{default:e.withCtx(()=>[o.wallet.connected?(e.openBlock(),e.createElementBlock("svg",Vo,ko)):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(o.wallet.connected?o.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),o.wallet.connected?(e.openBlock(),e.createElementBlock("div",Eo,[e.createElementVNode("div",So,[bo,o.currentLpInfo.myLpBalance?(e.openBlock(),e.createElementBlock("div",_o,[e.createElementVNode("p",null,e.toDisplayString(o.currentLpInfo.myLpBalance)+" LP",1),e.createElementVNode("span",null,"\u2248 $"+e.toDisplayString(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])):(e.openBlock(),e.createBlock(g,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e.createElementVNode("div",Bo,[e.createElementVNode("div",wo,[e.createElementVNode("div",$o,[e.createElementVNode("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,Lo),e.createElementVNode("span",null,e.toDisplayString(o.fromCoin.symbol),1)]),o.currentLpInfo.myCoinXAmount?(e.openBlock(),e.createElementBlock("div",Ao,e.toDisplayString(o.currentLpInfo.myCoinXAmount),1)):(e.openBlock(),e.createBlock(g,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e.createElementVNode("div",Io,[e.createElementVNode("div",Do,[e.createElementVNode("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,qo),e.createElementVNode("span",null,e.toDisplayString(o.toCoin.symbol),1)]),o.currentLpInfo.myCoinYAmount?(e.openBlock(),e.createElementBlock("div",Ro,e.toDisplayString(o.currentLpInfo.myCoinYAmount),1)):(e.openBlock(),e.createBlock(g,{key:1,indicator:o.indicator},null,8,["indicator"]))])]),e.createElementVNode("div",To,[e.createElementVNode("div",Mo,[Oo,o.currentLpInfo.myshareOfPool?(e.openBlock(),e.createElementBlock("div",Fo,e.toDisplayString(o.currentLpInfo.myshareOfPool)+" %",1)):(e.openBlock(),e.createBlock(g,{key:1,indicator:o.indicator},null,8,["indicator"]))])])])):e.createCommentVNode("",!0),o.isShowSwapSetting?(e.openBlock(),e.createBlock(B,{key:1,onOnClose:t[14]||(t[14]=n=>o.isShowSwapSetting=!1)})):e.createCommentVNode("",!0),o.isShowRemoveModal?(e.openBlock(),e.createBlock(w,{key:2,"liquidity-balance":o.selectLp,"fixed-from-coin":o.fixedFromCoin,"from-coin":o.currentLpInfo.coinA,"to-coin":o.currentLpInfo.coinB,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"burn-value":o.selectLpView,"current-lp-info":o.currentLpInfo,onOnClose:t[15]||(t[15]=n=>o.isShowRemoveModal=!1),onToRemove:o.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","onToRemove"])):e.createCommentVNode("",!0)])}const Go=H(Ke,[["render",Po],["__scopeId","data-v-2f985f32"]]);export{Go as default};
