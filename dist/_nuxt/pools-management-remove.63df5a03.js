import{_ as Ie}from"./back.d1180d09.js";import{_ as qe}from"./assets-card.e2b47eda.js";import{_ as Te}from"./network-tips.8af0d8b3.js";import{_ as Be}from"./swap-setting.68040409.js";import{a as se,Q as Re,b as ae,a3 as le,a4 as re,Z as ue,e as I,$ as de,r as l,i as ce,j as me,k as q,l as ve,J as Ve,o as a,c as k,w as X,p as o,t as i,G as O,m as r,q as S,B as pe,y as fe,z as he,aa as Me,ab as Oe,A as Ne,a1 as De,a2 as M,a5 as Fe,a6 as Pe,a7 as Ye,Y as Q,a9 as ie,a8 as Z,s as te,L as We,M as Xe,v as A,I as je,ac as Ue,S as Ee}from"./entry.6eb10522.js";/* empty css              */const ze=se({components:{Modal:Re},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(e,n){const y=ae();le(),re();const N=ue();I(()=>N),de();const T=l(y.slippage||.5),f=l(!0),L=l(!1);function d(h){f.value=h}return{slippage:T,importIcon:ce,fixD:me,decimalFormat:q,direct:f,changeDirect:d,rateChange:L,clickNextBtn:async()=>{n.emit("to-remove")}}}});const H=e=>(fe("data-v-58e80898"),e=e(),he(),e),Ge=H(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Je={class:"remove-confirm-container"},Qe={class:"card-content"},Ze={class:"top"},He={class:"coin"},Ke=["src"],xe=H(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-add1"})])],-1)),eo={class:"coin"},oo=["src"],no={class:"bottom"},io={class:"desc"},to={class:"induction"},so={class:"item"},ao={class:"induction-text"},lo={class:"induction-value induction-value-change"},ro={key:0},uo={key:1},co=H(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),mo=[co],vo={class:"item"},po={class:"induction-text"},fo={class:"induction-value"};function ho(e,n,y,N,T,f){const L=pe,d=Ve("Modal");return a(),k(d,{width:"440px",visible:!0,footer:null,title:e.$t("modal.addLiquidityModalTitle"),class:"remove-confirm-modal",onCancel:n[1]||(n[1]=v=>e.$emit("on-close"))},{closeIcon:X(()=>[Ge]),default:X(()=>[o("div",Je,[o("div",Qe,[o("div",Ze,[o("div",He,[o("img",{src:e.fromCoin.icon||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,Ke),o("p",null,i(e.fromCoinAmount),1),O(" \xA0\xA0 "),o("p",null,i(e.fromCoin.symbol),1)]),xe,o("div",eo,[o("img",{src:e.toCoin.icon||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,oo),o("p",null,i(e.toCoinAmount),1),O(" \xA0\xA0 "),o("p",null,i(e.toCoin.symbol),1)])]),o("div",no,[o("div",io,i(e.$t("modal.removeLiquidityText",{slippage:e.slippage+"%"})),1),o("div",to,[o("div",so,[o("div",ao,i(e.$t("common.rate")),1),o("div",lo,[e.rateChange?(a(),r("span",uo,"1 "+i(e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin.symbol),1)):(a(),r("span",ro,"1 "+i(e.fromCoin.symbol)+" \u2248 "+i(e.fixD(e.currentLpInfo.price,2))+" "+i(e.toCoin.symbol),1)),(a(),r("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=v=>e.rateChange=!e.rateChange)},mo))])]),o("div",vo,[o("div",po,i(e.fromCoin.symbol)+" - "+i(e.toCoin.symbol)+" "+i(e.$t("modal.removeLiquidityLpBurned")),1),o("div",fo,i(e.burnValue),1)])])])])]),S(L,{class:"big-btn swap-confirm-btn",loading:e.loading,onClick:e.clickNextBtn},{default:X(()=>[O(i(e.$t("button.confirmRemove")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])}const yo=ve(ze,[["render",ho],["__scopeId","data-v-58e80898"]]),Co=se({setup(e,n){const{t:y,locale:N}=le(),T=Me(Oe,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),f=Ne(),L=ue(),d=I(()=>L),v=de(),h=I(()=>v);let _=l(!1),D=l(!1),U=l(!1),B=l(!1);const R=l(!1),t=l(!0),E=l(!0),C=l(""),w=l(""),g=l("50"),ye=l({});l({}),De(()=>{Z(h.value.lpTokens)||(ye.value=h.value.lpTokens)});const K=ae(),F=I(()=>K),Ce=I(()=>F.value.slippage),b=l(),$=l(),u=l({}),z=l(""),x=l(""),ge=I(()=>Number(C.value)?y("button.remove"):y("button.enterAmount"));M(()=>[F.value.chainName,h.value.lpTokens],([s,c])=>{s&&!Z(c)&&(b.value=v.tokens[f.currentRoute.value.query.from],$.value=v.tokens[f.currentRoute.value.query.to])},{immediate:!0});const be=()=>{R.value=!0,setTimeout(()=>{R.value=!1},1e3),d.value.address&&v.setMyLplist(d.value.address)},$e=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:y("button.max"),value:100}],ke=()=>{const s=b.value;b.value=$.value,$.value=s,B.value=!0,setTimeout(()=>{B.value=!1},300)},Se=s=>{s==="fromCoin"?(t.value=!0,C.value=b.value&&q(b.value.balance,u.value.coinA.value.decimals)||""):(t.value=!1,w.value=$.value&&q($.value.balance,u.value.coinB.value.decimals)||"")},P=re();M(g,Fe((s,c)=>{if(g.value=s,s==0)C.value="0",w.value="0";else if(s>100&&(g.value="100"),s!==c){const p=Number(g.value)/100;g.value==="100"?G(u.value.balanceOrigin):G(Q(u.value.balanceOrigin).mul(p).toString())}},500)),M(u,()=>{u.value&&G(Q(u.value.balanceOrigin).mul(Number(g.value)/100).toString())});const G=async s=>{if(!b.value||!$.value)return;const c=ie(b.value.symbol,$.value.symbol,v.lpTokens);if(z.value=s,x.value=q(Q(s).div(Math.pow(10,c.decimals)).toString(),c.decimals)||"",s!==""&&s!==0&&s!=="0"){let p={coinX:c.coinA,coinY:c.coinB,liquidity:s};if(p)try{const m=await P.getCoinXYForLiquidity(p);C.value=q(m.coinXAmount,u.value.coinA.decimals)||"",w.value=q(m.coinYAmount,u.value.coinB.decimals)||""}catch{}}else w.value="",C.value=""},Y=l(!1),{setIsShowSuccess:Le,setIsShowRejected:ee,setIsShowWaiting:W,setTransactionDesc:_e,setTransactionTxid:oe}=K,we=async()=>{D.value=!1,Y.value=!0,oe(""),_e(y("tips.removeLiquidiyText",{from:`${C.value} ${u.value.coinA.symbol}`,to:`${w.value} ${u.value.coinB.symbol}`})),W(!0);try{const s=l({});s.value={coinX:u.value.coinA,coinY:u.value.coinB,liquidity:parseInt(z.value),slippage:Number(F.value.slippage)/100};const c=await P.removeLiquidityTransactionPayload(s.value);let p;if(F.value.chainName==="Sui"){const m=await d.value.currentWallet.signAndExecuteTransaction(c);m&&m.certificate&&m.certificate.transactionDigest&&(p={hash:m.certificate.transactionDigest})}else p=await d.value.currentWallet.signAndSubmitTransaction(c);if(p&&p.hash){oe(p.hash),W(!1),Le(!0);const m={title:y("common.removeLiquidity"),desc:y("tips.removeSuccessText",{from:`${C.value} ${u.value.coinA.symbol}`,to:`${w.value} ${u.value.coinB.symbol}`}),hash:p.hash};P.showTransitionPending(m),await P.watchTransaction(m)&&(setTimeout(()=>{v.setMyLplist(d.value.address)},3e3),setTimeout(()=>{v.setMyLplist(d.value.address)},6e3),Number(g.value)==100&&f.push("/pools"))}else W(!1),ee(!0);Y.value=!1}catch{Y.value=!1,W(!1),ee(!0)}};return M(()=>[d.value.address,h.value.lpTokens],([s,c])=>{Z(c)||v.setMyLplist(s)},{immediate:!0}),M(()=>[h.value.myLplist,d.value.address],([s,c])=>{if(s&&d.value.address){const p=s,m=f.currentRoute.value.query.from,J=f.currentRoute.value.query.to;let V;if(m&&J&&(V=ie(m,J,s)),V){if(!V.balance||!Number(V.balance)){f.push("/pools");return}const ne=p.filter(Ae=>Ae.symbol===V.symbol)[0];ne&&(u.value=ne)}}},{immediate:!0}),{loading:Y,indicator:T,addCommom:Pe,fixD:me,prettyAmount:Ye,liquidity:h,clickExchange:ke,change:B,fixedFromCoin:t,router:f,wallet:d,refresh:R,amountArr:$e,sliderVal:g,slippage:Ce,importIcon:ce,clickRefresh:be,isShowSwapSetting:_,fromCoin:b,toCoin:$,maxBtnSelect:Se,fromCoinAmount:C,toCoinAmount:w,direct:E,rateChange:U,isShowRemoveModal:D,btnText:ge,currentLpInfo:u,selectLp:z,selectLpView:x,toRemove:we}}});const j=e=>(fe("data-v-3ea1b5ba"),e=e(),he(),e),go={class:"management-remove-liquidity"},bo={class:"remove-liquidity-top"},$o={class:"remove-title"},ko={class:"right title-right"},So=j(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Lo=j(()=>o("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),_o=[Lo],wo={class:"remove-liquidity-center"},Ao={class:"bottom"},Io={class:"add-amount"},qo={class:"add-amount-header"},To={class:"amount-list"},Bo=["onClick"],Ro={class:"slider-box"},Vo={class:"card-container"},Mo={class:"card-item"},Oo={class:"card-item"},No={class:"induction remove-liquidity-bottom"},Do={class:"item"},Fo={class:"induction-text"},Po={key:0},Yo={key:0},Wo={key:1},Xo=j(()=>o("svg",{class:"icon-change","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),jo={key:0,"aria-hidden":"true"},Uo=j(()=>o("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),Eo=[Uo],zo={key:0,class:"showMyLiquidity"},Go={class:"myLiquidity"},Jo={class:"left"},Qo={key:0,class:"right"},Zo={class:"liquidityAsset"},Ho={class:"item"},Ko={key:0,class:"left"},xo=["src"],en={key:1,class:"right"},on={class:"item"},nn={key:0,class:"left"},tn=["src"],sn={key:1,class:"right"},an={class:"induction induction-liquidity"},ln={class:"item"},rn={class:"induction-text"},un={key:0,class:"induction-value"};function dn(e,n,y,N,T,f){const L=Ie,d=je,v=Ue,h=qe,_=Ee,D=pe,U=Te,B=Be,R=yo;return a(),r("div",go,[S(L),o("div",bo,[o("div",$o,i(e.$t("common.removeLiquidity")),1),o("div",ko,[o("div",{class:"slippage-icon",onClick:n[0]||(n[0]=t=>e.isShowSwapSetting=!0)},[So,o("span",null,i(e.slippage)+"%",1)]),(a(),r("svg",{"aria-hidden":"true",class:te(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:n[1]||(n[1]=(...t)=>e.clickRefresh&&e.clickRefresh(...t))},_o,2))])]),o("div",wo,[o("div",Ao,[o("div",Io,[o("div",qo,[o("span",null,i(e.$t("common.amount")),1),o("div",To,[(a(!0),r(We,null,Xe(e.amountArr,(t,E)=>(a(),r("div",{key:E,class:te(["amount-item",e.sliderVal==t.value?"amount-item-active":""]),onClick:C=>e.sliderVal=t.value},i(t.name),11,Bo))),128))])]),o("div",Ro,[S(d,{value:e.sliderVal,"onUpdate:value":n[2]||(n[2]=t=>e.sliderVal=t),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),S(v,{value:e.sliderVal,"onUpdate:value":n[3]||(n[3]=t=>e.sliderVal=t)},null,8,["value"])])])])]),o("div",Vo,[o("div",Mo,[S(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=t=>e.fromCoinAmount=t),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":e.fromCoinAmount,"coin-name":e.fromCoin?e.fromCoin.symbol:null,"remove-balance":e.currentLpInfo.myCoinXAmount||null,"coin-icon":e.fromCoin?e.fromCoin.icon:"","is-remove":!0,"swap-direction":"From",onOnMax:n[5]||(n[5]=t=>e.maxBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=t=>e.fromCoinAmount=t),onOnFocus:n[7]||(n[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])]),o("div",Oo,[S(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=t=>e.toCoinAmount=t),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":e.toCoinAmount,"coin-name":e.fromCoin?e.toCoin.symbol:"","remove-balance":e.currentLpInfo.myCoinYAmount||null,"swap-direction":"To","is-remove":!0,"coin-icon":e.toCoin?e.toCoin.icon:"",onOnMax:n[9]||(n[9]=t=>e.maxBtnSelect("toCoin")),onOnInput:n[10]||(n[10]=t=>e.toCoinAmount=t),onOnFocus:n[11]||(n[11]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])])]),o("div",No,[o("div",Do,[o("div",Fo,i(e.$t("common.rate")),1),o("div",{class:"induction-value induction-value-change",onClick:n[12]||(n[12]=t=>e.rateChange=!e.rateChange)},[e.rateChange?(a(),r("span",Wo,"1 "+i(e.toCoin&&e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin&&e.fromCoin.symbol),1)):(a(),r("span",Po,[O(" 1 "+i(e.fromCoin&&e.fromCoin.symbol)+" \u2248 ",1),e.currentLpInfo.price?(a(),r("span",Yo,i(e.fixD(e.currentLpInfo.price,2)),1)):(a(),k(_,{key:1,indicator:e.indicator},null,8,["indicator"])),O(" "+i(e.toCoin&&e.toCoin.symbol),1)])),Xo])])]),S(D,{disabled:e.wallet.connected?e.sliderVal==0||!e.fromCoinAmount||!e.toCoinAmount||e.loading:!1,class:"remove-btn big-btn",onClick:n[13]||(n[13]=t=>e.wallet.connected?e.isShowRemoveModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:X(()=>[e.wallet.connected?(a(),r("svg",jo,Eo)):A("",!0),o("span",null,i(e.wallet.connected?e.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),S(U),e.wallet.connected?(a(),r("div",zo,[o("div",Go,[o("div",Jo,i(e.$t("common.yourLiquidity")),1),e.currentLpInfo.myLpBalance?(a(),r("div",Qo,[o("p",null,i(e.currentLpInfo.myLpBalance)+" LP",1),o("span",null,"\u2248 $"+i(e.addCommom(e.currentLpInfo.myBalanceUSD,2)),1)])):(a(),k(_,{key:1,indicator:e.indicator},null,8,["indicator"]))]),o("div",Zo,[o("div",Ho,[e.fromCoin?(a(),r("div",Ko,[o("img",{src:e.fromCoin.icon||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,xo),o("span",null,i(e.fromCoin.symbol),1)])):A("",!0),e.currentLpInfo.myCoinXAmount?(a(),r("div",en,i(e.currentLpInfo.myCoinXAmount),1)):(a(),k(_,{key:2,indicator:e.indicator},null,8,["indicator"]))]),o("div",on,[e.toCoin?(a(),r("div",nn,[o("img",{src:e.toCoin.icon||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,tn),o("span",null,i(e.toCoin.symbol),1)])):A("",!0),e.currentLpInfo.myCoinYAmount?(a(),r("div",sn,i(e.currentLpInfo.myCoinYAmount),1)):(a(),k(_,{key:2,indicator:e.indicator},null,8,["indicator"]))])]),o("div",an,[o("div",ln,[o("div",rn,i(e.$t("common.shareOfPool")),1),e.currentLpInfo.myshareOfPool?(a(),r("div",un,i(e.currentLpInfo.myshareOfPool)+" %",1)):(a(),k(_,{key:1,indicator:e.indicator},null,8,["indicator"]))])])])):A("",!0),e.isShowSwapSetting?(a(),k(B,{key:1,onOnClose:n[14]||(n[14]=t=>e.isShowSwapSetting=!1)})):A("",!0),e.isShowRemoveModal?(a(),k(R,{key:2,"liquidity-balance":e.selectLp,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.currentLpInfo.coinA,"to-coin":e.currentLpInfo.coinB,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"burn-value":e.selectLpView,"current-lp-info":e.currentLpInfo,loading:e.loading,onOnClose:n[15]||(n[15]=t=>e.isShowRemoveModal=!1),onToRemove:e.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","loading","onToRemove"])):A("",!0)])}const yn=ve(Co,[["render",dn],["__scopeId","data-v-3ea1b5ba"]]);export{yn as default};
