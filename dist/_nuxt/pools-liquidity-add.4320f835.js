import{_ as Oo}from"./back.5dd5b376.js";import{_ as Po}from"./refresh-icon.a3fe240d.js";import{_ as Ro}from"./assets-card.d438d197.js";import{_ as Yo}from"./coin-select.da2fd017.js";import{_ as Vo,a as Do}from"./img-leverage_2x.eefeefcb.js";import{_ as Xo}from"./swap-setting.15d738d9.js";import{a as Co,Q as Fo,b as ho,r as t,i as yo,j as bo,k as Mo,l as go,J as jo,o as r,c as O,w as F,p as e,t as n,m as c,q,G as Wo,B as $o,y as ko,z as Ao,X as Eo,e as X,Y as Uo,A as zo,Z as Q,$ as Go,h as Jo,a0 as Ko,a1 as Z,a2 as H,a3 as Qo,a4 as Zo,a5 as vo,a6 as fo,s as po,v as g}from"./entry.50c95865.js";const Ho=Co({components:{Modal:Fo},props:{isIncrease:{type:Boolean,required:!1},fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},currentLpInfo:{type:Object,required:!0},share:{type:String,required:!0},rate:{type:String,required:!0},currentRecivedLp:{type:String,required:!0}},emits:["to-add","on-close"],setup(o,s){const T=ho(),y=t(T.slippage||.5),$=t(!0),h=t(!1);function a(b){$.value=b}return{importIcon:yo,fixD:bo,decimalFormat:Mo,direct:$,changeDirect:a,rateChange:h,clickNextBtn:async()=>{s.emit("to-add")},slippage:y}}});const x=o=>(ko("data-v-510e4d91"),o=o(),Ao(),o),xo=x(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),oe={class:"add-confirm-container"},ee={class:"card-content"},ne={class:"top"},se={class:"coin"},ie=["src"],te=["src"],ae={class:"bottom"},le={class:"induction"},ue={class:"item"},re={class:"induction-text"},de={class:"induction-value induction-value-change"},ce={key:0},me={key:1},ve=x(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),fe=[ve],pe={class:"item"},Ce={class:"induction-text"},he={class:"induction-value"},ye={class:"item"},be={class:"induction-text"},ge={key:0,class:"induction-value"},$e={key:1,class:"induction-value"},ke={class:"item liquidity-item"},Ae=x(()=>e("div",{class:"induction-text"},null,-1)),we={key:0,class:"induction-value"},Se={key:1,class:"induction-value"},Le={class:"item"},Ie={class:"induction-text"},qe={key:0,class:"induction-value"},Te={key:1,class:"induction-value"};function _e(o,s,T,y,$,h){const a=$o,L=jo("Modal");return r(),O(L,{width:"440px",visible:!0,footer:null,title:o.$t("modal.addLiquidityModalTitle"),class:"add-confirm-modal",onCancel:s[1]||(s[1]=b=>o.$emit("on-close"))},{closeIcon:F(()=>[xo]),default:F(()=>[e("div",oe,[e("div",ee,[e("div",ne,[e("div",se,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,ie),e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,te),e("p",null,n(o.currentRecivedLp)+" LP",1)])]),e("div",ae,[e("div",le,[e("div",ue,[e("div",re,n(o.$t("common.rate")),1),e("div",de,[o.rateChange?(r(),c("span",me,"1 "+n(o.toCoin.symbol)+" \u2248 "+n(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+n(o.fromCoin.symbol),1)):(r(),c("span",ce,"1 "+n(o.fromCoin.symbol)+" \u2248 "+n(o.fixD(o.rate,o.toCoin.decimals))+" "+n(o.toCoin.symbol),1)),(r(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:s[0]||(s[0]=b=>o.rateChange=!o.rateChange)},fe))])]),e("div",pe,[e("div",Ce,n(o.$t("modal.slippageTolerance")),1),e("div",he,n(o.slippage)+"%",1)]),e("div",ye,[e("div",be,n(o.$t("common.liquidityDeposited")),1),o.isIncrease?(r(),c("div",$e,n(o.fixD(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals))+" \u2192 "+n(o.fixD(Number(o.currentLpInfo.myCoinXAmount)+Number(o.fromCoinAmount),o.fromCoin.decimals))+" "+n(o.fromCoin.symbol),1)):(r(),c("div",ge,n(o.fromCoinAmount)+" "+n(o.fromCoin.symbol),1))]),e("div",ke,[Ae,o.isIncrease?(r(),c("div",Se,n(o.fixD(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals))+" \u2192 "+n(o.fixD(Number(o.currentLpInfo.myCoinYAmount)+Number(o.toCoinAmount),o.toCoin.decimals))+" "+n(o.toCoin.symbol),1)):(r(),c("div",we,n(o.toCoinAmount)+" "+n(o.toCoin.symbol),1))]),e("div",Le,[e("div",Ie,n(o.$t("common.shareOfPool")),1),o.isIncrease?(r(),c("div",Te,n(o.currentLpInfo.myshareOfPool)+"% \u2192 "+n(o.share)+"%",1)):(r(),c("div",qe,n(o.share)+"%",1))])])])])]),q(a,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:F(()=>[Wo(n(o.$t("button.confirmSupply")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])}const Ne=go(Ho,[["render",_e],["__scopeId","data-v-510e4d91"]]),Be=Co({setup(o,s){const T=Eo(),y=X(()=>T),$=ho(),h=Uo(),a=X(()=>h);let L=t(!0),b=t(!1),_=t(!1),M=t(!1),j=t(!1),W=t(!1);const N=t("fromCoin"),d=t(""),E=t(""),U=t(!1),z=t(!1),p=t(!0),oo=t(!1),G=t(!1),v=t(""),f=t(""),J=t(20),I=t(0),eo=t(null),B=zo(),R=B.currentRoute.value.query.from,Y=B.currentRoute.value.query.to,l=t(""),u=t("");Q(()=>{!vo(a.value.lpTokens)&&!vo(h.tokens)&&!l.value&&!u.value&&(l.value=h.tokens[R]||Object.values(a.value.lpTokens)[0].coinA,u.value=h.tokens[Y]||Object.values(a.value.lpTokens)[0].coinB)});const K=t(""),{t:k}=Go(),wo=X(()=>$.slippage),no=X(()=>fo(l.value.symbol,u.value.symbol,h.lpTokens)?l.value&&Number(v.value)>Number(a.value.tokens[l.value.symbol].balance)?k("button.insufficientBalance",{name:l.value.symbol}):u.value&&Number(f.value)>Number(a.value.tokens[u.value.symbol].balance)?k("button.insufficientBalance",{name:u.value.symbol}):Number(v.value)?k("button.addToPool"):k("button.enterAmount"):k("button.poolNotFound")),So=i=>{var m,C,A,S;N.value=i,i==="fromCoin"?(d.value=((m=u.value)==null?void 0:m.symbol)||"",E.value=((C=l.value)==null?void 0:C.symbol)||""):(d.value=((A=l.value)==null?void 0:A.symbol)||"",E.value=((S=u.value)==null?void 0:S.symbol)||""),U.value=!0},Lo=i=>{v.value="",f.value="",N.value==="fromCoin"?(u.value&&i.symbol.toLowerCase()===(u==null?void 0:u.value.symbol.toLowerCase())&&(u.value=null),l.value=i):(l.value&&i.symbol.toLowerCase()===(l==null?void 0:l.value.symbol.toLowerCase())&&(l.value=null),u.value=i),U.value=!1},Io=i=>{i==="fromCoin"?(p.value=!0,v.value=l.value&&l.value.balance):(p.value=!1,f.value=u.value&&u.value.balance)};Jo(async()=>{const i=B.currentRoute.value.query.from,m=B.currentRoute.value.query.to;K.value=await w.getPrice({coinX:a.value.tokens[i],coinY:a.value.tokens[m]}),io()});const so=async()=>{I.value=0,_.value=!0,setTimeout(()=>{_.value=!1},1e3),y.value.address&&h.setMyLplist(y.value.address),K.value=await w.getPrice({coinX:a.value.tokens[R],coinY:a.value.tokens[Y]})},qo=()=>{const i=l.value;l.value=u.value,u.value=i,b.value=!0,setTimeout(()=>{b.value=!1},300)},io=()=>{eo.value=setInterval(()=>{oo.value||I.value<J.value&&(I.value+=1,I.value===J.value&&(I.value=0))},1e3)},To=async()=>{z.value=!0},w=Ko();Z(p,H((i,m)=>{p.value=i},800)),Z(v,H((i,m)=>{i&&p.value&&lo(i),i==""&&p.value&&(f.value="")},500)),Z(f,H((i,m)=>{i&&!p.value&&lo(i),i==""&&!p.value&&(v.value="")},500));const to=t(""),ao=t(""),lo=async i=>{const m=t({});if(i!==""&&no.value!==k("common.poolNotFound")){if(p.value?m.value={coinX:a.value.tokens[l.value.symbol],coinY:a.value.tokens[u.value.symbol],amount:i}:m.value={coinX:a.value.tokens[u.value.symbol],coinY:a.value.tokens[l.value.symbol],amount:i},m.value)try{const C=await w.getLiquidityAndCoinYByCoinX(m.value);p.value?f.value=C.coinYAmount:v.value=C.coinYAmount,to.value=C.lpAmountView;const A=await w.getShareOfPool({coinX:a.value.tokens[R],coinY:a.value.tokens[Y],currentLpVal:C.lpAmount});ao.value=A}catch{}}else p.value?f.value="":v.value=""},uo=t({});Q(async()=>{y.value.address&&h.setMyLplist(y.value.address)}),Q(()=>{if(l.value&&u.value&&a.value.myLplist&&a.value.myLplist.length>0&&y.value.address){const i=a.value.myLplist;let m;if(l.value.symbol&&u.value.symbol&&(m=fo(l.value.symbol,u.value.symbol,h.lpTokens)),m){const C=i.filter(A=>A.symbol===m.symbol)[0];uo.value=C}}});const{setIsShowSuccess:_o,setIsShowRejected:ro,setIsShowWaiting:V,setTransactionDesc:No,setTransactionTxid:co}=$;return{addCommom:Qo,share:ao,prettyAmount:Zo,fixD:bo,currentLpInfo:uo,lpAmountView:to,coinfrom:R,cointo:Y,router:B,wallet:y,hasLiquidity:L,importIcon:yo,clickExchange:qo,clickRefresh:so,refresh:_,change:b,isShowAddress:M,isShowSwapSetting:j,fromCoin:l,toCoin:u,slippage:wo,openCoinSelect:So,onCoinSelect:Lo,existingCoins:d,lastSelectCoin:E,currentCoinKey:N,showCoinSelect:U,fromCoinAmount:v,toCoinAmount:f,maxBtnSelect:Io,fixedFromCoin:p,BtnText:no,clickBtn:To,loading:oo,swaping:G,autoRefreshTime:J,countdown:I,setMarketTimer:io,marketTimer:eo,rateChange:W,isShowAddConfirm:z,rate:K,toAdd:async()=>{var i,m,C,A;z.value=!1,co(""),No(k("tips.addLiquiditySuccessText",{from:`${v.value} ${(i=l.value)==null?void 0:i.symbol}`,to:`${f.value} ${(m=u.value)==null?void 0:m.symbol}`})),V(!0);try{const S=t({});p.value?S.value={coinX:a.value.tokens[l.value.symbol],coinY:a.value.tokens[u.value.symbol],coinXAmount:v.value,coinYAmount:f.value,slippage:Number($.slippage)/100}:S.value={coinX:a.value.tokens[u.value.symbol],coinY:a.value.tokens[l.value.symbol],coinXAmount:f.value,coinYAmount:v.value,slippage:Number($.slippage)/100};const Bo=await w.createAddLiquidityTransactionPayload(S.value),D=await y.value.currentWallet.signAndSubmitTransaction(Bo);if(D&&D.hash){co(D.hash),V(!1),_o(!0);const mo={title:k("common.addLiquidity"),desc:k("tips.increaseLiquiditySuccess",{from:`${v.value} ${(C=l.value)==null?void 0:C.symbol}`,to:`${f.value} ${(A=u.value)==null?void 0:A.symbol}`}),hash:D.hash};w.showTransitionPending(mo),await w.watchTransaction(mo)&&setTimeout(()=>{so()},1e3)}else V(!1),ro(!0);G.value=!1,f.value="",v.value=""}catch{G.value=!1,V(!1),ro(!0),f.value="",v.value=""}}}}});const P=o=>(ko("data-v-e4498bd6"),o=o(),Ao(),o),Oe={class:"linquidity-add-container"},Pe={class:"title"},Re={class:"left"},Ye={class:"right title-right"},Ve=P(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),De=P(()=>e("use",{"xlink:href":"#icon-icon-information"},null,-1)),Xe=[De],Fe={class:"swap-card"},Me={class:"card-container"},je={class:"card-item"},We={class:"card-item"},Ee={class:"exchange"},Ue=P(()=>e("use",{"xlink:href":"#icon-icon-add1"},null,-1)),ze=[Ue],Ge={key:0,class:"induction"},Je={key:0,class:"item"},Ke={class:"induction-text"},Qe={class:"induction-value induction-value-change"},Ze={key:0},He={key:1},xe=P(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),on=[xe],en={key:1,class:"item"},nn={class:"induction-text"},sn={class:"induction-value"},tn={key:2,class:"item"},an={class:"induction-text"},ln={class:"induction-value"},un={key:0,class:"icon","aria-hidden":"true"},rn=P(()=>e("use",{"xlink:href":"#icon-icon-add"},null,-1)),dn=[rn],cn={key:0,class:"showMyLiquidity"},mn={class:"myLiquidity"},vn={class:"left"},fn={class:"right"},pn={class:"liquidityAsset"},Cn={class:"item"},hn={class:"left"},yn=["src"],bn={class:"right"},gn={class:"item"},$n={class:"left"},kn=["src"],An={class:"right"},wn={class:"induction induction-liquidity"},Sn={class:"item"},Ln={class:"induction-text"},In={class:"induction-value"};function qn(o,s,T,y,$,h){const a=Oo,L=Po,b=Ro,_=$o,M=Yo,j=Do,W=Xo,N=Ne;return r(),c("div",Oe,[q(a),e("div",Pe,[e("div",Re,n(o.$t("common.addLiquidity")),1),e("div",Ye,[e("div",{class:"slippage-icon",onClick:s[0]||(s[0]=d=>o.isShowSwapSetting=!0)},[Ve,e("span",null,n(o.slippage)+"%",1)]),(r(),c("svg",{class:"icon information-icon","aria-hidden":"true",onClick:s[1]||(s[1]=d=>o.isShowAddress=!0)},Xe)),q(L,{loading:o.refresh,"auto-refresh-time":o.autoRefreshTime,countdown:o.countdown,onClickRefresh:o.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),e("div",Fe,[e("div",Me,[e("div",je,[q(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[2]||(s[2]=d=>o.fromCoinAmount=d),"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.fromCoin?o.fromCoin.balance:null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:s[3]||(s[3]=d=>o.maxBtnSelect("fromCoin")),onOnInput:s[4]||(s[4]=d=>o.fromCoinAmount=d),onOnFocus:s[5]||(s[5]=()=>{o.fixedFromCoin=!0}),onOnSelect:s[6]||(s[6]=d=>o.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("div",We,[q(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[7]||(s[7]=d=>o.toCoinAmount=d),"input-value":o.toCoinAmount,"coin-name":o.toCoin?o.toCoin.symbol:"",balance:o.toCoin?o.toCoin.balance:null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:s[8]||(s[8]=d=>o.maxBtnSelect("toCoin")),onOnInput:s[9]||(s[9]=d=>o.toCoinAmount=d),onOnFocus:s[10]||(s[10]=()=>{o.fixedFromCoin=!1}),onOnSelect:s[11]||(s[11]=d=>o.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("img",{class:po(o.change?"gang animationex":"gang"),src:Vo,alt:""},null,2),e("div",Ee,[(r(),c("svg",{class:po(o.change?"icon animationex":"icon"),"aria-hidden":"true"},ze,2))])]),o.BtnText!=="Pool not found"?(r(),c("div",Ge,[o.fromCoin&&o.toCoin?(r(),c("div",Je,[e("div",Ke,n(o.$t("common.rate")),1),e("div",Qe,[o.rateChange?(r(),c("span",He,"1 "+n(o.toCoin.symbol)+" \u2248 "+n(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+n(o.fromCoin.symbol),1)):(r(),c("span",Ze,"1 "+n(o.fromCoin.symbol)+" \u2248 "+n(o.fixD(o.rate,o.toCoin.decimals))+" "+n(o.toCoin.symbol),1)),(r(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:s[12]||(s[12]=d=>o.rateChange=!o.rateChange)},on))])])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(r(),c("div",en,[e("div",nn,n(o.$t("common.shareOfPool")),1),e("div",sn,n(o.share)+"%",1)])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(r(),c("div",tn,[e("div",an,n(o.$t("common.lPTokensReceived")),1),e("div",ln,n(o.lpAmountView),1)])):g("",!0)])):g("",!0)]),q(_,{disabled:o.wallet.connected?o.loading||o.swaping||!o.fromCoin||!o.toCoin||!Number(o.fromCoinAmount)||!Number(o.toCoinAmount)||Number(o.fromCoinAmount)>o.fromCoin.balance||Number(o.toCoinAmount)>Number(o.toCoin.balance)||o.swapBtnText==o.$t("button.poolNotFound"):!1,loading:o.swaping,class:"big-btn",onClick:s[13]||(s[13]=d=>o.wallet.connected?o.isShowAddConfirm=!0:o.wallet.setIsShowWalletModal(!0))},{default:F(()=>[o.wallet.connected?(r(),c("svg",un,dn)):g("",!0),e("span",null,n(o.wallet.connected?o.BtnText:o.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),o.currentLpInfo&&o.currentLpInfo.myLpBalance&&Number(o.currentLpInfo.balance)!==0&&o.wallet.connected&&o.BtnText!==o.$t("button.poolNotFound")?(r(),c("div",cn,[e("div",mn,[e("div",vn,n(o.$t("common.yourLiquidity")),1),e("div",fn,[e("p",null,n(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+n(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])]),e("div",pn,[e("div",Cn,[e("div",hn,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,yn),e("span",null,n(o.fromCoin.symbol),1)]),e("div",bn,n(o.currentLpInfo.myCoinXAmount),1)]),e("div",gn,[e("div",$n,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,kn),e("span",null,n(o.toCoin.symbol),1)]),e("div",An,n(o.currentLpInfo.myCoinYAmount),1)])]),e("div",wn,[e("div",Sn,[e("div",Ln,n(o.$t("common.shareOfPool")),1),e("div",In,n(o.currentLpInfo.myshareOfPool)+" %",1)])])])):g("",!0),o.showCoinSelect?(r(),O(M,{key:1,"existing-coins":o.existingCoins,"last-select-coin":o.lastSelectCoin,onOnSelect:o.onCoinSelect,onOnClose:s[14]||(s[14]=d=>o.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):g("",!0),o.isShowAddress?(r(),O(j,{key:2,"from-coins":o.fromCoin,"to-coins":o.toCoin,onOnClose:s[15]||(s[15]=d=>o.isShowAddress=!1)},null,8,["from-coins","to-coins"])):g("",!0),o.isShowSwapSetting?(r(),O(W,{key:3,onOnClose:s[16]||(s[16]=d=>o.isShowSwapSetting=!1)})):g("",!0),o.isShowAddConfirm?(r(),O(N,{key:4,"current-lp-info":o.currentLpInfo,"is-increase":!!(o.currentLpInfo&&Number(o.currentLpInfo.balance)!==0),"fixed-from-coin":o.fixedFromCoin,"from-coin":o.fromCoin,"to-coin":o.toCoin,share:o.share,rate:o.rate,"lp-amount":o.lpAmountView,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"current-recived-lp":o.lpAmountView,onOnClose:s[17]||(s[17]=d=>o.isShowAddConfirm=!1),onToAdd:o.toAdd},null,8,["current-lp-info","is-increase","fixed-from-coin","from-coin","to-coin","share","rate","lp-amount","from-coin-amount","to-coin-amount","current-recived-lp","onToAdd"])):g("",!0)])}const Dn=go(Be,[["render",qn],["__scopeId","data-v-e4498bd6"]]);export{Dn as default};
