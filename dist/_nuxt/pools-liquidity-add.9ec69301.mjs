import{_ as Bo}from"./back.e511abc6.mjs";import{_ as Oo}from"./refresh-icon.f81ee69b.mjs";import{_ as Po}from"./assets-card.a018f1a2.mjs";import{_ as Ro}from"./coin-select.529d9381.mjs";import{_ as Yo,a as Vo}from"./img-leverage_2x.1c23b184.mjs";import{_ as Do}from"./swap-setting.2bedfc43.mjs";import{a as po,Q as Xo,b as Co,r as t,i as ho,j as yo,k as Mo,l as bo,J as Fo,o as u,c as V,w as E,p as e,t as s,m as c,q as T,G as jo,B as go,y as So,z as $o,X as Eo,e as F,Y as Wo,A as Ko,Z as m,$ as j,a0 as H,h as Uo,a1 as zo,a2 as x,a3 as oo,a4 as Go,a5 as Jo,a6 as Qo,s as fo,v as g}from"./entry.59b1ebad.mjs";const Zo=po({components:{Modal:Xo},props:{isIncrease:{type:Boolean,required:!1},fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},currentLpInfo:{type:Object,required:!0},share:{type:String,required:!0},rate:{type:String,required:!0},currentRecivedLp:{type:String,required:!0}},emits:["to-add","on-close"],setup(o,n){const N=Co(),p=t(N.slippage||.5),S=t(!0),A=t(!1);function k(b){S.value=b}return{importIcon:ho,fixD:yo,decimalFormat:Mo,direct:S,changeDirect:k,rateChange:A,clickNextBtn:async()=>{n.emit("to-add")},slippage:p}}});const I=o=>(So("data-v-f048f67a"),o=o(),$o(),o),Ho=I(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xo={class:"add-confirm-container"},oe={class:"card-content"},ee={class:"top"},ne={class:"coin"},se=["src"],ie=["src"],te={class:"bottom"},ae={class:"induction"},le={class:"item"},ue=I(()=>e("div",{class:"induction-text"},"Rate",-1)),re={class:"induction-value induction-value-change"},de={key:0},ce={key:1},me=I(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ve=[me],fe={class:"item"},pe=I(()=>e("div",{class:"induction-text"},"Slippage Tolerance",-1)),Ce={class:"induction-value"},he={class:"item"},ye=I(()=>e("div",{class:"induction-text"},"Liquidity Deposited",-1)),be={key:0,class:"induction-value"},ge={key:1,class:"induction-value"},Se={class:"item liquidity-item"},$e=I(()=>e("div",{class:"induction-text"},null,-1)),Ae={key:0,class:"induction-value"},we={key:1,class:"induction-value"},Le={class:"item"},ke=I(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),_e={key:0,class:"induction-value"},Ie={key:1,class:"induction-value"},qe=jo(s("Confirm Supply"));function Te(o,n,N,p,S,A){const k=go,w=Fo("Modal");return u(),V(w,{width:"440px",visible:!0,footer:null,title:"You will receive",class:"add-confirm-modal",onCancel:n[1]||(n[1]=b=>o.$emit("on-close"))},{closeIcon:E(()=>[Ho]),default:E(()=>[e("div",xo,[e("div",oe,[e("div",ee,[e("div",ne,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,se),e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,ie),e("p",null,s(o.currentRecivedLp)+" LP",1)])]),e("div",te,[e("div",ae,[e("div",le,[ue,e("div",re,[o.rateChange?(u(),c("span",ce,"1 "+s(o.toCoin.symbol)+" \u2248 "+s(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("span",de,"1 "+s(o.fromCoin.symbol)+" \u2248 "+s(o.fixD(o.rate,o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)),(u(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=b=>o.rateChange=!o.rateChange)},ve))])]),e("div",fe,[pe,e("div",Ce,s(o.slippage)+"%",1)]),e("div",he,[ye,o.isIncrease?(u(),c("div",ge,s(o.fixD(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals))+" \u2192 "+s(o.fixD(Number(o.currentLpInfo.myCoinXAmount)+Number(o.fromCoinAmount),o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("div",be,s(o.fromCoinAmount)+" "+s(o.fromCoin.symbol),1))]),e("div",Se,[$e,o.isIncrease?(u(),c("div",we,s(o.fixD(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals))+" \u2192 "+s(o.fixD(Number(o.currentLpInfo.myCoinYAmount)+Number(o.toCoinAmount),o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)):(u(),c("div",Ae,s(o.toCoinAmount)+" "+s(o.toCoin.symbol),1))]),e("div",Le,[ke,o.isIncrease?(u(),c("div",Ie,s(o.currentLpInfo.myshareOfPool)+"% \u2192 "+s(o.share)+"%",1)):(u(),c("div",_e,s(o.share)+"%",1))])])])])]),T(k,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:E(()=>[qe]),_:1},8,["onClick"])]),_:1})}const Ne=bo(Zo,[["render",Te],["__scopeId","data-v-f048f67a"]]),Be=po({setup(o,n){const N=Eo(),p=F(()=>N),S=Co(),A=Wo();let k=t(!0),w=t(!1),b=t(!1),W=t(!1),K=t(!1),U=t(!1);const B=t("fromCoin"),O=t(""),r=t(""),z=t(!1),G=t(!1),h=t(!0),eo=t(!1),J=t(!1),v=t(""),C=t(""),Q=t(20),q=t(0),no=t(null),P=Ko(),D=P.currentRoute.value.query.from,X=P.currentRoute.value.query.to,a=t(m[D]||Object.values(j)[0].coinA),l=t(m[X]||Object.values(j)[0].coinB),Z=t(""),Ao=F(()=>S.slippage),so=F(()=>{let i="",d="";return a.value&&l.value?(i=a.value.symbol+"-"+l.value.symbol,d=l.value.symbol+"-"+a.value.symbol):(i="",d=""),!Object.keys(j).includes(i)&&!Object.keys(j).includes(d)?"Pool not found":a.value&&Number(v.value)>Number(R.value.tokens[a.value.symbol].balance)?`Insufficient ${a.value.symbol} balance`:l.value&&Number(C.value)>Number(R.value.tokens[l.value.symbol].balance)?`Insufficient ${l.value.symbol} balance`:Number(v.value)?"Add to pool":"Enter an amount"}),wo=i=>{var d,f,$,L;B.value=i,i==="fromCoin"?(O.value=((d=l.value)==null?void 0:d.symbol)||"",r.value=((f=a.value)==null?void 0:f.symbol)||""):(O.value=(($=a.value)==null?void 0:$.symbol)||"",r.value=((L=l.value)==null?void 0:L.symbol)||""),z.value=!0},Lo=i=>{v.value="",C.value="",B.value==="fromCoin"?(l.value&&i.symbol.toLowerCase()===(l==null?void 0:l.value.symbol.toLowerCase())&&(l.value=null),a.value=i):(a.value&&i.symbol.toLowerCase()===(a==null?void 0:a.value.symbol.toLowerCase())&&(a.value=null),l.value=i),z.value=!1},ko=i=>{i==="fromCoin"?(h.value=!0,v.value=a.value&&a.value.balance):(h.value=!1,C.value=l.value&&l.value.balance)};H(async()=>{p.value.address&&A.setMyLplist(p.value.address)}),Uo(async()=>{const i=P.currentRoute.value.query.from,d=P.currentRoute.value.query.to;Z.value=await _.getPrice({coinX:m[i],coinY:m[d]}),to()});const io=async()=>{q.value=0,b.value=!0,setTimeout(()=>{b.value=!1},1e3),p.value.address&&A.setMyLplist(p.value.address),Z.value=await _.getPrice({coinX:m[D],coinY:m[X]})},_o=()=>{const i=a.value;a.value=l.value,l.value=i,w.value=!0,setTimeout(()=>{w.value=!1},300)},to=()=>{no.value=setInterval(()=>{eo.value||q.value<Q.value&&(q.value+=1,q.value===Q.value&&(q.value=0))},1e3)},Io=async()=>{G.value=!0},_=zo();x(h,oo((i,d)=>{h.value=i},800)),x(v,oo((i,d)=>{i&&h.value&&uo(i),i==""&&h.value&&(C.value="")},500)),x(C,oo((i,d)=>{i&&!h.value&&uo(i),i==""&&!h.value&&(v.value="")},500));const ao=t(""),lo=t(""),uo=async i=>{const d=t({});if(i!==""&&so.value!=="Pool not found"){if(h.value?d.value={coinX:m[a.value.symbol],coinY:m[l.value.symbol],amount:i}:d.value={coinX:m[l.value.symbol],coinY:m[a.value.symbol],amount:i},d.value)try{const f=await _.getLiquidityAndCoinYByCoinX(d.value);h.value?C.value=f.coinYAmount:v.value=f.coinYAmount,ao.value=f.lpAmountView;const $=await _.getShareOfPool({coinX:m[D],coinY:m[X],currentLpVal:f.lpAmount});lo.value=$}catch(f){console.log("pools-liquidity-add###getAmount###share##error###",f)}}else h.value?C.value="":v.value=""},R=F(()=>A),ro=t({});H(async()=>{p.value.address&&A.setMyLplist(p.value.address)}),H(()=>{if(a.value&&l.value&&R.value.myLplist&&R.value.myLplist.length>0&&p.value.address){const i=R.value.myLplist;let d;if(a.value.symbol&&l.value.symbol&&(d=Qo(a.value.symbol,l.value.symbol)),d){const f=i.filter($=>$.symbol===d.symbol)[0];console.log(f,"info9999999"),ro.value=f}}});const{setIsShowSuccess:qo,setIsShowRejected:co,setIsShowWaiting:M,setTransactionDesc:To,setTransactionTxid:mo}=S;return{addCommom:Go,share:lo,prettyAmount:Jo,fixD:yo,currentLpInfo:ro,lpAmountView:ao,coinfrom:D,cointo:X,router:P,wallet:p,hasLiquidity:k,importIcon:ho,clickExchange:_o,clickRefresh:io,refresh:b,change:w,isShowAddress:W,isShowSwapSetting:K,fromCoin:a,toCoin:l,slippage:Ao,openCoinSelect:wo,onCoinSelect:Lo,existingCoins:O,lastSelectCoin:r,currentCoinKey:B,showCoinSelect:z,fromCoinAmount:v,toCoinAmount:C,maxBtnSelect:ko,fixedFromCoin:h,BtnText:so,clickBtn:Io,loading:eo,swaping:J,autoRefreshTime:Q,countdown:q,setMarketTimer:to,marketTimer:no,rateChange:U,isShowAddConfirm:G,rate:Z,toAdd:async()=>{var i,d,f,$;G.value=!1,mo(""),To(`Supplied ${v.value} ${(i=a.value)==null?void 0:i.symbol} and 
        ${C.value} ${(d=l.value)==null?void 0:d.symbol}`),M(!0);try{const L=t({});h.value?L.value={coinX:m[a.value.symbol],coinY:m[l.value.symbol],coinXAmount:v.value,coinYAmount:C.value,slippage:Number(S.slippage)/100}:L.value={coinX:m[l.value.symbol],coinY:m[a.value.symbol],coinXAmount:C.value,coinYAmount:v.value,slippage:Number(S.slippage)/100};const No=await _.createAddLiquidityTransactionPayload(L.value),Y=await p.value.currentWallet.signAndSubmitTransaction(No);if(console.log("waitForTransaction###tx####",Y,p.value),Y&&Y.hash){mo(Y.hash),M(!1),qo(!0);const vo={title:"Add Liquidity",desc:`Supplying ${v.value} ${(f=a.value)==null?void 0:f.symbol} and 
        ${C.value} ${($=l.value)==null?void 0:$.symbol}`,hash:Y.hash};_.showTransitionPending(vo),await _.watchTransaction(vo)&&setTimeout(()=>{io()},1e3)}else M(!1),co(!0);J.value=!1,C.value="",v.value=""}catch(L){J.value=!1,console.log("Swap error###",L),M(!1),co(!0),C.value="",v.value=""}}}}});const y=o=>(So("data-v-fa833fff"),o=o(),$o(),o),Oe={class:"linquidity-add-container"},Pe={class:"title"},Re=y(()=>e("div",{class:"left"},"Add Liquidity",-1)),Ye={class:"right title-right"},Ve=y(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),De=y(()=>e("use",{"xlink:href":"#icon-icon-information"},null,-1)),Xe=[De],Me={class:"swap-card"},Fe={class:"card-container"},je={class:"card-item"},Ee={class:"card-item"},We={class:"exchange"},Ke=y(()=>e("use",{"xlink:href":"#icon-icon-add1"},null,-1)),Ue=[Ke],ze={key:0,class:"induction"},Ge={key:0,class:"item"},Je=y(()=>e("div",{class:"induction-text"},"Rate",-1)),Qe={class:"induction-value induction-value-change"},Ze={key:0},He={key:1},xe=y(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),on=[xe],en={key:1,class:"item"},nn=y(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),sn={class:"induction-value"},tn={key:2,class:"item"},an=y(()=>e("div",{class:"induction-text"},"Estimated LP Tokens Received",-1)),ln={class:"induction-value"},un={key:0,class:"icon","aria-hidden":"true"},rn=y(()=>e("use",{"xlink:href":"#icon-icon-add"},null,-1)),dn=[rn],cn={key:0,class:"showMyLiquidity"},mn={class:"myLiquidity"},vn=y(()=>e("div",{class:"left"},"Your Liquidity",-1)),fn={class:"right"},pn={class:"liquidityAsset"},Cn={class:"item"},hn={class:"left"},yn=["src"],bn={class:"right"},gn={class:"item"},Sn={class:"left"},$n=["src"],An={class:"right"},wn={class:"induction induction-liquidity"},Ln={class:"item"},kn=y(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),_n={class:"induction-value"};function In(o,n,N,p,S,A){const k=Bo,w=Oo,b=Po,W=go,K=Ro,U=Vo,B=Do,O=Ne;return u(),c("div",Oe,[T(k),e("div",Pe,[Re,e("div",Ye,[e("div",{class:"slippage-icon",onClick:n[0]||(n[0]=r=>o.isShowSwapSetting=!0)},[Ve,e("span",null,s(o.slippage)+"%",1)]),(u(),c("svg",{class:"icon information-icon","aria-hidden":"true",onClick:n[1]||(n[1]=r=>o.isShowAddress=!0)},Xe)),T(w,{loading:o.refresh,"auto-refresh-time":o.autoRefreshTime,countdown:o.countdown,onClickRefresh:o.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),e("div",Me,[e("div",Fe,[e("div",je,[T(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[2]||(n[2]=r=>o.fromCoinAmount=r),"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.fromCoin?o.fromCoin.balance:null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:n[3]||(n[3]=r=>o.maxBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=r=>o.fromCoinAmount=r),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0}),onOnSelect:n[6]||(n[6]=r=>o.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("div",Ee,[T(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[7]||(n[7]=r=>o.toCoinAmount=r),"input-value":o.toCoinAmount,"coin-name":o.toCoin?o.toCoin.symbol:"",balance:o.toCoin?o.toCoin.balance:null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:n[8]||(n[8]=r=>o.maxBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=r=>o.toCoinAmount=r),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1}),onOnSelect:n[11]||(n[11]=r=>o.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("img",{class:fo(o.change?"gang animationex":"gang"),src:Yo,alt:""},null,2),e("div",We,[(u(),c("svg",{class:fo(o.change?"icon animationex":"icon"),"aria-hidden":"true"},Ue,2))])]),o.BtnText!=="Pool not found"?(u(),c("div",ze,[o.fromCoin&&o.toCoin?(u(),c("div",Ge,[Je,e("div",Qe,[o.rateChange?(u(),c("span",He,"1 "+s(o.toCoin.symbol)+" \u2248 "+s(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("span",Ze,"1 "+s(o.fromCoin.symbol)+" \u2248 "+s(o.fixD(o.rate,o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)),(u(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[12]||(n[12]=r=>o.rateChange=!o.rateChange)},on))])])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(u(),c("div",en,[nn,e("div",sn,s(o.share)+"%",1)])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(u(),c("div",tn,[an,e("div",ln,s(o.lpAmountView),1)])):g("",!0)])):g("",!0)]),T(W,{disabled:o.wallet.connected?o.loading||o.swaping||!o.fromCoin||!o.toCoin||!Number(o.fromCoinAmount)||!Number(o.toCoinAmount)||Number(o.fromCoinAmount)>o.fromCoin.balance||Number(o.toCoinAmount)>Number(o.toCoin.balance)||o.swapBtnText=="Pool not found":!1,loading:o.swaping,class:"big-btn",onClick:n[13]||(n[13]=r=>o.wallet.connected?o.isShowAddConfirm=!0:o.wallet.setIsShowWalletModal(!0))},{default:E(()=>[o.wallet.connected?(u(),c("svg",un,dn)):g("",!0),e("span",null,s(o.wallet.connected?o.BtnText:"Connect Wallet"),1)]),_:1},8,["disabled","loading"]),o.currentLpInfo&&o.currentLpInfo.myLpBalance&&Number(o.currentLpInfo.balance)!==0&&o.wallet.connected&&o.BtnText!=="Pool not found"?(u(),c("div",cn,[e("div",mn,[vn,e("div",fn,[e("p",null,s(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+s(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])]),e("div",pn,[e("div",Cn,[e("div",hn,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,yn),e("span",null,s(o.fromCoin.symbol),1)]),e("div",bn,s(o.currentLpInfo.myCoinXAmount),1)]),e("div",gn,[e("div",Sn,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,$n),e("span",null,s(o.toCoin.symbol),1)]),e("div",An,s(o.currentLpInfo.myCoinYAmount),1)])]),e("div",wn,[e("div",Ln,[kn,e("div",_n,s(o.currentLpInfo.myshareOfPool)+" %",1)])])])):g("",!0),o.showCoinSelect?(u(),V(K,{key:1,"existing-coins":o.existingCoins,"last-select-coin":o.lastSelectCoin,onOnSelect:o.onCoinSelect,onOnClose:n[14]||(n[14]=r=>o.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):g("",!0),o.isShowAddress?(u(),V(U,{key:2,"from-coins":o.fromCoin,"to-coins":o.toCoin,onOnClose:n[15]||(n[15]=r=>o.isShowAddress=!1)},null,8,["from-coins","to-coins"])):g("",!0),o.isShowSwapSetting?(u(),V(B,{key:3,onOnClose:n[16]||(n[16]=r=>o.isShowSwapSetting=!1)})):g("",!0),o.isShowAddConfirm?(u(),V(O,{key:4,"current-lp-info":o.currentLpInfo,"is-increase":!!(o.currentLpInfo&&Number(o.currentLpInfo.balance)!==0),"fixed-from-coin":o.fixedFromCoin,"from-coin":o.fromCoin,"to-coin":o.toCoin,share:o.share,rate:o.rate,"lp-amount":o.lpAmountView,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"current-recived-lp":o.lpAmountView,onOnClose:n[17]||(n[17]=r=>o.isShowAddConfirm=!1),onToAdd:o.toAdd},null,8,["current-lp-info","is-increase","fixed-from-coin","from-coin","to-coin","share","rate","lp-amount","from-coin-amount","to-coin-amount","current-recived-lp","onToAdd"])):g("",!0)])}const Dn=bo(Be,[["render",In],["__scopeId","data-v-fa833fff"]]);export{Dn as default};
