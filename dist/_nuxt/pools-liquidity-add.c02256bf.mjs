import{_ as Oo}from"./back.aa39d0e1.mjs";import{_ as Bo}from"./refresh-icon.ce3eb1d0.mjs";import{_ as Po}from"./assets-card.ffd57c8e.mjs";import{_ as Ro}from"./coin-select.01268ab0.mjs";import{_ as Yo,a as Vo}from"./img-leverage_2x.c6eb6985.mjs";import{_ as Do}from"./swap-setting.20823366.mjs";import{a as po,Q as Xo,b as Co,r as t,i as ho,j as yo,k as Mo,l as go,J as Fo,o as u,c as Y,w as j,p as e,t as s,m as c,q as T,G as jo,B as bo,y as So,z as $o,X as Eo,e as M,Y as Wo,A as Ko,Z as m,$ as F,a0 as H,h as Uo,a1 as zo,a2 as x,a3 as oo,a4 as Go,a5 as Jo,a6 as Qo,s as fo,v as b}from"./entry.ceb8596e.mjs";const Zo=po({components:{Modal:Xo},props:{isIncrease:{type:Boolean,required:!1},fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},currentLpInfo:{type:Object,required:!0},share:{type:String,required:!0},rate:{type:String,required:!0},currentRecivedLp:{type:String,required:!0}},emits:["to-add","on-close"],setup(o,n){const N=Co(),p=t(N.slippage||1),S=t(!0),A=t(!1);function _(g){S.value=g}return{importIcon:ho,fixD:yo,decimalFormat:Mo,direct:S,changeDirect:_,rateChange:A,clickNextBtn:async()=>{n.emit("to-add")},slippage:p}}});const I=o=>(So("data-v-12a30cdc"),o=o(),$o(),o),Ho=I(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xo={class:"add-confirm-container"},oe={class:"card-content"},ee={class:"top"},ne={class:"coin"},se=["src"],ie=["src"],te={class:"bottom"},ae={class:"induction"},le={class:"item"},ue=I(()=>e("div",{class:"induction-text"},"Rate",-1)),re={class:"induction-value induction-value-change"},de={key:0},ce={key:1},me=I(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ve=[me],fe={class:"item"},pe=I(()=>e("div",{class:"induction-text"},"Slippage Tolerance",-1)),Ce={class:"induction-value"},he={class:"item"},ye=I(()=>e("div",{class:"induction-text"},"Liquidity Deposited",-1)),ge={key:0,class:"induction-value"},be={key:1,class:"induction-value"},Se={class:"item liquidity-item"},$e=I(()=>e("div",{class:"induction-text"},null,-1)),Ae={key:0,class:"induction-value"},we={key:1,class:"induction-value"},Le={class:"item"},_e=I(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),ke={key:0,class:"induction-value"},Ie={key:1,class:"induction-value"},qe=jo(s("Confirm Supply"));function Te(o,n,N,p,S,A){const _=bo,w=Fo("Modal");return u(),Y(w,{width:"440px",visible:!0,footer:null,title:"You will receive",class:"add-confirm-modal",onCancel:n[1]||(n[1]=g=>o.$emit("on-close"))},{closeIcon:j(()=>[Ho]),default:j(()=>[e("div",xo,[e("div",oe,[e("div",ee,[e("div",ne,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,se),e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,ie),e("p",null,s(o.currentRecivedLp)+" LP",1)])]),e("div",te,[e("div",ae,[e("div",le,[ue,e("div",re,[o.rateChange?(u(),c("span",ce,"1 "+s(o.toCoin.symbol)+" \u2248 "+s(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("span",de,"1 "+s(o.fromCoin.symbol)+" \u2248 "+s(o.fixD(o.rate,o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)),(u(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=g=>o.rateChange=!o.rateChange)},ve))])]),e("div",fe,[pe,e("div",Ce,s(o.slippage)+"%",1)]),e("div",he,[ye,o.isIncrease?(u(),c("div",be,s(o.fixD(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals))+" \u2192 "+s(o.fixD(Number(o.currentLpInfo.myCoinXAmount)+Number(o.fromCoinAmount),o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("div",ge,s(o.fromCoinAmount)+" "+s(o.fromCoin.symbol),1))]),e("div",Se,[$e,o.isIncrease?(u(),c("div",we,s(o.fixD(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals))+" \u2192 "+s(o.fixD(Number(o.currentLpInfo.myCoinYAmount)+Number(o.toCoinAmount),o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)):(u(),c("div",Ae,s(o.toCoinAmount)+" "+s(o.toCoin.symbol),1))]),e("div",Le,[_e,o.isIncrease?(u(),c("div",Ie,s(o.currentLpInfo.myshareOfPool)+"% \u2192 "+s(o.share)+"%",1)):(u(),c("div",ke,s(o.share)+"%",1))])])])])]),T(_,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:j(()=>[qe]),_:1},8,["onClick"])]),_:1})}const Ne=go(Zo,[["render",Te],["__scopeId","data-v-12a30cdc"]]),Oe=po({setup(o,n){const N=Eo(),p=M(()=>N),S=Co(),A=Wo();let _=t(!0),w=t(!1),g=t(!1),E=t(!1),W=t(!1),K=t(!1);const O=t("fromCoin"),B=t(""),r=t(""),U=t(!1),z=t(!1),h=t(!0),eo=t(!1),G=t(!1),v=t(""),C=t(""),J=t(20),q=t(0),no=t(null),P=Ko(),V=P.currentRoute.value.query.from,D=P.currentRoute.value.query.to,a=t(m[V]||Object.values(F)[0].coinA),l=t(m[D]||Object.values(F)[0].coinB),Q=t(""),Ao=M(()=>S.slippage),so=M(()=>{let i="",d="";return a.value&&l.value?(i=a.value.symbol+"-"+l.value.symbol,d=l.value.symbol+"-"+a.value.symbol):(i="",d=""),!Object.keys(F).includes(i)&&!Object.keys(F).includes(d)?"Pool not found":a.value&&Number(v.value)>a.value.balance?`Insufficient ${a.value.symbol} balance`:l.value&&Number(C.value)>Number(l.value.balance)?`Insufficient ${l.value.symbol} balance`:Number(v.value)?"Add to pool":"Enter an amount"}),wo=i=>{var d,f,$,L;O.value=i,i==="fromCoin"?(B.value=((d=l.value)==null?void 0:d.symbol)||"",r.value=((f=a.value)==null?void 0:f.symbol)||""):(B.value=(($=a.value)==null?void 0:$.symbol)||"",r.value=((L=l.value)==null?void 0:L.symbol)||""),U.value=!0},Lo=i=>{v.value="",C.value="",O.value==="fromCoin"?(l.value&&i.symbol.toLowerCase()===(l==null?void 0:l.value.symbol.toLowerCase())&&(l.value=null),a.value=i):(a.value&&i.symbol.toLowerCase()===(a==null?void 0:a.value.symbol.toLowerCase())&&(a.value=null),l.value=i),U.value=!1},_o=i=>{i==="fromCoin"?(h.value=!0,v.value=a.value&&a.value.balance):(h.value=!1,C.value=l.value&&l.value.balance)};H(async()=>{p.value.address&&A.setMyLplist(p.value.address)}),Uo(async()=>{const i=P.currentRoute.value.query.from,d=P.currentRoute.value.query.to;Q.value=await k.getPrice({coinX:m[i],coinY:m[d]}),to()});const io=async()=>{q.value=0,g.value=!0,setTimeout(()=>{g.value=!1},1e3),p.value.address&&A.setMyLplist(p.value.address),Q.value=await k.getPrice({coinX:m[V],coinY:m[D]})},ko=()=>{const i=a.value;a.value=l.value,l.value=i,w.value=!0,setTimeout(()=>{w.value=!1},300)},to=()=>{no.value=setInterval(()=>{eo.value||q.value<J.value&&(q.value+=1,q.value===J.value&&(q.value=0))},1e3)},Io=async()=>{z.value=!0},k=zo();x(h,oo((i,d)=>{h.value=i},800)),x(v,oo((i,d)=>{i&&h.value&&uo(i),i==""&&h.value&&(C.value="")},500)),x(C,oo((i,d)=>{i&&!h.value&&uo(i),i==""&&!h.value&&(v.value="")},500));const ao=t(""),lo=t(""),uo=async i=>{const d=t({});if(i!==""&&so.value!=="Pool not found"){if(h.value?d.value={coinX:m[a.value.symbol],coinY:m[l.value.symbol],amount:i}:d.value={coinX:m[l.value.symbol],coinY:m[a.value.symbol],amount:i},d.value)try{const f=await k.getLiquidityAndCoinYByCoinX(d.value);h.value?C.value=f.coinYAmount:v.value=f.coinYAmount,ao.value=f.lpAmountView;const $=await k.getShareOfPool({coinX:m[V],coinY:m[D],currentLpVal:f.lpAmount});lo.value=$}catch(f){console.log("pools-liquidity-add###getAmount###share##error###",f)}}else h.value?C.value="":v.value=""},Z=M(()=>A),ro=t({});H(async()=>{p.value.address&&A.setMyLplist(p.value.address)}),H(()=>{if(a.value&&l.value&&Z.value.myLplist&&Z.value.myLplist.length>0&&p.value.address){const i=Z.value.myLplist;let d;if(a.value.symbol&&l.value.symbol&&(d=Qo(a.value.symbol,l.value.symbol)),d){const f=i.filter($=>$.symbol===d.symbol)[0];console.log(f,"info9999999"),ro.value=f}}});const{setIsShowSuccess:qo,setIsShowRejected:co,setIsShowWaiting:X,setTransactionDesc:To,setTransactionTxid:mo}=S;return{addCommom:Go,share:lo,prettyAmount:Jo,fixD:yo,currentLpInfo:ro,lpAmountView:ao,coinfrom:V,cointo:D,router:P,wallet:p,hasLiquidity:_,importIcon:ho,clickExchange:ko,clickRefresh:io,refresh:g,change:w,isShowAddress:E,isShowSwapSetting:W,fromCoin:a,toCoin:l,slippage:Ao,openCoinSelect:wo,onCoinSelect:Lo,existingCoins:B,lastSelectCoin:r,currentCoinKey:O,showCoinSelect:U,fromCoinAmount:v,toCoinAmount:C,maxBtnSelect:_o,fixedFromCoin:h,BtnText:so,clickBtn:Io,loading:eo,swaping:G,autoRefreshTime:J,countdown:q,setMarketTimer:to,marketTimer:no,rateChange:K,isShowAddConfirm:z,rate:Q,toAdd:async()=>{var i,d,f,$;z.value=!1,mo(""),To(`Supplied ${v.value} ${(i=a.value)==null?void 0:i.symbol} and 
        ${C.value} ${(d=l.value)==null?void 0:d.symbol}`),X(!0);try{const L=t({});h.value?L.value={coinX:m[a.value.symbol],coinY:m[l.value.symbol],coinXAmount:v.value,coinYAmount:C.value,slippage:Number(S.slippage)/100}:L.value={coinX:m[l.value.symbol],coinY:m[a.value.symbol],coinXAmount:C.value,coinYAmount:v.value,slippage:Number(S.slippage)/100};const No=await k.createAddLiquidityTransactionPayload(L.value),R=await p.value.currentWallet.signAndSubmitTransaction(No);if(console.log("waitForTransaction###tx####",R,p.value),R&&R.hash){mo(R.hash),X(!1),qo(!0);const vo={title:"Add Liquidity",desc:`Supplying ${v.value} ${(f=a.value)==null?void 0:f.symbol} and 
        ${C.value} ${($=l.value)==null?void 0:$.symbol}`,hash:R.hash};k.showTransitionPending(vo),await k.watchTransaction(vo)&&setTimeout(()=>{io()},1e3)}else X(!1),co(!0);G.value=!1,C.value="",v.value=""}catch(L){G.value=!1,console.log("Swap error###",L),X(!1),co(!0),C.value="",v.value=""}}}}});const y=o=>(So("data-v-a0f875f2"),o=o(),$o(),o),Be={class:"linquidity-add-container"},Pe={class:"title"},Re=y(()=>e("div",{class:"left"},"Add Liquidity",-1)),Ye={class:"right title-right"},Ve=y(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),De=y(()=>e("use",{"xlink:href":"#icon-icon-information"},null,-1)),Xe=[De],Me={class:"swap-card"},Fe={class:"card-container"},je={class:"card-item"},Ee={class:"card-item"},We={class:"exchange"},Ke=y(()=>e("use",{"xlink:href":"#icon-icon-add1"},null,-1)),Ue=[Ke],ze={key:0,class:"induction"},Ge={key:0,class:"item"},Je=y(()=>e("div",{class:"induction-text"},"Rate",-1)),Qe={class:"induction-value induction-value-change"},Ze={key:0},He={key:1},xe=y(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),on=[xe],en={key:1,class:"item"},nn=y(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),sn={class:"induction-value"},tn={key:2,class:"item"},an=y(()=>e("div",{class:"induction-text"},"Estimated LP Tokens Received",-1)),ln={class:"induction-value"},un={key:0,class:"icon","aria-hidden":"true"},rn=y(()=>e("use",{"xlink:href":"#icon-icon-add"},null,-1)),dn=[rn],cn={key:0,class:"showMyLiquidity"},mn={class:"myLiquidity"},vn=y(()=>e("div",{class:"left"},"Your Liquidity",-1)),fn={class:"right"},pn={class:"liquidityAsset"},Cn={class:"item"},hn={class:"left"},yn=["src"],gn={class:"right"},bn={class:"item"},Sn={class:"left"},$n=["src"],An={class:"right"},wn={class:"induction induction-liquidity"},Ln={class:"item"},_n=y(()=>e("div",{class:"induction-text"},"Share of Pool",-1)),kn={class:"induction-value"};function In(o,n,N,p,S,A){const _=Oo,w=Bo,g=Po,E=bo,W=Ro,K=Vo,O=Do,B=Ne;return u(),c("div",Be,[T(_),e("div",Pe,[Re,e("div",Ye,[e("div",{class:"slippage-icon",onClick:n[0]||(n[0]=r=>o.isShowSwapSetting=!0)},[Ve,e("span",null,s(o.slippage)+"%",1)]),(u(),c("svg",{class:"icon information-icon","aria-hidden":"true",onClick:n[1]||(n[1]=r=>o.isShowAddress=!0)},Xe)),T(w,{loading:o.refresh,"auto-refresh-time":o.autoRefreshTime,countdown:o.countdown,onClickRefresh:o.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),e("div",Me,[e("div",Fe,[e("div",je,[T(g,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[2]||(n[2]=r=>o.fromCoinAmount=r),"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.fromCoin?o.fromCoin.balance:null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:n[3]||(n[3]=r=>o.maxBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=r=>o.fromCoinAmount=r),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0}),onOnSelect:n[6]||(n[6]=r=>o.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("div",Ee,[T(g,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[7]||(n[7]=r=>o.toCoinAmount=r),"input-value":o.toCoinAmount,"coin-name":o.toCoin?o.toCoin.symbol:"",balance:o.toCoin?o.toCoin.balance:null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:n[8]||(n[8]=r=>o.maxBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=r=>o.toCoinAmount=r),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1}),onOnSelect:n[11]||(n[11]=r=>o.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("img",{class:fo(o.change?"gang animationex":"gang"),src:Yo,alt:""},null,2),e("div",We,[(u(),c("svg",{class:fo(o.change?"icon animationex":"icon"),"aria-hidden":"true"},Ue,2))])]),o.BtnText!=="Pool not found"?(u(),c("div",ze,[o.fromCoin&&o.toCoin?(u(),c("div",Ge,[Je,e("div",Qe,[o.rateChange?(u(),c("span",He,"1 "+s(o.toCoin.symbol)+" \u2248 "+s(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+s(o.fromCoin.symbol),1)):(u(),c("span",Ze,"1 "+s(o.fromCoin.symbol)+" \u2248 "+s(o.fixD(o.rate,o.toCoin.decimals))+" "+s(o.toCoin.symbol),1)),(u(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:n[12]||(n[12]=r=>o.rateChange=!o.rateChange)},on))])])):b("",!0),o.fromCoinAmount&&o.toCoinAmount?(u(),c("div",en,[nn,e("div",sn,s(o.share)+"%",1)])):b("",!0),o.fromCoinAmount&&o.toCoinAmount?(u(),c("div",tn,[an,e("div",ln,s(o.lpAmountView),1)])):b("",!0)])):b("",!0)]),T(E,{disabled:o.wallet.connected?o.loading||o.swaping||!o.fromCoin||!o.toCoin||!Number(o.fromCoinAmount)||!Number(o.toCoinAmount)||Number(o.fromCoinAmount)>o.fromCoin.balance||Number(o.toCoinAmount)>Number(o.toCoin.balance)||o.swapBtnText=="Pool not found":!1,loading:o.swaping,class:"big-btn",onClick:n[13]||(n[13]=r=>o.wallet.connected?o.isShowAddConfirm=!0:o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[o.wallet.connected?(u(),c("svg",un,dn)):b("",!0),e("span",null,s(o.wallet.connected?o.BtnText:"Connect Wallet"),1)]),_:1},8,["disabled","loading"]),o.currentLpInfo&&Number(o.currentLpInfo.balance)!==0&&o.wallet.connected&&o.BtnText!=="Pool not found"?(u(),c("div",cn,[e("div",mn,[vn,e("div",fn,[e("p",null,s(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+s(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])]),e("div",pn,[e("div",Cn,[e("div",hn,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,yn),e("span",null,s(o.fromCoin.symbol),1)]),e("div",gn,s(o.currentLpInfo.myCoinXAmount),1)]),e("div",bn,[e("div",Sn,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,$n),e("span",null,s(o.toCoin.symbol),1)]),e("div",An,s(o.currentLpInfo.myCoinYAmount),1)])]),e("div",wn,[e("div",Ln,[_n,e("div",kn,s(o.currentLpInfo.myshareOfPool)+" %",1)])])])):b("",!0),o.showCoinSelect?(u(),Y(W,{key:1,"existing-coins":o.existingCoins,"last-select-coin":o.lastSelectCoin,onOnSelect:o.onCoinSelect,onOnClose:n[14]||(n[14]=r=>o.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):b("",!0),o.isShowAddress?(u(),Y(K,{key:2,"from-coins":o.fromCoin,"to-coins":o.toCoin,onOnClose:n[15]||(n[15]=r=>o.isShowAddress=!1)},null,8,["from-coins","to-coins"])):b("",!0),o.isShowSwapSetting?(u(),Y(O,{key:3,onOnClose:n[16]||(n[16]=r=>o.isShowSwapSetting=!1)})):b("",!0),o.isShowAddConfirm?(u(),Y(B,{key:4,"current-lp-info":o.currentLpInfo,"is-increase":!!(o.currentLpInfo&&Number(o.currentLpInfo.balance)!==0),"fixed-from-coin":o.fixedFromCoin,"from-coin":o.fromCoin,"to-coin":o.toCoin,share:o.share,rate:o.rate,"lp-amount":o.lpAmountView,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"current-recived-lp":o.lpAmountView,onOnClose:n[17]||(n[17]=r=>o.isShowAddConfirm=!1),onToAdd:o.toAdd},null,8,["current-lp-info","is-increase","fixed-from-coin","from-coin","to-coin","share","rate","lp-amount","from-coin-amount","to-coin-amount","current-recived-lp","onToAdd"])):b("",!0)])}const Dn=go(Oe,[["render",In],["__scopeId","data-v-a0f875f2"]]);export{Dn as default};
