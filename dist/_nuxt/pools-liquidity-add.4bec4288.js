import{_ as Oo}from"./back.7e8e45b5.js";import{_ as Po}from"./refresh-icon.34ba1198.js";import{_ as Ro}from"./assets-card.f0e5e49b.js";import{_ as Yo}from"./coin-select.640ffcdf.js";import{_ as Vo,a as Do}from"./img-leverage_2x.6007dc2c.js";import{_ as Xo}from"./swap-setting.46664d89.js";import{a as Co,Q as Fo,b as ho,r as a,i as yo,j as bo,k as Mo,l as go,J as jo,o as r,c as O,w as M,p as e,t as n,m as c,q,G as Wo,B as $o,y as ko,z as wo,X as Eo,e as F,Y as Uo,A as zo,Z as Go,$ as H,a0 as Jo,h as Ko,a1 as Qo,a2 as x,a3 as oo,a4 as Zo,a5 as Ho,a6 as vo,a7 as fo,s as po,v as g}from"./entry.f0e6daa7.js";const xo=Co({components:{Modal:Fo},props:{isIncrease:{type:Boolean,required:!1},fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},currentLpInfo:{type:Object,required:!0},share:{type:String,required:!0},rate:{type:String,required:!0},currentRecivedLp:{type:String,required:!0}},emits:["to-add","on-close"],setup(o,s){const T=ho(),y=a(T.slippage||.5),$=a(!0),h=a(!1);function t(b){$.value=b}return{importIcon:yo,fixD:bo,decimalFormat:Mo,direct:$,changeDirect:t,rateChange:h,clickNextBtn:async()=>{s.emit("to-add")},slippage:y}}});const eo=o=>(ko("data-v-510e4d91"),o=o(),wo(),o),oe=eo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ee={class:"add-confirm-container"},ne={class:"card-content"},se={class:"top"},ie={class:"coin"},te=["src"],ae=["src"],le={class:"bottom"},ue={class:"induction"},re={class:"item"},de={class:"induction-text"},ce={class:"induction-value induction-value-change"},me={key:0},ve={key:1},fe=eo(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),pe=[fe],Ce={class:"item"},he={class:"induction-text"},ye={class:"induction-value"},be={class:"item"},ge={class:"induction-text"},$e={key:0,class:"induction-value"},ke={key:1,class:"induction-value"},we={class:"item liquidity-item"},Ae=eo(()=>e("div",{class:"induction-text"},null,-1)),Se={key:0,class:"induction-value"},Le={key:1,class:"induction-value"},Ie={class:"item"},qe={class:"induction-text"},Te={key:0,class:"induction-value"},_e={key:1,class:"induction-value"};function Ne(o,s,T,y,$,h){const t=$o,L=jo("Modal");return r(),O(L,{width:"440px",visible:!0,footer:null,title:o.$t("modal.addLiquidityModalTitle"),class:"add-confirm-modal",onCancel:s[1]||(s[1]=b=>o.$emit("on-close"))},{closeIcon:M(()=>[oe]),default:M(()=>[e("div",ee,[e("div",ne,[e("div",se,[e("div",ie,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,te),e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,ae),e("p",null,n(o.currentRecivedLp)+" LP",1)])]),e("div",le,[e("div",ue,[e("div",re,[e("div",de,n(o.$t("common.rate")),1),e("div",ce,[o.rateChange?(r(),c("span",ve,"1 "+n(o.toCoin.symbol)+" \u2248 "+n(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+n(o.fromCoin.symbol),1)):(r(),c("span",me,"1 "+n(o.fromCoin.symbol)+" \u2248 "+n(o.fixD(o.rate,o.toCoin.decimals))+" "+n(o.toCoin.symbol),1)),(r(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:s[0]||(s[0]=b=>o.rateChange=!o.rateChange)},pe))])]),e("div",Ce,[e("div",he,n(o.$t("modal.slippageTolerance")),1),e("div",ye,n(o.slippage)+"%",1)]),e("div",be,[e("div",ge,n(o.$t("common.liquidityDeposited")),1),o.isIncrease?(r(),c("div",ke,n(o.fixD(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals))+" \u2192 "+n(o.fixD(Number(o.currentLpInfo.myCoinXAmount)+Number(o.fromCoinAmount),o.fromCoin.decimals))+" "+n(o.fromCoin.symbol),1)):(r(),c("div",$e,n(o.fromCoinAmount)+" "+n(o.fromCoin.symbol),1))]),e("div",we,[Ae,o.isIncrease?(r(),c("div",Le,n(o.fixD(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals))+" \u2192 "+n(o.fixD(Number(o.currentLpInfo.myCoinYAmount)+Number(o.toCoinAmount),o.toCoin.decimals))+" "+n(o.toCoin.symbol),1)):(r(),c("div",Se,n(o.toCoinAmount)+" "+n(o.toCoin.symbol),1))]),e("div",Ie,[e("div",qe,n(o.$t("common.shareOfPool")),1),o.isIncrease?(r(),c("div",_e,n(o.currentLpInfo.myshareOfPool)+"% \u2192 "+n(o.share)+"%",1)):(r(),c("div",Te,n(o.share)+"%",1))])])])])]),q(t,{class:"big-btn swap-confirm-btn",onClick:o.clickNextBtn},{default:M(()=>[Wo(n(o.$t("button.confirmSupply")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])}const Be=go(xo,[["render",Ne],["__scopeId","data-v-510e4d91"]]),Oe=Co({setup(o,s){const T=Eo(),y=F(()=>T),$=ho(),h=Uo(),t=F(()=>h);let L=a(!0),b=a(!1),_=a(!1),j=a(!1),W=a(!1),E=a(!1);const N=a("fromCoin"),d=a(""),U=a(""),z=a(!1),G=a(!1),p=a(!0),no=a(!1),J=a(!1),v=a(""),f=a(""),K=a(20),I=a(0),R=a(null),B=zo();Go();const Y=B.currentRoute.value.query.from||Object.values(t.value.lpTokens)[0].coinA,V=B.currentRoute.value.query.to||Object.values(t.value.lpTokens)[0].coinB,l=a(""),u=a("");H(()=>{!vo(t.value.lpTokens)&&!vo(h.tokens)&&!l.value&&!u.value&&(l.value=h.tokens[Y]||Object.values(t.value.lpTokens)[0].coinA,u.value=h.tokens[V]||Object.values(t.value.lpTokens)[0].coinB)});const Q=a(""),{t:k}=Jo(),Ao=F(()=>$.slippage),so=F(()=>fo(l.value.symbol,u.value.symbol,h.lpTokens)?l.value&&Number(v.value)>Number(t.value.tokens[l.value.symbol].balance)?k("button.insufficientBalance",{name:l.value.symbol}):u.value&&Number(f.value)>Number(t.value.tokens[u.value.symbol].balance)?k("button.insufficientBalance",{name:u.value.symbol}):Number(v.value)?k("button.addToPool"):k("button.enterAmount"):k("button.poolNotFound")),So=i=>{var m,C,w,S;N.value=i,i==="fromCoin"?(d.value=((m=u.value)==null?void 0:m.symbol)||"",U.value=((C=l.value)==null?void 0:C.symbol)||""):(d.value=((w=l.value)==null?void 0:w.symbol)||"",U.value=((S=u.value)==null?void 0:S.symbol)||""),z.value=!0},Lo=i=>{v.value="",f.value="",N.value==="fromCoin"?(u.value&&i.symbol.toLowerCase()===(u==null?void 0:u.value.symbol.toLowerCase())&&(u.value=null),l.value=i):(l.value&&i.symbol.toLowerCase()===(l==null?void 0:l.value.symbol.toLowerCase())&&(l.value=null),u.value=i),z.value=!1},Io=i=>{i==="fromCoin"?(p.value=!0,v.value=l.value&&l.value.balance):(p.value=!1,f.value=u.value&&u.value.balance)};Ko(async()=>{const i=B.currentRoute.value.query.from,m=B.currentRoute.value.query.to;Q.value=await A.getPrice({coinX:t.value.tokens[i],coinY:t.value.tokens[m]}),to()});const io=async()=>{I.value=0,_.value=!0,setTimeout(()=>{_.value=!1},1e3),y.value.address&&h.setMyLplist(y.value.address),Q.value=await A.getPrice({coinX:t.value.tokens[Y],coinY:t.value.tokens[V]})},qo=()=>{const i=l.value;l.value=u.value,u.value=i,b.value=!0,setTimeout(()=>{b.value=!1},300)},to=()=>{R.value=setInterval(()=>{no.value||I.value<K.value&&(I.value+=1,I.value===K.value&&(I.value=0,R.value=null,window.clearInterval(R.value),Z(p.value?v.value:f.value)))},1e3)},To=async()=>{G.value=!0},A=Qo();x(p,oo((i,m)=>{p.value=i},800)),x(v,oo((i,m)=>{i&&p.value&&Z(i),i==""&&p.value&&(f.value="")},500)),x(f,oo((i,m)=>{i&&!p.value&&Z(i),i==""&&!p.value&&(v.value="")},500));const ao=a(""),lo=a(""),Z=async i=>{const m=a({});if(i!==""&&so.value!==k("common.poolNotFound")){if(p.value?m.value={coinX:t.value.tokens[l.value.symbol],coinY:t.value.tokens[u.value.symbol],amount:i}:m.value={coinX:t.value.tokens[u.value.symbol],coinY:t.value.tokens[l.value.symbol],amount:i},m.value)try{const C=await A.getLiquidityAndCoinYByCoinX(m.value);p.value?f.value=C.coinYAmount:v.value=C.coinYAmount,ao.value=C.lpAmountView;const w=await A.getShareOfPool({coinX:t.value.tokens[Y],coinY:t.value.tokens[V],currentLpVal:C.lpAmount});lo.value=w}catch{}}else p.value?f.value="":v.value=""},uo=a({});H(async()=>{y.value.address&&h.setMyLplist(y.value.address)}),H(()=>{if(l.value&&u.value&&t.value.myLplist&&t.value.myLplist.length>0&&y.value.address){const i=t.value.myLplist;let m;if(l.value.symbol&&u.value.symbol&&(m=fo(l.value.symbol,u.value.symbol,h.lpTokens)),m){const C=i.filter(w=>w.symbol===m.symbol)[0];uo.value=C}}});const{setIsShowSuccess:_o,setIsShowRejected:ro,setIsShowWaiting:D,setTransactionDesc:No,setTransactionTxid:co}=$;return{addCommom:Zo,share:lo,prettyAmount:Ho,fixD:bo,currentLpInfo:uo,lpAmountView:ao,coinfrom:Y,cointo:V,router:B,wallet:y,hasLiquidity:L,importIcon:yo,clickExchange:qo,clickRefresh:io,refresh:_,change:b,isShowAddress:j,isShowSwapSetting:W,fromCoin:l,toCoin:u,slippage:Ao,openCoinSelect:So,onCoinSelect:Lo,existingCoins:d,lastSelectCoin:U,currentCoinKey:N,showCoinSelect:z,fromCoinAmount:v,toCoinAmount:f,maxBtnSelect:Io,fixedFromCoin:p,BtnText:so,clickBtn:To,loading:no,swaping:J,autoRefreshTime:K,countdown:I,setMarketTimer:to,marketTimer:R,rateChange:E,isShowAddConfirm:G,rate:Q,toAdd:async()=>{var i,m,C,w;G.value=!1,co(""),No(k("tips.addLiquiditySuccessText",{from:`${v.value} ${(i=l.value)==null?void 0:i.symbol}`,to:`${f.value} ${(m=u.value)==null?void 0:m.symbol}`})),D(!0);try{const S=a({});p.value?S.value={coinX:t.value.tokens[l.value.symbol],coinY:t.value.tokens[u.value.symbol],coinXAmount:v.value,coinYAmount:f.value,slippage:Number($.slippage)/100}:S.value={coinX:t.value.tokens[u.value.symbol],coinY:t.value.tokens[l.value.symbol],coinXAmount:f.value,coinYAmount:v.value,slippage:Number($.slippage)/100};const Bo=await A.createAddLiquidityTransactionPayload(S.value),X=await y.value.currentWallet.signAndSubmitTransaction(Bo);if(X&&X.hash){co(X.hash),D(!1),_o(!0);const mo={title:k("common.addLiquidity"),desc:k("tips.increaseLiquiditySuccess",{from:`${v.value} ${(C=l.value)==null?void 0:C.symbol}`,to:`${f.value} ${(w=u.value)==null?void 0:w.symbol}`}),hash:X.hash};A.showTransitionPending(mo),await A.watchTransaction(mo)&&setTimeout(()=>{io()},1e3)}else D(!1),ro(!0);J.value=!1,f.value="",v.value=""}catch{J.value=!1,D(!1),ro(!0),f.value="",v.value=""}}}}});const P=o=>(ko("data-v-68aff014"),o=o(),wo(),o),Pe={class:"linquidity-add-container"},Re={class:"title"},Ye={class:"left"},Ve={class:"right title-right"},De=P(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Xe=P(()=>e("use",{"xlink:href":"#icon-icon-information"},null,-1)),Fe=[Xe],Me={class:"swap-card"},je={class:"card-container"},We={class:"card-item"},Ee={class:"card-item"},Ue={class:"exchange"},ze=P(()=>e("use",{"xlink:href":"#icon-icon-add1"},null,-1)),Ge=[ze],Je={key:0,class:"induction"},Ke={key:0,class:"item"},Qe={class:"induction-text"},Ze={class:"induction-value induction-value-change"},He={key:0},xe={key:1},on=P(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),en=[on],nn={key:1,class:"item"},sn={class:"induction-text"},tn={class:"induction-value"},an={key:2,class:"item"},ln={class:"induction-text"},un={class:"induction-value"},rn={key:0,class:"icon","aria-hidden":"true"},dn=P(()=>e("use",{"xlink:href":"#icon-icon-add"},null,-1)),cn=[dn],mn={key:0,class:"showMyLiquidity"},vn={class:"myLiquidity"},fn={class:"left"},pn={class:"right"},Cn={class:"liquidityAsset"},hn={class:"item"},yn={class:"left"},bn=["src"],gn={class:"right"},$n={class:"item"},kn={class:"left"},wn=["src"],An={class:"right"},Sn={class:"induction induction-liquidity"},Ln={class:"item"},In={class:"induction-text"},qn={class:"induction-value"};function Tn(o,s,T,y,$,h){const t=Oo,L=Po,b=Ro,_=$o,j=Yo,W=Do,E=Xo,N=Be;return r(),c("div",Pe,[q(t),e("div",Re,[e("div",Ye,n(o.$t("common.addLiquidity")),1),e("div",Ve,[e("div",{class:"slippage-icon",onClick:s[0]||(s[0]=d=>o.isShowSwapSetting=!0)},[De,e("span",null,n(o.slippage)+"%",1)]),(r(),c("svg",{class:"icon information-icon","aria-hidden":"true",onClick:s[1]||(s[1]=d=>o.isShowAddress=!0)},Fe)),q(L,{loading:o.refresh,"auto-refresh-time":o.autoRefreshTime,countdown:o.countdown,onClickRefresh:o.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),e("div",Me,[e("div",je,[e("div",We,[q(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[2]||(s[2]=d=>o.fromCoinAmount=d),"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.fromCoin?o.fromCoin.balance:null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:s[3]||(s[3]=d=>o.maxBtnSelect("fromCoin")),onOnInput:s[4]||(s[4]=d=>o.fromCoinAmount=d),onOnFocus:s[5]||(s[5]=()=>{o.fixedFromCoin=!0}),onOnSelect:s[6]||(s[6]=d=>o.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("div",Ee,[q(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[7]||(s[7]=d=>o.toCoinAmount=d),"input-value":o.toCoinAmount,"coin-name":o.toCoin?o.toCoin.symbol:"",balance:o.toCoin?o.toCoin.balance:null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:s[8]||(s[8]=d=>o.maxBtnSelect("toCoin")),onOnInput:s[9]||(s[9]=d=>o.toCoinAmount=d),onOnFocus:s[10]||(s[10]=()=>{o.fixedFromCoin=!1}),onOnSelect:s[11]||(s[11]=d=>o.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("img",{class:po(o.change?"gang animationex":"gang"),src:Vo,alt:""},null,2),e("div",Ue,[(r(),c("svg",{class:po(o.change?"icon animationex":"icon"),"aria-hidden":"true"},Ge,2))])]),o.BtnText!=="Pool not found"?(r(),c("div",Je,[o.fromCoin&&o.toCoin?(r(),c("div",Ke,[e("div",Qe,n(o.$t("common.rate")),1),e("div",Ze,[o.rateChange?(r(),c("span",xe,"1 "+n(o.toCoin.symbol)+" \u2248 "+n(o.fixD(1/o.rate,o.fromCoin.decimals))+" "+n(o.fromCoin.symbol),1)):(r(),c("span",He,"1 "+n(o.fromCoin.symbol)+" \u2248 "+n(o.fixD(o.rate,o.toCoin.decimals))+" "+n(o.toCoin.symbol),1)),(r(),c("svg",{class:"icon-change","aria-hidden":"true",onClick:s[12]||(s[12]=d=>o.rateChange=!o.rateChange)},en))])])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(r(),c("div",nn,[e("div",sn,n(o.$t("common.shareOfPool")),1),e("div",tn,n(o.share)+"%",1)])):g("",!0),o.fromCoinAmount&&o.toCoinAmount?(r(),c("div",an,[e("div",ln,n(o.$t("common.lPTokensReceived")),1),e("div",un,n(o.lpAmountView),1)])):g("",!0)])):g("",!0)]),q(_,{disabled:o.wallet.connected?o.loading||o.swaping||!o.fromCoin||!o.toCoin||!Number(o.fromCoinAmount)||!Number(o.toCoinAmount)||Number(o.fromCoinAmount)>o.fromCoin.balance||Number(o.toCoinAmount)>Number(o.toCoin.balance)||o.swapBtnText==o.$t("button.poolNotFound"):!1,loading:o.swaping,class:"big-btn",onClick:s[13]||(s[13]=d=>o.wallet.connected?o.isShowAddConfirm=!0:o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[o.wallet.connected?(r(),c("svg",rn,cn)):g("",!0),e("span",null,n(o.wallet.connected?o.BtnText:o.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),o.currentLpInfo&&o.currentLpInfo.myLpBalance&&Number(o.currentLpInfo.balance)!==0&&o.wallet.connected&&o.BtnText!==o.$t("button.poolNotFound")?(r(),c("div",mn,[e("div",vn,[e("div",fn,n(o.$t("common.yourLiquidity")),1),e("div",pn,[e("p",null,n(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+n(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])]),e("div",Cn,[e("div",hn,[e("div",yn,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,bn),e("span",null,n(o.fromCoin.symbol),1)]),e("div",gn,n(o.currentLpInfo.myCoinXAmount),1)]),e("div",$n,[e("div",kn,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,wn),e("span",null,n(o.toCoin.symbol),1)]),e("div",An,n(o.currentLpInfo.myCoinYAmount),1)])]),e("div",Sn,[e("div",Ln,[e("div",In,n(o.$t("common.shareOfPool")),1),e("div",qn,n(o.currentLpInfo.myshareOfPool)+" %",1)])])])):g("",!0),o.showCoinSelect?(r(),O(j,{key:1,"existing-coins":o.existingCoins,"last-select-coin":o.lastSelectCoin,onOnSelect:o.onCoinSelect,onOnClose:s[14]||(s[14]=d=>o.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):g("",!0),o.isShowAddress?(r(),O(W,{key:2,"from-coins":o.fromCoin,"to-coins":o.toCoin,onOnClose:s[15]||(s[15]=d=>o.isShowAddress=!1)},null,8,["from-coins","to-coins"])):g("",!0),o.isShowSwapSetting?(r(),O(E,{key:3,onOnClose:s[16]||(s[16]=d=>o.isShowSwapSetting=!1)})):g("",!0),o.isShowAddConfirm?(r(),O(N,{key:4,"current-lp-info":o.currentLpInfo,"is-increase":!!(o.currentLpInfo&&Number(o.currentLpInfo.balance)!==0),"fixed-from-coin":o.fixedFromCoin,"from-coin":o.fromCoin,"to-coin":o.toCoin,share:o.share,rate:o.rate,"lp-amount":o.lpAmountView,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"current-recived-lp":o.lpAmountView,onOnClose:s[17]||(s[17]=d=>o.isShowAddConfirm=!1),onToAdd:o.toAdd},null,8,["current-lp-info","is-increase","fixed-from-coin","from-coin","to-coin","share","rate","lp-amount","from-coin-amount","to-coin-amount","current-recived-lp","onToAdd"])):g("",!0)])}const Xn=go(Oe,[["render",Tn],["__scopeId","data-v-68aff014"]]);export{Xn as default};
