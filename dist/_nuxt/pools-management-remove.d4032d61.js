import{_ as Ie}from"./back.af48aeb4.js";import{_ as qe}from"./assets-card.3c0ac0db.js";import{_ as Te}from"./network-tips.f9ef5298.js";import{_ as Be}from"./swap-setting.024d11ea.js";import{a as se,Q as Re,b as ae,a3 as le,a4 as re,Z as ue,e as T,$ as de,r as l,i as ce,j as me,k as B,l as ve,J as Ve,o as a,c as _,w as j,p as o,t as i,G as D,m as r,q as w,B as pe,y as fe,z as he,aa as Me,ab as Ne,A as Oe,a1 as De,a2 as O,a5 as Fe,a6 as Pe,a7 as Ye,Y as Z,a9 as ie,a8 as H,s as te,L as We,M as Xe,v as q,I as je,ac as Ue,S as Ee}from"./entry.28b215db.js";/* empty css              */const ze=se({components:{Modal:Re},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(e,n){const h=ae();le(),re();const F=ue();T(()=>F),de();const R=l(h.slippage||.5),p=l(!0),A=l(!1);function u(f){p.value=f}return{slippage:R,importIcon:ce,fixD:me,decimalFormat:B,direct:p,changeDirect:u,rateChange:A,clickNextBtn:async()=>{n.emit("to-remove")}}}});const K=e=>(fe("data-v-58e80898"),e=e(),he(),e),Ge=K(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Je={class:"remove-confirm-container"},Qe={class:"card-content"},Ze={class:"top"},He={class:"coin"},Ke=["src"],xe=K(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-add1"})])],-1)),eo={class:"coin"},oo=["src"],no={class:"bottom"},io={class:"desc"},to={class:"induction"},so={class:"item"},ao={class:"induction-text"},lo={class:"induction-value induction-value-change"},ro={key:0},uo={key:1},co=K(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),mo=[co],vo={class:"item"},po={class:"induction-text"},fo={class:"induction-value"};function ho(e,n,h,F,R,p){const A=pe,u=Ve("Modal");return a(),_(u,{width:"440px",visible:!0,footer:null,title:e.$t("modal.addLiquidityModalTitle"),class:"remove-confirm-modal",onCancel:n[1]||(n[1]=m=>e.$emit("on-close"))},{closeIcon:j(()=>[Ge]),default:j(()=>[o("div",Je,[o("div",Qe,[o("div",Ze,[o("div",He,[o("img",{src:e.fromCoin.icon||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,Ke),o("p",null,i(e.fromCoinAmount),1),D(" \xA0\xA0 "),o("p",null,i(e.fromCoin.symbol),1)]),xe,o("div",eo,[o("img",{src:e.toCoin.icon||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,oo),o("p",null,i(e.toCoinAmount),1),D(" \xA0\xA0 "),o("p",null,i(e.toCoin.symbol),1)])]),o("div",no,[o("div",io,i(e.$t("modal.removeLiquidityText",{slippage:e.slippage+"%"})),1),o("div",to,[o("div",so,[o("div",ao,i(e.$t("common.rate")),1),o("div",lo,[e.rateChange?(a(),r("span",uo,"1 "+i(e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin.symbol),1)):(a(),r("span",ro,"1 "+i(e.fromCoin.symbol)+" \u2248 "+i(e.fixD(e.currentLpInfo.price,2))+" "+i(e.toCoin.symbol),1)),(a(),r("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=m=>e.rateChange=!e.rateChange)},mo))])]),o("div",vo,[o("div",po,i(e.fromCoin.symbol)+" - "+i(e.toCoin.symbol)+" "+i(e.$t("modal.removeLiquidityLpBurned")),1),o("div",fo,i(e.burnValue),1)])])])])]),w(A,{class:"big-btn swap-confirm-btn",loading:e.loading,onClick:e.clickNextBtn},{default:j(()=>[D(i(e.$t("button.confirmRemove")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])}const yo=ve(ze,[["render",ho],["__scopeId","data-v-58e80898"]]),Co=se({setup(e,n){const{t:h,locale:F}=le(),R=Me(Ne,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),p=Oe(),A=ue(),u=T(()=>A),m=de(),f=T(()=>m);let I=l(!1),P=l(!1),E=l(!1),V=l(!1);const M=l(!1),t=l(!0),z=l(!0),y=l(""),S=l(""),L=l("50"),ye=l({});l({}),De(()=>{H(f.value.lpTokens)||(ye.value=f.value.lpTokens)});const x=ae(),N=T(()=>x),Ce=T(()=>N.value.slippage),g=l(),b=l(),d=l({}),G=l(""),ee=l(""),ge=T(()=>Number(y.value)?h("button.remove"):h("button.enterAmount"));O(()=>[N.value.chainName,f.value.lpTokens],([s,c])=>{s&&!H(c)&&(g.value=m.tokens[p.currentRoute.value.query.from],b.value=m.tokens[p.currentRoute.value.query.to])},{immediate:!0});const be=()=>{M.value=!0,setTimeout(()=>{M.value=!1},1e3),u.value.address&&m.setMyLplist(u.value.address)},$e=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:h("button.max"),value:100}],ke=()=>{const s=g.value;g.value=b.value,b.value=s,V.value=!0,setTimeout(()=>{V.value=!1},300)},Se=s=>{s==="fromCoin"?(t.value=!0,y.value=g.value&&B(g.value.balance,d.value.coinA.value.decimals)||""):(t.value=!1,S.value=b.value&&B(b.value.balance,d.value.coinB.value.decimals)||"")},Y=re();O(L,Fe((s,c)=>{if(L.value=s,s==0)y.value="0",S.value="0";else if(s>100&&(L.value="100"),s!==c){const C=Number(L.value)/100;L.value==="100"?J(d.value.balanceOrigin):J(Z(d.value.balanceOrigin).mul(C).toString())}},500)),O(d,()=>{d.value&&J(Z(d.value.balanceOrigin).mul(Number(L.value)/100).toString())});const J=async s=>{if(!g.value||!b.value)return;const c=ie(g.value.symbol,b.value.symbol,m.lpTokens);if(G.value=s,ee.value=B(Z(s).div(Math.pow(10,c.decimals)).toString(),c.decimals)||"",s!==""&&s!==0&&s!=="0"){let C={coinX:c.coinA,coinY:c.coinB,liquidity:s};if(C)try{const $=await Y.getCoinXYForLiquidity(C);y.value=B($.coinXAmount,d.value.coinA.decimals)||"",S.value=B($.coinYAmount,d.value.coinB.decimals)||""}catch{}}else S.value="",y.value=""},W=l(!1),{setIsShowSuccess:Le,setIsShowRejected:oe,setIsShowWaiting:X,setTransactionDesc:_e,setTransactionTxid:ne}=x,we=async()=>{var s,c;P.value=!1,W.value=!0,ne(""),_e(h("tips.removeLiquidiyText",{from:`${y.value} ${d.value.coinA.symbol}`,to:`${S.value} ${d.value.coinB.symbol}`})),X(!0);try{const C=l({});C.value={coinX:d.value.coinA,coinY:d.value.coinB,liquidity:parseInt(G.value),slippage:Number(N.value.slippage)/100};const $=await Y.removeLiquidityTransactionPayload(C.value);let k;if(N.value.chainName==="Sui"){const v=await u.value.currentWallet.signAndExecuteTransaction($);v&&v.certificate&&v.certificate.transactionDigest&&(k={hash:v.certificate.transactionDigest})}else k=await u.value.currentWallet.signAndSubmitTransaction($);if(k&&k.hash){ne(k.hash),X(!1),Le(!0);const v={title:h("common.removeLiquidity"),desc:h("tips.removeSuccessText",{from:`${y.value} ${d.value.coinA.symbol}`,to:`${S.value} ${d.value.coinB.symbol}`}),hash:k.hash,descTransactions:`Remove ${y.value} ${(s=g.value)==null?void 0:s.symbol} and ${S.value} ${(c=b.value)==null?void 0:c.symbol} 
             from the pool`,sender:u.value.address,chainName:N.value.chainName};Y.showTransitionPending(v),await Y.watchTransaction(v)&&(setTimeout(()=>{m.setMyLplist(u.value.address)},3e3),setTimeout(()=>{m.setMyLplist(u.value.address)},6e3),Number(L.value)==100&&p.push("/pools"))}else X(!1),oe(!0);W.value=!1}catch{W.value=!1,X(!1),oe(!0)}};return O(()=>[u.value.address,f.value.lpTokens],([s,c])=>{H(c)||m.setMyLplist(s)},{immediate:!0}),O(()=>[f.value.myLplist,u.value.address],([s,c])=>{if(s&&u.value.address){const C=s,$=p.currentRoute.value.query.from,k=p.currentRoute.value.query.to;let v;if($&&k&&(v=ie($,k,s)),v){if(!v.balance||!Number(v.balance)){p.push("/pools");return}const Q=C.filter(Ae=>Ae.symbol===v.symbol)[0];Q&&(d.value=Q)}}},{immediate:!0}),{loading:W,indicator:R,addCommom:Pe,fixD:me,prettyAmount:Ye,liquidity:f,clickExchange:ke,change:V,fixedFromCoin:t,router:p,wallet:u,refresh:M,amountArr:$e,sliderVal:L,slippage:Ce,importIcon:ce,clickRefresh:be,isShowSwapSetting:I,fromCoin:g,toCoin:b,maxBtnSelect:Se,fromCoinAmount:y,toCoinAmount:S,direct:z,rateChange:E,isShowRemoveModal:P,btnText:ge,currentLpInfo:d,selectLp:G,selectLpView:ee,toRemove:we}}});const U=e=>(fe("data-v-1eaff802"),e=e(),he(),e),go={class:"management-remove-liquidity"},bo={class:"remove-liquidity-top"},$o={class:"remove-title"},ko={class:"right title-right"},So=U(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Lo=U(()=>o("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),_o=[Lo],wo={class:"remove-liquidity-center"},Ao={class:"bottom"},Io={class:"add-amount"},qo={class:"add-amount-header"},To={class:"amount-list"},Bo=["onClick"],Ro={class:"slider-box"},Vo={class:"card-container"},Mo={class:"card-item"},No={class:"card-item"},Oo={class:"induction remove-liquidity-bottom"},Do={class:"item"},Fo={class:"induction-text"},Po={key:0},Yo={key:0},Wo={key:1},Xo=U(()=>o("svg",{class:"icon-change","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),jo={key:0,"aria-hidden":"true"},Uo=U(()=>o("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),Eo=[Uo],zo={key:0,class:"showMyLiquidity"},Go={class:"myLiquidity"},Jo={class:"left"},Qo={key:0,class:"right"},Zo={class:"liquidityAsset"},Ho={class:"item"},Ko={key:0,class:"left"},xo=["src"],en={key:1,class:"right"},on={class:"item"},nn={key:0,class:"left"},tn=["src"],sn={key:1,class:"right"},an={class:"induction induction-liquidity"},ln={class:"item"},rn={class:"induction-text"},un={key:0,class:"induction-value"};function dn(e,n,h,F,R,p){const A=Ie,u=je,m=Ue,f=qe,I=Ee,P=pe,E=Te,V=Be,M=yo;return a(),r("div",go,[w(A),o("div",bo,[o("div",$o,i(e.$t("common.removeLiquidity")),1),o("div",ko,[o("div",{class:"slippage-icon",onClick:n[0]||(n[0]=t=>e.isShowSwapSetting=!0)},[So,o("span",null,i(e.slippage)+"%",1)]),(a(),r("svg",{"aria-hidden":"true",class:te(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:n[1]||(n[1]=(...t)=>e.clickRefresh&&e.clickRefresh(...t))},_o,2))])]),o("div",wo,[o("div",Ao,[o("div",Io,[o("div",qo,[o("span",null,i(e.$t("common.amount")),1),o("div",To,[(a(!0),r(We,null,Xe(e.amountArr,(t,z)=>(a(),r("div",{key:z,class:te(["amount-item",e.sliderVal==t.value?"amount-item-active":""]),onClick:y=>e.sliderVal=t.value},i(t.name),11,Bo))),128))])]),o("div",Ro,[w(u,{value:e.sliderVal,"onUpdate:value":n[2]||(n[2]=t=>e.sliderVal=t),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),w(m,{value:e.sliderVal,"onUpdate:value":n[3]||(n[3]=t=>e.sliderVal=t)},null,8,["value"])])])])]),o("div",Vo,[o("div",Mo,[w(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=t=>e.fromCoinAmount=t),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":e.fromCoinAmount,"coin-name":e.fromCoin?e.fromCoin.symbol:null,"remove-balance":e.currentLpInfo.myCoinXAmount||null,"coin-icon":e.fromCoin?e.fromCoin.icon:"","is-remove":!0,"swap-direction":"From",onOnMax:n[5]||(n[5]=t=>e.maxBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=t=>e.fromCoinAmount=t),onOnFocus:n[7]||(n[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])]),o("div",No,[w(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=t=>e.toCoinAmount=t),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":e.toCoinAmount,"coin-name":e.fromCoin?e.toCoin.symbol:"","remove-balance":e.currentLpInfo.myCoinYAmount||null,"swap-direction":"To","is-remove":!0,"coin-icon":e.toCoin?e.toCoin.icon:"",onOnMax:n[9]||(n[9]=t=>e.maxBtnSelect("toCoin")),onOnInput:n[10]||(n[10]=t=>e.toCoinAmount=t),onOnFocus:n[11]||(n[11]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])])]),o("div",Oo,[o("div",Do,[o("div",Fo,i(e.$t("common.rate")),1),o("div",{class:"induction-value induction-value-change",onClick:n[12]||(n[12]=t=>e.rateChange=!e.rateChange)},[e.rateChange?(a(),r("span",Wo,"1 "+i(e.toCoin&&e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin&&e.fromCoin.symbol),1)):(a(),r("span",Po,[D(" 1 "+i(e.fromCoin&&e.fromCoin.symbol)+" \u2248 ",1),e.currentLpInfo.price?(a(),r("span",Yo,i(e.fixD(e.currentLpInfo.price,2)),1)):(a(),_(I,{key:1,indicator:e.indicator},null,8,["indicator"])),D(" "+i(e.toCoin&&e.toCoin.symbol),1)])),Xo])])]),w(P,{disabled:e.wallet.connected?e.sliderVal==0||!e.fromCoinAmount||!e.toCoinAmount||e.loading:!1,class:"remove-btn big-btn",onClick:n[13]||(n[13]=t=>e.wallet.connected?e.isShowRemoveModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:j(()=>[e.wallet.connected?(a(),r("svg",jo,Eo)):q("",!0),o("span",null,i(e.wallet.connected?e.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),w(E),e.wallet.connected?(a(),r("div",zo,[o("div",Go,[o("div",Jo,i(e.$t("common.yourLiquidity")),1),e.currentLpInfo.myLpBalance?(a(),r("div",Qo,[o("p",null,i(e.currentLpInfo.myLpBalance)+" LP",1),o("span",null,"\u2248 $"+i(e.addCommom(e.currentLpInfo.myBalanceUSD,2)),1)])):(a(),_(I,{key:1,indicator:e.indicator},null,8,["indicator"]))]),o("div",Zo,[o("div",Ho,[e.fromCoin?(a(),r("div",Ko,[o("img",{src:e.fromCoin.icon||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,xo),o("span",null,i(e.fromCoin.symbol),1)])):q("",!0),e.currentLpInfo.myCoinXAmount?(a(),r("div",en,i(e.currentLpInfo.myCoinXAmount),1)):(a(),_(I,{key:2,indicator:e.indicator},null,8,["indicator"]))]),o("div",on,[e.toCoin?(a(),r("div",nn,[o("img",{src:e.toCoin.icon||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,tn),o("span",null,i(e.toCoin.symbol),1)])):q("",!0),e.currentLpInfo.myCoinYAmount?(a(),r("div",sn,i(e.currentLpInfo.myCoinYAmount),1)):(a(),_(I,{key:2,indicator:e.indicator},null,8,["indicator"]))])]),o("div",an,[o("div",ln,[o("div",rn,i(e.$t("common.shareOfPool")),1),e.currentLpInfo.myshareOfPool?(a(),r("div",un,i(e.currentLpInfo.myshareOfPool)+" %",1)):(a(),_(I,{key:1,indicator:e.indicator},null,8,["indicator"]))])])])):q("",!0),e.isShowSwapSetting?(a(),_(V,{key:1,onOnClose:n[14]||(n[14]=t=>e.isShowSwapSetting=!1)})):q("",!0),e.isShowRemoveModal?(a(),_(M,{key:2,"liquidity-balance":e.selectLp,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.currentLpInfo.coinA,"to-coin":e.currentLpInfo.coinB,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"burn-value":e.selectLpView,"current-lp-info":e.currentLpInfo,loading:e.loading,onOnClose:n[15]||(n[15]=t=>e.isShowRemoveModal=!1),onToRemove:e.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","loading","onToRemove"])):q("",!0)])}const yn=ve(Co,[["render",dn],["__scopeId","data-v-1eaff802"]]);export{yn as default};
