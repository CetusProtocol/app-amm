import{_ as Io}from"./back.7e8e45b5.js";import{_ as qo}from"./assets-card.f0e5e49b.js";import{_ as Bo}from"./swap-setting.46664d89.js";import{a as io,Q as To,b as so,a0 as ao,a1 as lo,X as ro,e as R,Y as uo,r as a,i as co,j as mo,k as I,l as vo,J as Ro,o as s,c as $,w as Y,p as e,t,G as M,m as u,q as w,B as po,y as fo,z as yo,a8 as Mo,a9 as Vo,A as Oo,$ as P,a2 as oo,a3 as No,a4 as Do,a5 as Fo,aa as J,a7 as eo,a6 as no,s as to,L as Po,M as Xo,v as X,I as Yo,ab as Uo,S as jo}from"./entry.f0e6daa7.js";/* empty css              */const Wo=io({components:{Modal:To},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(o,n){const y=so();ao(),lo();const V=ro();R(()=>V),uo();const q=a(y.slippage||.5),v=a(!0),L=a(!1);function d(c){v.value=c}return{slippage:q,importIcon:co,fixD:mo,decimalFormat:I,direct:v,changeDirect:d,rateChange:L,clickNextBtn:async()=>{n.emit("to-remove")}}}});const Q=o=>(fo("data-v-6a44f549"),o=o(),yo(),o),zo=Q(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Eo={class:"remove-confirm-container"},Go={class:"card-content"},Jo={class:"top"},Qo={class:"coin"},Ho=["src"],Ko=Q(()=>e("div",{class:"svg-box"},[e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-add1"})])],-1)),Zo={class:"coin"},xo=["src"],oe={class:"bottom"},ee={class:"desc"},ne={class:"induction"},te={class:"item"},ie={class:"induction-text"},se={class:"induction-value induction-value-change"},ae={key:0},le={key:1},re=Q(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ue=[re],de={class:"item"},ce={class:"induction-text"},me={class:"induction-value"};function ve(o,n,y,V,q,v){const L=po,d=Ro("Modal");return s(),$(d,{width:"440px",visible:!0,footer:null,title:o.$t("modal.addLiquidityModalTitle"),class:"remove-confirm-modal",onCancel:n[1]||(n[1]=f=>o.$emit("on-close"))},{closeIcon:Y(()=>[zo]),default:Y(()=>[e("div",Eo,[e("div",Go,[e("div",Jo,[e("div",Qo,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,Ho),e("p",null,t(o.fromCoinAmount),1),M(" \xA0\xA0 "),e("p",null,t(o.fromCoin.symbol),1)]),Ko,e("div",Zo,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,xo),e("p",null,t(o.toCoinAmount),1),M(" \xA0\xA0 "),e("p",null,t(o.toCoin.symbol),1)])]),e("div",oe,[e("div",ee,t(o.$t("modal.removeLiquidityText",{slippage:o.slippage})),1),e("div",ne,[e("div",te,[e("div",ie,t(o.$t("common.rate")),1),e("div",se,[o.rateChange?(s(),u("span",le,"1 "+t(o.toCoin.symbol)+" \u2248 "+t(o.fixD(1/o.currentLpInfo.price,2))+" "+t(o.fromCoin.symbol),1)):(s(),u("span",ae,"1 "+t(o.fromCoin.symbol)+" \u2248 "+t(o.fixD(o.currentLpInfo.price,2))+" "+t(o.toCoin.symbol),1)),(s(),u("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=f=>o.rateChange=!o.rateChange)},ue))])]),e("div",de,[e("div",ce,t(o.fromCoin.symbol)+" - "+t(o.toCoin.symbol)+" "+t(o.$t("modal.removeLiquidityLpBurned")),1),e("div",me,t(o.burnValue),1)])])])])]),w(L,{class:"big-btn swap-confirm-btn",loading:o.loading,onClick:o.clickNextBtn},{default:Y(()=>[M(t(o.$t("button.confirmRemove")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])}const pe=vo(Wo,[["render",ve],["__scopeId","data-v-6a44f549"]]),fe=io({setup(o,n){const{t:y,locale:V}=ao(),q=Mo(Vo,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),v=Oo(),L=ro(),d=R(()=>L),f=uo(),c=R(()=>f);let S=a(!1),O=a(!1),j=a(!1),B=a(!1);const i=a(!1),T=a(!0),H=a(!0),k=a(""),A=a(""),_=a("50"),ho=a({}),h=a({});P(()=>{no(c.value.lpTokens)||(ho.value=c.value.lpTokens)});const W=so(),Co=R(()=>W.slippage),g=a(),b=a();P(()=>{no(c.value.tokens)||(h.value=c.value.tokens,g.value=h.value[v.currentRoute.value.query.from]||h.value.USDC,b.value=h.value[v.currentRoute.value.query.to]||h.value.USDT)});const r=a({}),z=a(""),K=a(""),go=R(()=>Number(k.value)?y("button.remove"):y("button.enterAmount")),bo=()=>{i.value=!0,setTimeout(()=>{i.value=!1},1e3),d.value.address&&f.setMyLplist(d.value.address)},$o=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:y("button.max"),value:100}],Lo=()=>{const l=g.value;g.value=b.value,b.value=l,B.value=!0,setTimeout(()=>{B.value=!1},300)},So=l=>{l==="fromCoin"?(T.value=!0,k.value=g.value&&I(g.value.balance,r.value.coinA.value.decimals)||""):(T.value=!1,A.value=b.value&&I(b.value.balance,r.value.coinB.value.decimals)||"")},N=lo();oo(_,No((l,C)=>{if(_.value=l,l!==C){const m=Number(_.value)/100;_.value==="100"?E(r.value.balanceOrigin):E(J(r.value.balanceOrigin).mul(m).toString())}},500)),oo(r,()=>{r.value&&E(J(r.value.balanceOrigin).mul(Number(_.value)/100).toString())});const E=async l=>{const C=eo(g.value.symbol,b.value.symbol,f.lpTokens);z.value=l,K.value=I(J(l).div(Math.pow(10,C.decimals)).toString(),C.decimals)||"";const m=a({});if(l!==""&&l!==0&&l!=="0"){if(m.value={coinX:h.value[g.value.symbol],coinY:h.value[b.value.symbol],liquidity:l},m.value)try{const p=await N.getCoinXYForLiquidity(m.value);k.value=I(p.coinXAmount,r.value.coinA.decimals)||"",A.value=I(p.coinYAmount,r.value.coinB.decimals)||""}catch{}}else A.value="",k.value=""},D=a(!1),{setIsShowSuccess:ko,setIsShowRejected:Z,setIsShowWaiting:F,setTransactionDesc:_o,setTransactionTxid:x}=W,wo=async()=>{O.value=!1,D.value=!0,x(""),_o(y("tips.removeLiquidiyText",{from:`${k.value} ${r.value.coinA.symbol}`,to:`${A.value} ${r.value.coinB.symbol}`})),F(!0);try{const l=a({});l.value={coinX:h.value[r.value.coinA.symbol],coinY:h.value[r.value.coinB.symbol],liquidity:parseInt(z.value),slippage:Number(W.slippage)/100};const C=await N.removeLiquidityTransactionPayload(l.value),m=await d.value.currentWallet.signAndSubmitTransaction(C);if(m&&m.hash){x(m.hash),F(!1),ko(!0);const p={title:y("common.removeLiquidity"),desc:y("tips.removeSuccessText",{from:`${k.value} ${r.value.coinA.symbol}`,to:`${A.value} ${r.value.coinB.symbol}`}),hash:m.hash};N.showTransitionPending(p),await N.watchTransaction(p)&&(setTimeout(()=>{f.setMyLplist(d.value.address)},3e3),setTimeout(()=>{f.setMyLplist(d.value.address)},6e3),Number(_.value)==100&&v.push("/pools"))}else F(!1),Z(!0);D.value=!1}catch{D.value=!1,F(!1),Z(!0)}};return P(async()=>{d.value.address&&f.setMyLplist(d.value.address)}),P(()=>{if(c.value.myLplist&&d.value.address){const l=c.value.myLplist,C=v.currentRoute.value.query.from,m=v.currentRoute.value.query.to;let p;if(C&&m&&(p=eo(C,m,c.value.myLplist)),p){if(!p.balance||!Number(p.balance)){v.push("/pools");return}const G=l.filter(Ao=>Ao.symbol===p.symbol)[0];G&&(r.value=G)}}}),{loading:D,indicator:q,addCommom:Do,fixD:mo,prettyAmount:Fo,liquidity:c,clickExchange:Lo,change:B,fixedFromCoin:T,router:v,wallet:d,refresh:i,amountArr:$o,sliderVal:_,slippage:Co,importIcon:co,clickRefresh:bo,isShowSwapSetting:S,fromCoin:g,toCoin:b,maxBtnSelect:So,fromCoinAmount:k,toCoinAmount:A,direct:H,rateChange:j,isShowRemoveModal:O,btnText:go,currentLpInfo:r,selectLp:z,selectLpView:K,toRemove:wo}}});const U=o=>(fo("data-v-92aa8cba"),o=o(),yo(),o),ye={class:"management-remove-liquidity"},he={class:"remove-liquidity-top"},Ce={class:"remove-title"},ge={class:"right title-right"},be=U(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),$e=U(()=>e("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Le=[$e],Se={class:"remove-liquidity-center"},ke={class:"bottom"},_e={class:"add-amount"},we={class:"add-amount-header"},Ae={class:"amount-list"},Ie=["onClick"],qe={class:"slider-box"},Be={class:"card-container"},Te={class:"card-item"},Re={class:"card-item"},Me={class:"induction remove-liquidity-bottom"},Ve={class:"item"},Oe={class:"induction-text"},Ne={key:0},De={key:0},Fe={key:1},Pe=U(()=>e("svg",{class:"icon-change","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),Xe={key:0,"aria-hidden":"true"},Ye=U(()=>e("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),Ue=[Ye],je={key:0,class:"showMyLiquidity"},We={class:"myLiquidity"},ze={class:"left"},Ee={key:0,class:"right"},Ge={class:"liquidityAsset"},Je={class:"item"},Qe={class:"left"},He=["src"],Ke={key:0,class:"right"},Ze={class:"item"},xe={class:"left"},on=["src"],en={key:0,class:"right"},nn={class:"induction induction-liquidity"},tn={class:"item"},sn={class:"induction-text"},an={key:0,class:"induction-value"};function ln(o,n,y,V,q,v){const L=Io,d=Yo,f=Uo,c=qo,S=jo,O=po,j=Bo,B=pe;return s(),u("div",ye,[w(L),e("div",he,[e("div",Ce,t(o.$t("common.removeLiquidity")),1),e("div",ge,[e("div",{class:"slippage-icon",onClick:n[0]||(n[0]=i=>o.isShowSwapSetting=!0)},[be,e("span",null,t(o.slippage)+"%",1)]),(s(),u("svg",{"aria-hidden":"true",class:to(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:n[1]||(n[1]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},Le,2))])]),e("div",Se,[e("div",ke,[e("div",_e,[e("div",we,[e("span",null,t(o.$t("common.amount")),1),e("div",Ae,[(s(!0),u(Po,null,Xo(o.amountArr,(i,T)=>(s(),u("div",{key:T,class:to(["amount-item",o.sliderVal==i.value?"amount-item-active":""]),onClick:H=>o.sliderVal=i.value},t(i.name),11,Ie))),128))])]),e("div",qe,[w(d,{value:o.sliderVal,"onUpdate:value":n[2]||(n[2]=i=>o.sliderVal=i),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),w(f,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=i=>o.sliderVal=i)},null,8,["value"])])])])]),e("div",Be,[e("div",Te,[w(c,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=i=>o.fromCoinAmount=i),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":o.fromCoinAmount,"coin-name":o.fromCoin?o.fromCoin.symbol:null,balance:o.currentLpInfo.myCoinXAmount||null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","swap-direction":"From",onOnMax:n[5]||(n[5]=i=>o.maxBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=i=>o.fromCoinAmount=i),onOnFocus:n[7]||(n[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])]),e("div",Re,[w(c,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=i=>o.toCoinAmount=i),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":o.toCoinAmount,"coin-name":o.fromCoin?o.toCoin.symbol:"",balance:o.currentLpInfo.myCoinYAmount||null,"swap-direction":"To","coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:n[9]||(n[9]=i=>o.maxBtnSelect("toCoin")),onOnInput:n[10]||(n[10]=i=>o.toCoinAmount=i),onOnFocus:n[11]||(n[11]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","balance","coin-icon"])])]),e("div",Me,[e("div",Ve,[e("div",Oe,t(o.$t("common.rate")),1),e("div",{class:"induction-value induction-value-change",onClick:n[12]||(n[12]=i=>o.rateChange=!o.rateChange)},[o.rateChange?(s(),u("span",Fe,"1 "+t(o.toCoin.symbol)+" \u2248 "+t(o.fixD(1/o.currentLpInfo.price,2))+" "+t(o.fromCoin.symbol),1)):(s(),u("span",Ne,[M(" 1 "+t(o.fromCoin.symbol)+" \u2248 ",1),o.currentLpInfo.price?(s(),u("span",De,t(o.fixD(o.currentLpInfo.price,2)),1)):(s(),$(S,{key:1,indicator:o.indicator},null,8,["indicator"])),M(" "+t(o.toCoin.symbol),1)])),Pe])])]),w(O,{disabled:o.wallet.connected?!o.fromCoinAmount||!o.toCoinAmount||o.loading:!1,class:"remove-btn big-btn",onClick:n[13]||(n[13]=i=>o.wallet.connected?o.isShowRemoveModal=!0:o.wallet.setIsShowWalletModal(!0))},{default:Y(()=>[o.wallet.connected?(s(),u("svg",Xe,Ue)):X("",!0),e("span",null,t(o.wallet.connected?o.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),o.wallet.connected?(s(),u("div",je,[e("div",We,[e("div",ze,t(o.$t("common.yourLiquidity")),1),o.currentLpInfo.myLpBalance?(s(),u("div",Ee,[e("p",null,t(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+t(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])):(s(),$(S,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e("div",Ge,[e("div",Je,[e("div",Qe,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,He),e("span",null,t(o.fromCoin.symbol),1)]),o.currentLpInfo.myCoinXAmount?(s(),u("div",Ke,t(o.currentLpInfo.myCoinXAmount),1)):(s(),$(S,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e("div",Ze,[e("div",xe,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,on),e("span",null,t(o.toCoin.symbol),1)]),o.currentLpInfo.myCoinYAmount?(s(),u("div",en,t(o.currentLpInfo.myCoinYAmount),1)):(s(),$(S,{key:1,indicator:o.indicator},null,8,["indicator"]))])]),e("div",nn,[e("div",tn,[e("div",sn,t(o.$t("common.shareOfPool")),1),o.currentLpInfo.myshareOfPool?(s(),u("div",an,t(o.currentLpInfo.myshareOfPool)+" %",1)):(s(),$(S,{key:1,indicator:o.indicator},null,8,["indicator"]))])])])):X("",!0),o.isShowSwapSetting?(s(),$(j,{key:1,onOnClose:n[14]||(n[14]=i=>o.isShowSwapSetting=!1)})):X("",!0),o.isShowRemoveModal?(s(),$(B,{key:2,"liquidity-balance":o.selectLp,"fixed-from-coin":o.fixedFromCoin,"from-coin":o.currentLpInfo.coinA,"to-coin":o.currentLpInfo.coinB,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"burn-value":o.selectLpView,"current-lp-info":o.currentLpInfo,loading:o.loading,onOnClose:n[15]||(n[15]=i=>o.isShowRemoveModal=!1),onToRemove:o.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","loading","onToRemove"])):X("",!0)])}const vn=vo(fe,[["render",ln],["__scopeId","data-v-92aa8cba"]]);export{vn as default};
