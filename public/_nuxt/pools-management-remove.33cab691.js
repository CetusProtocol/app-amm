import{_ as De}from"./back.137217c4.js";import{_ as Pe}from"./assets-card.f6d639b1.js";import{_ as Fe}from"./network-tips.39205f87.js";import{_ as je}from"./swap-setting.7d0120c0.js";import{a as oe,W as ye,b as ne,G as ge,am as be,J as $e,e as q,I as ke,r as l,i as ie,j as Se,k as O,l as se,ab as _e,o as t,c as $,w as B,p as o,t as i,M,m as d,q as w,B as te,y as ae,z as le,ar as We,v as I,H as X,L as Xe,A as Ye,a9 as Ue,a7 as Y,an as Ee,as as He,ao as R,K as ze,ak as x,ap as he,aa as ee,s as Ce,ad as Ge,ae as Je,N as Ke,at as Qe,S as Ze}from"./entry.515624e4.js";/* empty css               *//* empty css              */const xe=oe({components:{Modal:ye},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(e,n){const p=ne();ge(),be();const V=$e();q(()=>V),ke();const N=l(p.slippage||.5),v=l(!0),k=l(!1);function r(C){v.value=C}return{slippage:N,importIcon:ie,fixD:Se,decimalFormat:O,direct:v,changeDirect:r,rateChange:k,clickNextBtn:async()=>{n.emit("to-remove")}}}});const re=e=>(ae("data-v-feca4422"),e=e(),le(),e),eo=re(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),oo={class:"remove-confirm-container"},no={class:"card-content"},io={class:"top"},so={class:"coin"},to=["src"],ao=re(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-add1"})])],-1)),lo={class:"coin"},ro=["src"],uo={class:"bottom"},co={class:"desc"},mo={class:"induction"},vo={class:"item"},po={class:"induction-text"},fo={class:"induction-value induction-value-change"},ho={key:0},Co={key:1},yo=re(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),go=[yo],bo={class:"item"},$o={class:"induction-text"},ko={class:"induction-value"};function So(e,n,p,V,N,v){const k=te,r=_e("Modal");return t(),$(r,{width:"440px",visible:!0,footer:null,title:e.$t("modal.addLiquidityModalTitle"),class:"remove-confirm-modal",onCancel:n[1]||(n[1]=m=>e.$emit("on-close"))},{closeIcon:B(()=>[eo]),default:B(()=>[o("div",oo,[o("div",no,[o("div",io,[o("div",so,[o("img",{src:e.fromCoin.icon||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,to),o("p",null,i(e.fromCoinAmount),1),M(" \xA0\xA0 "),o("p",null,i(e.fromCoin.symbol),1)]),ao,o("div",lo,[o("img",{src:e.toCoin.icon||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,ro),o("p",null,i(e.toCoinAmount),1),M(" \xA0\xA0 "),o("p",null,i(e.toCoin.symbol),1)])]),o("div",uo,[o("div",co,i(e.$t("modal.removeLiquidityText",{slippage:e.slippage+"%"})),1),o("div",mo,[o("div",vo,[o("div",po,i(e.$t("common.rate")),1),o("div",fo,[e.rateChange?(t(),d("span",Co,"1 "+i(e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin.symbol),1)):(t(),d("span",ho,"1 "+i(e.fromCoin.symbol)+" \u2248 "+i(e.fixD(e.currentLpInfo.price,2))+" "+i(e.toCoin.symbol),1)),(t(),d("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=m=>e.rateChange=!e.rateChange)},go))])]),o("div",bo,[o("div",$o,i(e.fromCoin.symbol)+" - "+i(e.toCoin.symbol)+" "+i(e.$t("modal.removeLiquidityLpBurned")),1),o("div",ko,i(e.burnValue),1)])])])])]),w(k,{class:"big-btn swap-confirm-btn",loading:e.loading,onClick:e.clickNextBtn},{default:B(()=>[M(i(e.$t("button.confirmRemove")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])}const _o=se(xe,[["render",So],["__scopeId","data-v-feca4422"]]),Lo=oe({components:{Modal:ye},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fee:{type:String,required:!0}},setup(){const e=ne(),n=q(()=>e);return{config:q(()=>We[n.value.chainName]),importIcon:ie,store:n}}}),wo=""+new URL("img-RemoveSuccessful_2x.38742a62.png",import.meta.url).href;const Le=e=>(ae("data-v-72a1ef94"),e=e(),le(),e),Ao=Le(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Io={class:"remove-success-container"},qo={class:"left"},To=Le(()=>o("div",{class:"tit"},"Remove Successful",-1)),Ro={class:"desc"},Bo=["href"],Mo={key:0,src:wo,alt:""},No=["href"];function Oo(e,n,p,V,N,v){const k=te,r=_e("Modal");return t(),$(r,{visible:!0,class:"remove-success",centered:"",title:"",width:"440px",footer:null,onCancel:n[1]||(n[1]=m=>e.$emit("onClose"))},{closeIcon:B(()=>[Ao]),default:B(()=>[o("div",Io,[o("div",qo,[To,o("div",Ro,[M(" Provide Liquidity for "),o("a",{href:`${e.config.cmmSite}/deposit?tokena=${e.fromCoin.address}&tokenb=${e.toCoin.address}&fee=${e.fee}`}," Cetus concentrated liquidity pools ",8,Bo),M(" to earn more. ")])]),e.store.theme=="default"?(t(),d("img",Mo)):I("",!0)]),w(k,{class:"big-btn deposit-btn",onClick:n[0]||(n[0]=m=>e.$emit("onClose"))},{default:B(()=>[o("a",{href:`${e.config.cmmSite}/deposit?tokena=${e.fromCoin.address}&tokenb=${e.toCoin.address}&fee=${e.fee}`}," Deposit ",8,No)]),_:1})]),_:1})}const Vo=se(Lo,[["render",Oo],["__scopeId","data-v-72a1ef94"]]),Do=oe({setup(e,n){const{t:p,locale:V}=ge(),N=X(Xe,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),v=Ye(),k=$e(),r=q(()=>k),m=ke(),C=q(()=>m);let T=l(!1),U=l(!1),E=l(!1),D=l(!1),J=l(!1),P=l(!1);const a=l(!1),F=l(!0),ue=l(!0),y=l(""),S=l(""),A=l("50"),we=l({});l({}),Ue(()=>{ee(C.value.lpTokens)||(we.value=C.value.lpTokens)});const de=ne(),j=q(()=>de),Ae=q(()=>j.value.slippage),f=l(),h=l(),u=l({}),K=l(""),ce=l(""),Ie=q(()=>Number(y.value)?p("button.remove"):p("button.enterAmount"));Y(()=>[j.value.chainName,C.value.lpTokens],([s,c])=>{s&&!ee(c)&&(f.value=m.tokens[v.currentRoute.value.query.from],h.value=m.tokens[v.currentRoute.value.query.to])},{immediate:!0});const qe=()=>{a.value=!0,setTimeout(()=>{a.value=!1},1e3),r.value.address&&m.setMyLplist(r.value.address)},Te=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:p("button.max"),value:100}],Re=()=>{const s=f.value;f.value=h.value,h.value=s,P.value=!0,setTimeout(()=>{P.value=!1},300)},Be=s=>{s==="fromCoin"?(F.value=!0,y.value=f.value&&O(f.value.balance,u.value.coinA.value.decimals)||""):(F.value=!1,S.value=h.value&&O(h.value.balance,u.value.coinB.value.decimals)||"")},W=be();Y(A,Ee((s,c)=>{if(A.value=s,s==0)y.value="0",S.value="0";else if(s>100&&(A.value="100"),s!==c){const g=Number(A.value)/100;A.value==="100"?Q(u.value.balanceOrigin):Q(x(u.value.balanceOrigin).mul(g).toString())}},500));const me=l("");Y(u,()=>{if(u.value){const s=m.cmmLpTokens.filter(c=>c.coinA.address==u.value.coinA.address&&c.coinB.address==u.value.coinB.address);s.length>0&&(me.value=s[0].fee,D.value=!0),Q(x(u.value.balanceOrigin).mul(Number(A.value)/100).toString())}});const Q=async s=>{if(!f.value||!h.value)return;const c=he(f.value.symbol,h.value.symbol,m.lpTokens);if(K.value=s,ce.value=O(x(s).div(Math.pow(10,c.decimals)).toString(),c.decimals)||"",s!==""&&s!==0&&s!=="0"){let g={coinX:c.coinA,coinY:c.coinB,liquidity:s};if(g)try{const _=await W.getCoinXYForLiquidity(g);y.value=O(_.coinXAmount,u.value.coinA.decimals)||"",S.value=O(_.coinYAmount,u.value.coinB.decimals)||""}catch{}}else S.value="",y.value=""},H=l(!1),{$notify:Me}=He(),{setIsShowSuccess:ve,setIsShowRejected:pe,setIsShowWaiting:z,setTransactionDesc:Ne,setTransactionTxid:fe}=de,Oe=async()=>{var s,c;if(Number(R(y.value,f.value.decimals))<=0||Number(R(S.value,h.value.decimals))<=0)Me.error({icon:X("svg",{class:{icon:!0},"aria-hidden":!0},[X("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:X("div",{class:"notification-title"},[X("span",{innerHTML:"Error"},null)]),description:"This transaction would fail",duration:4.5,class:"ant-notification-copy ant-notification-error"});else{U.value=!1,H.value=!0,fe(""),Ne(p("tips.removeLiquidiyText",{from:`${R(y.value,f.value.decimals)} ${u.value.coinA.symbol}`,to:`${R(S.value,h.value.decimals)} ${u.value.coinB.symbol}`})),z(!0);try{const g=l({});g.value={coinX:u.value.coinA,coinY:u.value.coinB,liquidity:parseInt(K.value),slippage:Number(j.value.slippage)/100};const _=await W.removeLiquidityTransactionPayload(g.value);let L;if(j.value.chainName!=="Aptos"){const b=await r.value.currentWallet.signAndExecuteTransaction(_);L=W.handleTx(b)}else L=await r.value.currentWallet.signAndSubmitTransaction(_);if(L&&L.hash){fe(L.hash),z(!1),ve(!0);const b={title:p("common.removeLiquidity"),desc:p("tips.removeSuccessText",{from:`${R(y.value,f.value.decimals)} ${u.value.coinA.symbol}`,to:`${R(S.value,h.value.decimals)} ${u.value.coinB.symbol}`}),hash:L.hash,descTransactions:`Remove ${y.value} ${(s=f.value)==null?void 0:s.symbol} and ${S.value} ${(c=h.value)==null?void 0:c.symbol} 
             from the pool`,sender:r.value.address,chainName:j.value.chainName};W.showTransitionPending(b),await W.watchTransaction(b)&&(D.value?(ve(!1),E.value=!0):(Number(A.value)==100&&v.push("/pools"),setTimeout(()=>{m.setMyLplist(r.value.address)},3e3),setTimeout(()=>{m.setMyLplist(r.value.address)},6e3)))}else z(!1),pe(!0);H.value=!1}catch{H.value=!1,z(!1),pe(!0)}}};return Y(()=>[r.value.address,C.value.lpTokens],([s,c])=>{ee(c)||m.setMyLplist(s)},{immediate:!0}),Y(()=>[C.value.myLplist,r.value.address],([s,c])=>{if(s&&r.value.address){const g=s,_=v.currentRoute.value.query.from,L=v.currentRoute.value.query.to;let b;if(_&&L&&(b=he(_,L,s)),b){if(!b.balance||!Number(b.balance)){v.push("/pools");return}const Z=g.filter(Ve=>Ve.symbol===b.symbol)[0];Z&&(u.value=Z)}}},{immediate:!0}),{fee:me,isRemoveSuccessModal:E,isCmmHavePool:D,loading:H,indicator:N,addCommom:R,fixD:Se,prettyAmount:ze,liquidity:C,clickExchange:Re,change:P,fixedFromCoin:F,router:v,wallet:r,refresh:a,amountArr:Te,sliderVal:A,slippage:Ae,importIcon:ie,clickRefresh:qe,isShowSwapSetting:T,fromCoin:f,toCoin:h,maxBtnSelect:Be,fromCoinAmount:y,toCoinAmount:S,direct:ue,rateChange:J,isShowRemoveModal:U,btnText:Ie,currentLpInfo:u,selectLp:K,selectLpView:ce,toRemove:Oe}}});const G=e=>(ae("data-v-50903abf"),e=e(),le(),e),Po={class:"management-remove-liquidity"},Fo={class:"remove-liquidity-top"},jo={class:"remove-title"},Wo={class:"right title-right"},Xo=G(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Yo=G(()=>o("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Uo=[Yo],Eo={class:"remove-liquidity-center"},Ho={class:"bottom"},zo={class:"add-amount"},Go={class:"add-amount-header"},Jo={class:"amount-list"},Ko=["onClick"],Qo={class:"slider-box"},Zo={class:"card-container"},xo={class:"card-item"},en={class:"card-item"},on={class:"induction remove-liquidity-bottom"},nn={class:"item"},sn={class:"induction-text"},tn={key:0},an={key:0},ln={key:1},rn=G(()=>o("svg",{class:"icon-change","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),un={key:0,"aria-hidden":"true"},dn=G(()=>o("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),cn=[dn],mn={key:0,class:"showMyLiquidity"},vn={class:"myLiquidity"},pn={class:"left"},fn={key:0,class:"right"},hn={class:"liquidityAsset"},Cn={class:"item"},yn={key:0,class:"left"},gn=["src"],bn={key:1,class:"right"},$n={class:"item"},kn={key:0,class:"left"},Sn=["src"],_n={key:1,class:"right"},Ln={class:"induction induction-liquidity"},wn={class:"item"},An={class:"induction-text"},In={key:0,class:"induction-value"};function qn(e,n,p,V,N,v){const k=De,r=Ke,m=Qe,C=Pe,T=Ze,U=te,E=Fe,D=je,J=_o,P=Vo;return t(),d("div",Po,[w(k),o("div",Fo,[o("div",jo,i(e.$t("common.removeLiquidity")),1),o("div",Wo,[o("div",{class:"slippage-icon",onClick:n[0]||(n[0]=a=>e.isShowSwapSetting=!0)},[Xo,o("span",null,i(e.slippage)+"%",1)]),(t(),d("svg",{"aria-hidden":"true",class:Ce(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:n[1]||(n[1]=(...a)=>e.clickRefresh&&e.clickRefresh(...a))},Uo,2))])]),o("div",Eo,[o("div",Ho,[o("div",zo,[o("div",Go,[o("span",null,i(e.$t("common.amount")),1),o("div",Jo,[(t(!0),d(Ge,null,Je(e.amountArr,(a,F)=>(t(),d("div",{key:F,class:Ce(["amount-item",e.sliderVal==a.value?"amount-item-active":""]),onClick:ue=>e.sliderVal=a.value},i(a.name),11,Ko))),128))])]),o("div",Qo,[w(r,{value:e.sliderVal,"onUpdate:value":n[2]||(n[2]=a=>e.sliderVal=a),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),w(m,{value:e.sliderVal,"onUpdate:value":n[3]||(n[3]=a=>e.sliderVal=a)},null,8,["value"])])])])]),o("div",Zo,[o("div",xo,[w(C,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=a=>e.fromCoinAmount=a),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":e.addCommom(e.fromCoinAmount,e.fromCoin.decimals),"coin-name":e.fromCoin?e.fromCoin.symbol:null,"remove-balance":e.addCommom(e.currentLpInfo.myCoinXAmount,e.fromCoin.decimals)||null,"coin-icon":e.fromCoin?e.fromCoin.icon:"","is-remove":!0,"swap-direction":"From",onOnMax:n[5]||(n[5]=a=>e.maxBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=a=>e.fromCoinAmount=a),onOnFocus:n[7]||(n[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])]),o("div",en,[w(C,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=a=>e.toCoinAmount=a),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":e.addCommom(e.toCoinAmount,e.toCoin.decimals),"coin-name":e.toCoin?e.toCoin.symbol:"","remove-balance":e.addCommom(e.currentLpInfo.myCoinYAmount,e.toCoin.decimals)||null,"swap-direction":"To","is-remove":!0,"coin-icon":e.toCoin?e.toCoin.icon:"",onOnMax:n[9]||(n[9]=a=>e.maxBtnSelect("toCoin")),onOnInput:n[10]||(n[10]=a=>e.toCoinAmount=a),onOnFocus:n[11]||(n[11]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])])]),o("div",on,[o("div",nn,[o("div",sn,i(e.$t("common.rate")),1),o("div",{class:"induction-value induction-value-change",onClick:n[12]||(n[12]=a=>e.rateChange=!e.rateChange)},[e.rateChange?(t(),d("span",ln,"1 "+i(e.toCoin&&e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin&&e.fromCoin.symbol),1)):(t(),d("span",tn,[M(" 1 "+i(e.fromCoin&&e.fromCoin.symbol)+" \u2248 ",1),e.currentLpInfo.price?(t(),d("span",an,i(e.fixD(e.currentLpInfo.price,2)),1)):(t(),$(T,{key:1,indicator:e.indicator},null,8,["indicator"])),M(" "+i(e.toCoin&&e.toCoin.symbol),1)])),rn])])]),w(U,{disabled:e.wallet.connected?e.sliderVal==0||!e.fromCoinAmount||!e.toCoinAmount||e.loading:!1,class:"remove-btn big-btn",onClick:n[13]||(n[13]=a=>e.wallet.connected?e.isShowRemoveModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:B(()=>[e.wallet.connected?(t(),d("svg",un,cn)):I("",!0),o("span",null,i(e.wallet.connected?e.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),w(E),e.wallet.connected?(t(),d("div",mn,[o("div",vn,[o("div",pn,i(e.$t("common.yourLiquidity")),1),e.currentLpInfo.myLpBalance?(t(),d("div",fn,[o("p",null,i(e.currentLpInfo.myLpBalance)+" LP",1),o("span",null,"\u2248 $"+i(e.addCommom(e.currentLpInfo.myBalanceUSD,2)),1)])):(t(),$(T,{key:1,indicator:e.indicator},null,8,["indicator"]))]),o("div",hn,[o("div",Cn,[e.fromCoin?(t(),d("div",yn,[o("img",{src:e.fromCoin.icon||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,gn),o("span",null,i(e.fromCoin.symbol),1)])):I("",!0),e.currentLpInfo.myCoinXAmount?(t(),d("div",bn,i(e.addCommom(e.currentLpInfo.myCoinXAmount,e.fromCoin.decimals)),1)):(t(),$(T,{key:2,indicator:e.indicator},null,8,["indicator"]))]),o("div",$n,[e.toCoin?(t(),d("div",kn,[o("img",{src:e.toCoin.icon||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,Sn),o("span",null,i(e.toCoin.symbol),1)])):I("",!0),e.currentLpInfo.myCoinYAmount?(t(),d("div",_n,i(e.addCommom(e.currentLpInfo.myCoinYAmount,e.toCoin.decimals)),1)):(t(),$(T,{key:2,indicator:e.indicator},null,8,["indicator"]))])]),o("div",Ln,[o("div",wn,[o("div",An,i(e.$t("common.shareOfPool")),1),e.currentLpInfo.myshareOfPool?(t(),d("div",In,i(e.currentLpInfo.myshareOfPool)+" %",1)):(t(),$(T,{key:1,indicator:e.indicator},null,8,["indicator"]))])])])):I("",!0),e.isShowSwapSetting?(t(),$(D,{key:1,onOnClose:n[14]||(n[14]=a=>e.isShowSwapSetting=!1)})):I("",!0),e.isShowRemoveModal?(t(),$(J,{key:2,"liquidity-balance":e.selectLp,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.currentLpInfo.coinA,"to-coin":e.currentLpInfo.coinB,"from-coin-amount":e.addCommom(e.fromCoinAmount,e.fromCoin.decimals),"to-coin-amount":e.addCommom(e.toCoinAmount,e.toCoin.decimals),"burn-value":e.selectLpView,"current-lp-info":e.currentLpInfo,loading:e.loading,onOnClose:n[15]||(n[15]=a=>e.isShowRemoveModal=!1),onToRemove:e.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","loading","onToRemove"])):I("",!0),e.isRemoveSuccessModal&&e.isCmmHavePool?(t(),$(P,{key:3,"from-coin":e.currentLpInfo.coinA,"to-coin":e.currentLpInfo.coinB,fee:e.fee,onOnClose:n[16]||(n[16]=()=>{e.isRemoveSuccessModal=!1,Number(e.sliderVal)==100&&e.router.push("/pools")})},null,8,["from-coin","to-coin","fee"])):I("",!0)])}const Dn=se(Do,[["render",qn],["__scopeId","data-v-50903abf"]]);export{Dn as default};
