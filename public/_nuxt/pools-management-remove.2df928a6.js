import{_ as Ro}from"./back.74fe5fa4.js";import{_ as No}from"./assets-card.f3c8ec40.js";import{_ as Mo}from"./network-tips.1d1fa009.js";import{_ as Vo}from"./swap-setting.7e8e5013.js";import{a as lo,Q as Oo,b as ro,a3 as uo,a4 as mo,Z as co,e as B,$ as vo,r as l,i as po,j as fo,k as R,l as ho,J as Fo,o as a,c as w,w as U,p as e,t as i,G as Y,m as u,q as A,B as Co,y as yo,z as go,aa as P,ab as Po,A as Do,a1 as Yo,a2 as D,a5 as Wo,ac as Xo,a6 as _,a7 as jo,Y as K,a9 as to,a8 as x,s as ao,L as Eo,M as Uo,v as T,I as zo,ad as Ho,S as Go}from"./entry.e1134fe4.js";/* empty css              */const Jo=lo({components:{Modal:Oo},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(o,n){const y=ro();uo(),mo();const W=co();B(()=>W),vo();const N=l(y.slippage||.5),v=l(!0),I=l(!1);function d(h){v.value=h}return{slippage:N,importIcon:po,fixD:fo,decimalFormat:R,direct:v,changeDirect:d,rateChange:I,clickNextBtn:async()=>{n.emit("to-remove")}}}});const oo=o=>(yo("data-v-feca4422"),o=o(),go(),o),Qo=oo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Zo={class:"remove-confirm-container"},Ko={class:"card-content"},xo={class:"top"},oe={class:"coin"},ee=["src"],ne=oo(()=>e("div",{class:"svg-box"},[e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-add1"})])],-1)),ie={class:"coin"},se=["src"],te={class:"bottom"},ae={class:"desc"},le={class:"induction"},re={class:"item"},ue={class:"induction-text"},de={class:"induction-value induction-value-change"},me={key:0},ce={key:1},ve=oo(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),pe=[ve],fe={class:"item"},he={class:"induction-text"},Ce={class:"induction-value"};function ye(o,n,y,W,N,v){const I=Co,d=Fo("Modal");return a(),w(d,{width:"440px",visible:!0,footer:null,title:o.$t("modal.addLiquidityModalTitle"),class:"remove-confirm-modal",onCancel:n[1]||(n[1]=c=>o.$emit("on-close"))},{closeIcon:U(()=>[Qo]),default:U(()=>[e("div",Zo,[e("div",Ko,[e("div",xo,[e("div",oe,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`)},null,8,ee),e("p",null,i(o.fromCoinAmount),1),Y(" \xA0\xA0 "),e("p",null,i(o.fromCoin.symbol),1)]),ne,e("div",ie,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`)},null,8,se),e("p",null,i(o.toCoinAmount),1),Y(" \xA0\xA0 "),e("p",null,i(o.toCoin.symbol),1)])]),e("div",te,[e("div",ae,i(o.$t("modal.removeLiquidityText",{slippage:o.slippage+"%"})),1),e("div",le,[e("div",re,[e("div",ue,i(o.$t("common.rate")),1),e("div",de,[o.rateChange?(a(),u("span",ce,"1 "+i(o.toCoin.symbol)+" \u2248 "+i(o.fixD(1/o.currentLpInfo.price,2))+" "+i(o.fromCoin.symbol),1)):(a(),u("span",me,"1 "+i(o.fromCoin.symbol)+" \u2248 "+i(o.fixD(o.currentLpInfo.price,2))+" "+i(o.toCoin.symbol),1)),(a(),u("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=c=>o.rateChange=!o.rateChange)},pe))])]),e("div",fe,[e("div",he,i(o.fromCoin.symbol)+" - "+i(o.toCoin.symbol)+" "+i(o.$t("modal.removeLiquidityLpBurned")),1),e("div",Ce,i(o.burnValue),1)])])])])]),A(I,{class:"big-btn swap-confirm-btn",loading:o.loading,onClick:o.clickNextBtn},{default:U(()=>[Y(i(o.$t("button.confirmRemove")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])}const ge=ho(Jo,[["render",ye],["__scopeId","data-v-feca4422"]]),be=lo({setup(o,n){const{t:y,locale:W}=uo(),N=P(Po,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),v=Do(),I=co(),d=B(()=>I),c=vo(),h=B(()=>c);let q=l(!1),X=l(!1),H=l(!1),M=l(!1);const V=l(!1),s=l(!0),G=l(!0),C=l(""),$=l(""),L=l("50"),bo=l({});l({}),Yo(()=>{x(h.value.lpTokens)||(bo.value=h.value.lpTokens)});const eo=ro(),O=B(()=>eo),$o=B(()=>O.value.slippage),p=l(),f=l(),r=l({}),J=l(""),no=l(""),ko=B(()=>Number(C.value)?y("button.remove"):y("button.enterAmount"));D(()=>[O.value.chainName,h.value.lpTokens],([t,m])=>{t&&!x(m)&&(p.value=c.tokens[v.currentRoute.value.query.from],f.value=c.tokens[v.currentRoute.value.query.to])},{immediate:!0});const So=()=>{V.value=!0,setTimeout(()=>{V.value=!1},1e3),d.value.address&&c.setMyLplist(d.value.address)},Lo=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:y("button.max"),value:100}],wo=()=>{const t=p.value;p.value=f.value,f.value=t,M.value=!0,setTimeout(()=>{M.value=!1},300)},Ao=t=>{t==="fromCoin"?(s.value=!0,C.value=p.value&&R(p.value.balance,r.value.coinA.value.decimals)||""):(s.value=!1,$.value=f.value&&R(f.value.balance,r.value.coinB.value.decimals)||"")},F=mo();D(L,Wo((t,m)=>{if(L.value=t,t==0)C.value="0",$.value="0";else if(t>100&&(L.value="100"),t!==m){const g=Number(L.value)/100;L.value==="100"?Q(r.value.balanceOrigin):Q(K(r.value.balanceOrigin).mul(g).toString())}},500)),D(r,()=>{r.value&&(c.cmmLpTokens.filter(m=>m.coinA.address==r.value.coinA.address&&m.coinB.address==r.value.coinB.address).length>0&&(isCmmHavePool.value=!0),Q(K(r.value.balanceOrigin).mul(Number(L.value)/100).toString()))});const Q=async t=>{if(!p.value||!f.value)return;const m=to(p.value.symbol,f.value.symbol,c.lpTokens);if(J.value=t,no.value=R(K(t).div(Math.pow(10,m.decimals)).toString(),m.decimals)||"",t!==""&&t!==0&&t!=="0"){let g={coinX:m.coinA,coinY:m.coinB,liquidity:t};if(g)try{const k=await F.getCoinXYForLiquidity(g);C.value=R(k.coinXAmount,r.value.coinA.decimals)||"",$.value=R(k.coinYAmount,r.value.coinB.decimals)||""}catch{}}else $.value="",C.value=""},j=l(!1),{$notify:Io}=Xo(),{setIsShowSuccess:qo,setIsShowRejected:io,setIsShowWaiting:E,setTransactionDesc:_o,setTransactionTxid:so}=eo,To=async()=>{var t,m;if(Number(_(C.value,p.value.decimals))<=0||Number(_($.value,f.value.decimals))<=0)Io.error({icon:P("svg",{class:{icon:!0},"aria-hidden":!0},[P("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:P("div",{class:"notification-title"},[P("span",{innerHTML:"Error"},null)]),description:"This transaction would fail",duration:4.5,class:"ant-notification-copy ant-notification-error"});else{X.value=!1,j.value=!0,so(""),_o(y("tips.removeLiquidiyText",{from:`${_(C.value,p.value.decimals)} ${r.value.coinA.symbol}`,to:`${_($.value,f.value.decimals)} ${r.value.coinB.symbol}`})),E(!0);try{const g=l({});g.value={coinX:r.value.coinA,coinY:r.value.coinB,liquidity:parseInt(J.value),slippage:Number(O.value.slippage)/100};const k=await F.removeLiquidityTransactionPayload(g.value);let S;if(O.value.chainName==="Sui"){const b=await d.value.currentWallet.signAndExecuteTransaction(k);S=F.handleTx(b)}else S=await d.value.currentWallet.signAndSubmitTransaction(k);if(S&&S.hash){so(S.hash),E(!1),qo(!0);const b={title:y("common.removeLiquidity"),desc:y("tips.removeSuccessText",{from:`${_(C.value,p.value.decimals)} ${r.value.coinA.symbol}`,to:`${_($.value,f.value.decimals)} ${r.value.coinB.symbol}`}),hash:S.hash,descTransactions:`Remove ${C.value} ${(t=p.value)==null?void 0:t.symbol} and ${$.value} ${(m=f.value)==null?void 0:m.symbol} 
             from the pool`,sender:d.value.address,chainName:O.value.chainName};F.showTransitionPending(b),await F.watchTransaction(b)&&(setTimeout(()=>{c.setMyLplist(d.value.address)},3e3),setTimeout(()=>{c.setMyLplist(d.value.address)},6e3),Number(L.value)==100&&v.push("/pools"))}else E(!1),io(!0);j.value=!1}catch{j.value=!1,E(!1),io(!0)}}};return D(()=>[d.value.address,h.value.lpTokens],([t,m])=>{x(m)||c.setMyLplist(t)},{immediate:!0}),D(()=>[h.value.myLplist,d.value.address],([t,m])=>{if(t&&d.value.address){const g=t,k=v.currentRoute.value.query.from,S=v.currentRoute.value.query.to;let b;if(k&&S&&(b=to(k,S,t)),b){if(!b.balance||!Number(b.balance)){v.push("/pools");return}const Z=g.filter(Bo=>Bo.symbol===b.symbol)[0];Z&&(r.value=Z)}}},{immediate:!0}),{loading:j,indicator:N,addCommom:_,fixD:fo,prettyAmount:jo,liquidity:h,clickExchange:wo,change:M,fixedFromCoin:s,router:v,wallet:d,refresh:V,amountArr:Lo,sliderVal:L,slippage:$o,importIcon:po,clickRefresh:So,isShowSwapSetting:q,fromCoin:p,toCoin:f,maxBtnSelect:Ao,fromCoinAmount:C,toCoinAmount:$,direct:G,rateChange:H,isShowRemoveModal:X,btnText:ko,currentLpInfo:r,selectLp:J,selectLpView:no,toRemove:To}}});const z=o=>(yo("data-v-d4ece03c"),o=o(),go(),o),$e={class:"management-remove-liquidity"},ke={class:"remove-liquidity-top"},Se={class:"remove-title"},Le={class:"right title-right"},we=z(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Ae=z(()=>e("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Ie=[Ae],qe={class:"remove-liquidity-center"},_e={class:"bottom"},Te={class:"add-amount"},Be={class:"add-amount-header"},Re={class:"amount-list"},Ne=["onClick"],Me={class:"slider-box"},Ve={class:"card-container"},Oe={class:"card-item"},Fe={class:"card-item"},Pe={class:"induction remove-liquidity-bottom"},De={class:"item"},Ye={class:"induction-text"},We={key:0},Xe={key:0},je={key:1},Ee=z(()=>e("svg",{class:"icon-change","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),Ue={key:0,"aria-hidden":"true"},ze=z(()=>e("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),He=[ze],Ge={key:0,class:"showMyLiquidity"},Je={class:"myLiquidity"},Qe={class:"left"},Ze={key:0,class:"right"},Ke={class:"liquidityAsset"},xe={class:"item"},on={key:0,class:"left"},en=["src"],nn={key:1,class:"right"},sn={class:"item"},tn={key:0,class:"left"},an=["src"],ln={key:1,class:"right"},rn={class:"induction induction-liquidity"},un={class:"item"},dn={class:"induction-text"},mn={key:0,class:"induction-value"};function cn(o,n,y,W,N,v){const I=Ro,d=zo,c=Ho,h=No,q=Go,X=Co,H=Mo,M=Vo,V=ge;return a(),u("div",$e,[A(I),e("div",ke,[e("div",Se,i(o.$t("common.removeLiquidity")),1),e("div",Le,[e("div",{class:"slippage-icon",onClick:n[0]||(n[0]=s=>o.isShowSwapSetting=!0)},[we,e("span",null,i(o.slippage)+"%",1)]),(a(),u("svg",{"aria-hidden":"true",class:ao(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:n[1]||(n[1]=(...s)=>o.clickRefresh&&o.clickRefresh(...s))},Ie,2))])]),e("div",qe,[e("div",_e,[e("div",Te,[e("div",Be,[e("span",null,i(o.$t("common.amount")),1),e("div",Re,[(a(!0),u(Eo,null,Uo(o.amountArr,(s,G)=>(a(),u("div",{key:G,class:ao(["amount-item",o.sliderVal==s.value?"amount-item-active":""]),onClick:C=>o.sliderVal=s.value},i(s.name),11,Ne))),128))])]),e("div",Me,[A(d,{value:o.sliderVal,"onUpdate:value":n[2]||(n[2]=s=>o.sliderVal=s),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),A(c,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=s=>o.sliderVal=s)},null,8,["value"])])])])]),e("div",Ve,[e("div",Oe,[A(h,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=s=>o.fromCoinAmount=s),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":o.addCommom(o.fromCoinAmount,o.fromCoin.decimals),"coin-name":o.fromCoin?o.fromCoin.symbol:null,"remove-balance":o.addCommom(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals)||null,"coin-icon":o.fromCoin?o.fromCoin.icon:"","is-remove":!0,"swap-direction":"From",onOnMax:n[5]||(n[5]=s=>o.maxBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=s=>o.fromCoinAmount=s),onOnFocus:n[7]||(n[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])]),e("div",Fe,[A(h,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=s=>o.toCoinAmount=s),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":o.addCommom(o.toCoinAmount,o.toCoin.decimals),"coin-name":o.toCoin?o.toCoin.symbol:"","remove-balance":o.addCommom(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals)||null,"swap-direction":"To","is-remove":!0,"coin-icon":o.toCoin?o.toCoin.icon:"",onOnMax:n[9]||(n[9]=s=>o.maxBtnSelect("toCoin")),onOnInput:n[10]||(n[10]=s=>o.toCoinAmount=s),onOnFocus:n[11]||(n[11]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])])]),e("div",Pe,[e("div",De,[e("div",Ye,i(o.$t("common.rate")),1),e("div",{class:"induction-value induction-value-change",onClick:n[12]||(n[12]=s=>o.rateChange=!o.rateChange)},[o.rateChange?(a(),u("span",je,"1 "+i(o.toCoin&&o.toCoin.symbol)+" \u2248 "+i(o.fixD(1/o.currentLpInfo.price,2))+" "+i(o.fromCoin&&o.fromCoin.symbol),1)):(a(),u("span",We,[Y(" 1 "+i(o.fromCoin&&o.fromCoin.symbol)+" \u2248 ",1),o.currentLpInfo.price?(a(),u("span",Xe,i(o.fixD(o.currentLpInfo.price,2)),1)):(a(),w(q,{key:1,indicator:o.indicator},null,8,["indicator"])),Y(" "+i(o.toCoin&&o.toCoin.symbol),1)])),Ee])])]),A(X,{disabled:o.wallet.connected?o.sliderVal==0||!o.fromCoinAmount||!o.toCoinAmount||o.loading:!1,class:"remove-btn big-btn",onClick:n[13]||(n[13]=s=>o.wallet.connected?o.isShowRemoveModal=!0:o.wallet.setIsShowWalletModal(!0))},{default:U(()=>[o.wallet.connected?(a(),u("svg",Ue,He)):T("",!0),e("span",null,i(o.wallet.connected?o.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),A(H),o.wallet.connected?(a(),u("div",Ge,[e("div",Je,[e("div",Qe,i(o.$t("common.yourLiquidity")),1),o.currentLpInfo.myLpBalance?(a(),u("div",Ze,[e("p",null,i(o.currentLpInfo.myLpBalance)+" LP",1),e("span",null,"\u2248 $"+i(o.addCommom(o.currentLpInfo.myBalanceUSD,2)),1)])):(a(),w(q,{key:1,indicator:o.indicator},null,8,["indicator"]))]),e("div",Ke,[e("div",xe,[o.fromCoin?(a(),u("div",on,[e("img",{src:o.fromCoin.icon||o.importIcon(`/image/coins/${o.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,en),e("span",null,i(o.fromCoin.symbol),1)])):T("",!0),o.currentLpInfo.myCoinXAmount?(a(),u("div",nn,i(o.addCommom(o.currentLpInfo.myCoinXAmount,o.fromCoin.decimals)),1)):(a(),w(q,{key:2,indicator:o.indicator},null,8,["indicator"]))]),e("div",sn,[o.toCoin?(a(),u("div",tn,[e("img",{src:o.toCoin.icon||o.importIcon(`/image/coins/${o.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,an),e("span",null,i(o.toCoin.symbol),1)])):T("",!0),o.currentLpInfo.myCoinYAmount?(a(),u("div",ln,i(o.addCommom(o.currentLpInfo.myCoinYAmount,o.toCoin.decimals)),1)):(a(),w(q,{key:2,indicator:o.indicator},null,8,["indicator"]))])]),e("div",rn,[e("div",un,[e("div",dn,i(o.$t("common.shareOfPool")),1),o.currentLpInfo.myshareOfPool?(a(),u("div",mn,i(o.currentLpInfo.myshareOfPool)+" %",1)):(a(),w(q,{key:1,indicator:o.indicator},null,8,["indicator"]))])])])):T("",!0),o.isShowSwapSetting?(a(),w(M,{key:1,onOnClose:n[14]||(n[14]=s=>o.isShowSwapSetting=!1)})):T("",!0),o.isShowRemoveModal?(a(),w(V,{key:2,"liquidity-balance":o.selectLp,"fixed-from-coin":o.fixedFromCoin,"from-coin":o.currentLpInfo.coinA,"to-coin":o.currentLpInfo.coinB,"from-coin-amount":o.addCommom(o.fromCoinAmount,o.fromCoin.decimals),"to-coin-amount":o.addCommom(o.toCoinAmount,o.toCoin.decimals),"burn-value":o.selectLpView,"current-lp-info":o.currentLpInfo,loading:o.loading,onOnClose:n[15]||(n[15]=s=>o.isShowRemoveModal=!1),onToRemove:o.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","loading","onToRemove"])):T("",!0)])}const gn=ho(be,[["render",cn],["__scopeId","data-v-d4ece03c"]]);export{gn as default};
