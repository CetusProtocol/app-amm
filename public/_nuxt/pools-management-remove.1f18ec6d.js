import{_ as Fe}from"./back.f75f7317.js";import{_ as Pe}from"./assets-card.06d7440c.js";import{_ as Ue}from"./network-tips.94941037.js";import{_ as De}from"./swap-setting.a28e3a80.js";import{a as ne,W as ye,b as ie,G as ge,am as $e,J as be,e as q,I as ke,r as l,i as se,j as Se,k as B,l as te,ab as _e,o as t,c as S,w as M,p as o,t as i,M as N,m as d,q as w,B as ae,y as le,z as re,ar as je,v as A,H as X,L as We,A as Xe,a9 as Ye,a7 as Y,an as Ee,as as He,ao as T,K as ze,ak as ee,ap as he,aa as oe,s as Ce,ad as Ge,ae as Je,N as Ke,at as Qe,S as Ze}from"./entry.60ac01cf.js";/* empty css               *//* empty css              */const xe=ne({components:{Modal:ye},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},burnValue:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},liquidityBalance:{type:String,required:!0},currentLpInfo:{type:Object,required:!0},slideVal:{type:String,required:!0}},emits:["on-close","to-remove"],setup(e,n){const p=ie();ge(),$e();const P=be();q(()=>P),ke();const O=l(p.slippage||.5),v=l(!0),_=l(!1);function r(y){v.value=y}return{slippage:O,importIcon:se,fixD:Se,decimalFormat:B,direct:v,changeDirect:r,rateChange:_,clickNextBtn:async()=>{n.emit("to-remove")}}}});const ue=e=>(le("data-v-5afad38e"),e=e(),re(),e),eo=ue(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),oo={class:"remove-confirm-container"},no={class:"card-content"},io={class:"top"},so={class:"coin"},to=["src"],ao=ue(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-add1"})])],-1)),lo={class:"coin"},ro=["src"],uo={class:"bottom"},mo={class:"desc"},co={class:"induction"},vo={class:"item"},po={class:"induction-text"},fo={class:"induction-value induction-value-change"},ho={key:0},Co={key:1},yo=ue(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),go=[yo],$o={class:"item"},bo={class:"induction-text"},ko={class:"induction-value"};function So(e,n,p,P,O,v){const _=ae,r=_e("Modal");return t(),S(r,{width:"440px",visible:!0,footer:null,title:e.$t("modal.addLiquidityModalTitle"),class:"remove-confirm-modal",onCancel:n[1]||(n[1]=c=>e.$emit("on-close"))},{closeIcon:M(()=>[eo]),default:M(()=>[o("div",oo,[o("div",no,[o("div",io,[o("div",so,[o("img",{src:e.fromCoin.logoURI||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,to),o("p",null,i(e.fromCoinAmount),1),N(" \xA0\xA0 "),o("p",null,i(e.fromCoin.symbol),1)]),ao,o("div",lo,[o("img",{src:e.toCoin.logoURI||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,ro),o("p",null,i(e.toCoinAmount),1),N(" \xA0\xA0 "),o("p",null,i(e.toCoin.symbol),1)])]),o("div",uo,[o("div",mo,i(e.$t("modal.removeLiquidityText",{slippage:e.slippage+"%"})),1),o("div",co,[o("div",vo,[o("div",po,i(e.$t("common.rate")),1),o("div",fo,[e.rateChange?(t(),d("span",Co,"1 "+i(e.toCoin.symbol)+" \u2248 "+i(e.fixD(1/e.currentLpInfo.price,2))+" "+i(e.fromCoin.symbol),1)):(t(),d("span",ho,"1 "+i(e.fromCoin.symbol)+" \u2248 "+i(e.fixD(e.currentLpInfo.price,2))+" "+i(e.toCoin.symbol),1)),(t(),d("svg",{class:"icon-change","aria-hidden":"true",onClick:n[0]||(n[0]=c=>e.rateChange=!e.rateChange)},go))])]),o("div",$o,[o("div",bo,i(e.fromCoin.symbol)+" - "+i(e.toCoin.symbol)+" "+i(e.$t("modal.removeLiquidityLpBurned")),1),o("div",ko,i(e.burnValue),1)])])])])]),w(_,{class:"big-btn swap-confirm-btn",loading:e.loading,onClick:e.clickNextBtn},{default:M(()=>[N(i(e.$t("button.confirmRemove")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])}const _o=te(xe,[["render",So],["__scopeId","data-v-5afad38e"]]),Lo=ne({components:{Modal:ye},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fee:{type:String,required:!0}},setup(){const e=ie(),n=q(()=>e);return{config:q(()=>je[n.value.chainName]),importIcon:se,store:n}}}),wo=""+new URL("img-RemoveSuccessful_2x.38742a62.png",import.meta.url).href;const Le=e=>(le("data-v-72a1ef94"),e=e(),re(),e),Io=Le(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ao={class:"remove-success-container"},qo={class:"left"},Ro=Le(()=>o("div",{class:"tit"},"Remove Successful",-1)),To={class:"desc"},Bo=["href"],Mo={key:0,src:wo,alt:""},No=["href"];function Oo(e,n,p,P,O,v){const _=ae,r=_e("Modal");return t(),S(r,{visible:!0,class:"remove-success",centered:"",title:"",width:"440px",footer:null,onCancel:n[1]||(n[1]=c=>e.$emit("onClose"))},{closeIcon:M(()=>[Io]),default:M(()=>[o("div",Ao,[o("div",qo,[Ro,o("div",To,[N(" Provide Liquidity for "),o("a",{href:`${e.config.cmmSite}/deposit?tokena=${e.fromCoin.address}&tokenb=${e.toCoin.address}&fee=${e.fee}`}," Cetus concentrated liquidity pools ",8,Bo),N(" to earn more. ")])]),e.store.theme=="default"?(t(),d("img",Mo)):A("",!0)]),w(_,{class:"big-btn deposit-btn",onClick:n[0]||(n[0]=c=>e.$emit("onClose"))},{default:M(()=>[o("a",{href:`${e.config.cmmSite}/deposit?tokena=${e.fromCoin.address}&tokenb=${e.toCoin.address}&fee=${e.fee}`}," Deposit ",8,No)]),_:1})]),_:1})}const Vo=te(Lo,[["render",Oo],["__scopeId","data-v-72a1ef94"]]),Fo=ne({setup(e,n){const{t:p,locale:P}=ge(),O=X(We,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),v=Xe(),_=be(),r=q(()=>_),c=ke(),y=q(()=>c);let R=l(!1),E=l(!1),H=l(!1),U=l(!1),K=l(!1),D=l(!1);const V=l(!1),F=l(!0),a=l(!0),f=l(""),$=l(""),I=l("50"),we=l({});l({}),Ye(()=>{oe(y.value.lpTokens)||(we.value=y.value.lpTokens)});const de=ie(),j=q(()=>de),Ie=q(()=>j.value.slippage),h=l(),C=l(),u=l({}),Q=l(""),me=l(""),Ae=q(()=>Number(f.value)?p("button.remove"):p("button.enterAmount"));Y(()=>[j.value.chainName,y.value.lpTokens],([s,m])=>{s&&!oe(m)&&(h.value=c.tokens[v.currentRoute.value.query.from],C.value=c.tokens[v.currentRoute.value.query.to])},{immediate:!0});const qe=()=>{V.value=!0,setTimeout(()=>{V.value=!1},1e3),r.value.address&&c.setMyLplist(r.value.address)},Re=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:p("button.max"),value:100}],Te=()=>{const s=h.value;h.value=C.value,C.value=s,D.value=!0,setTimeout(()=>{D.value=!1},300)},Be=s=>{s==="fromCoin"?(F.value=!0,f.value=h.value&&B(h.value.balance,u.value.coinA.value.decimals)||""):(F.value=!1,$.value=C.value&&B(C.value.balance,u.value.coinB.value.decimals)||"")},W=$e();Y(I,Ee((s,m)=>{if(I.value=s,s==0)f.value="0",$.value="0";else if(s>100&&(I.value="100"),s!==m){const g=Number(I.value)/100;I.value==="100"?Z(u.value.balanceOrigin):Z(ee(u.value.balanceOrigin).mul(g).toString())}},500));const ce=l("");Y(u,()=>{if(u.value){const s=c.cmmLpTokens.filter(m=>m.coinA.address==u.value.coinA.address&&m.coinB.address==u.value.coinB.address);s.length>0&&(ce.value=s[0].fee,U.value=!0),Z(ee(u.value.balanceOrigin).mul(Number(I.value)/100).toString())}});const Z=async s=>{if(!h.value||!C.value)return;const m=he(h.value.symbol,C.value.symbol,c.lpTokens);if(Q.value=s,me.value=B(ee(s).div(Math.pow(10,m.decimals)).toString(),m.decimals)||"",s!==""&&s!==0&&s!=="0"){let g={coinX:m.coinA,coinY:m.coinB,liquidity:s};if(g)try{const b=await W.getCoinXYForLiquidity(g);f.value=B(b.coinXAmount,u.value.coinA.decimals)||"",$.value=B(b.coinYAmount,u.value.coinB.decimals)||""}catch(b){console.log("testGetCoinXYForLiquidityerr",b)}}else $.value="",f.value=""},z=l(!1),{$notify:Me}=He(),{setIsShowSuccess:ve,setIsShowRejected:pe,setIsShowWaiting:G,setTransactionDesc:Ne,setTransactionTxid:fe}=de,Oe=async()=>{var s,m;if(Number(T(f.value,h.value.decimals))<=0||Number(T($.value,C.value.decimals))<=0)Me.error({icon:X("svg",{class:{icon:!0},"aria-hidden":!0},[X("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:X("div",{class:"notification-title"},[X("span",{innerHTML:"Error"},null)]),description:"This transaction would fail",duration:4.5,class:"ant-notification-copy ant-notification-error"});else{E.value=!1,z.value=!0,fe(""),Ne(p("tips.removeLiquidiyText",{from:`${T(f.value,h.value.decimals)} ${u.value.coinA.symbol}`,to:`${T($.value,C.value.decimals)} ${u.value.coinB.symbol}`})),G(!0);try{const g=l({});g.value={coinX:u.value.coinA,coinY:u.value.coinB,liquidity:parseInt(Q.value),slippage:Number(j.value.slippage)/100};const b=await W.removeLiquidityTransactionPayload(g.value);let L;if(j.value.chainName!=="Aptos"){const k=await r.value.currentWallet.signAndExecuteTransaction(b);L=W.handleTx(k)}else L=await r.value.currentWallet.signAndSubmitTransaction(b);if(L&&L.hash){fe(L.hash),G(!1),ve(!0);const k={title:p("common.removeLiquidity"),desc:p("tips.removeSuccessText",{from:`${T(f.value,h.value.decimals)} ${u.value.coinA.symbol}`,to:`${T($.value,C.value.decimals)} ${u.value.coinB.symbol}`}),hash:L.hash,descTransactions:`Remove ${f.value} ${(s=h.value)==null?void 0:s.symbol} and ${$.value} ${(m=C.value)==null?void 0:m.symbol} 
             from the pool`,sender:r.value.address,chainName:j.value.chainName};W.showTransitionPending(k),await W.watchTransaction(k)&&(U.value?(ve(!1),H.value=!0):(Number(I.value)==100&&v.push("/pools"),setTimeout(()=>{c.setMyLplist(r.value.address)},3e3),setTimeout(()=>{c.setMyLplist(r.value.address)},6e3)))}else G(!1),pe(!0);z.value=!1}catch(g){console.log("Remove error",g),z.value=!1,G(!1),pe(!0)}}};return Y(()=>[r.value.address,y.value.lpTokens],([s,m])=>{oe(m)||c.setMyLplist(s)},{immediate:!0}),Y(()=>[y.value.myLplist,r.value.address],([s,m])=>{if(s&&r.value.address){const g=s,b=v.currentRoute.value.query.from,L=v.currentRoute.value.query.to;let k;if(b&&L&&(k=he(b,L,s)),k){if(!k.balance||!Number(k.balance)){v.push("/pools");return}const x=g.filter(Ve=>Ve.symbol===k.symbol)[0];x&&(u.value=x)}}},{immediate:!0}),{fee:ce,isRemoveSuccessModal:H,isCmmHavePool:U,loading:z,indicator:O,addCommom:T,fixD:Se,decimalFormat:B,prettyAmount:ze,liquidity:y,clickExchange:Te,change:D,fixedFromCoin:F,router:v,wallet:r,refresh:V,amountArr:Re,sliderVal:I,slippage:Ie,importIcon:se,clickRefresh:qe,isShowSwapSetting:R,fromCoin:h,toCoin:C,maxBtnSelect:Be,fromCoinAmount:f,toCoinAmount:$,direct:a,rateChange:K,isShowRemoveModal:E,btnText:Ae,currentLpInfo:u,selectLp:Q,selectLpView:me,toRemove:Oe}}});const J=e=>(le("data-v-60e899ed"),e=e(),re(),e),Po={class:"management-remove-liquidity"},Uo={class:"remove-liquidity-top"},Do={class:"remove-title"},jo={class:"right title-right"},Wo=J(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Xo=J(()=>o("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Yo=[Xo],Eo={class:"remove-liquidity-center"},Ho={class:"bottom"},zo={class:"add-amount"},Go={class:"add-amount-header"},Jo={class:"amount-list"},Ko=["onClick"],Qo={class:"slider-box"},Zo={class:"card-container"},xo={class:"card-item"},en={class:"card-item"},on={class:"induction remove-liquidity-bottom"},nn={class:"item"},sn={class:"induction-text"},tn={key:0},an={key:0},ln={key:1},rn=J(()=>o("svg",{class:"icon-change","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-change2"})],-1)),un={key:0,"aria-hidden":"true"},dn=J(()=>o("use",{"xlink:href":"#icon-icon-Remove"},null,-1)),mn=[dn],cn={key:0,class:"showMyLiquidity"},vn={class:"myLiquidity"},pn={class:"left"},fn={key:0,class:"right"},hn={class:"liquidityAsset"},Cn={class:"item"},yn={key:0,class:"left"},gn=["src"],$n={class:"coin-name"},bn={key:1,class:"right"},kn={class:"item"},Sn={key:0,class:"left"},_n=["src"],Ln={class:"coin-name"},wn={key:1,class:"right"},In={class:"induction induction-liquidity"},An={class:"item"},qn={class:"induction-text"},Rn={key:0,class:"induction-value"};function Tn(e,n,p,P,O,v){var V,F;const _=Fe,r=Ke,c=Qe,y=Pe,R=Ze,E=ae,H=Ue,U=De,K=_o,D=Vo;return t(),d("div",Po,[w(_),o("div",Uo,[o("div",Do,i(e.$t("common.removeLiquidity")),1),o("div",jo,[o("div",{class:"slippage-icon",onClick:n[0]||(n[0]=a=>e.isShowSwapSetting=!0)},[Wo,o("span",null,i(e.slippage)+"%",1)]),(t(),d("svg",{"aria-hidden":"true",class:Ce(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:n[1]||(n[1]=(...a)=>e.clickRefresh&&e.clickRefresh(...a))},Yo,2))])]),o("div",Eo,[o("div",Ho,[o("div",zo,[o("div",Go,[o("span",null,i(e.$t("common.amount")),1),o("div",Jo,[(t(!0),d(Ge,null,Je(e.amountArr,(a,f)=>(t(),d("div",{key:f,class:Ce(["amount-item",e.sliderVal==a.value?"amount-item-active":""]),onClick:$=>e.sliderVal=a.value},i(a.name),11,Ko))),128))])]),o("div",Qo,[w(r,{value:e.sliderVal,"onUpdate:value":n[2]||(n[2]=a=>e.sliderVal=a),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),w(c,{value:e.sliderVal,"onUpdate:value":n[3]||(n[3]=a=>e.sliderVal=a)},null,8,["value"])])])])]),o("div",Zo,[o("div",xo,[w(y,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=a=>e.fromCoinAmount=a),"has-arrow":!1,"input-disabled":!0,havemax:!1,"is-total":!0,"input-value":e.addCommom(e.fromCoinAmount,e.fromCoin.decimals),"coin-name":e.fromCoin?e.fromCoin.symbol:null,"remove-balance":e.addCommom(e.currentLpInfo.myCoinXAmount,e.fromCoin.decimals)||null,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","is-remove":!0,"swap-direction":"From",onOnMax:n[5]||(n[5]=a=>e.maxBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=a=>e.fromCoinAmount=a),onOnFocus:n[7]||(n[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])]),o("div",en,[w(y,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=a=>e.toCoinAmount=a),"has-arrow":!1,havemax:!1,"is-total":!0,"input-disabled":!0,"input-value":e.addCommom(e.toCoinAmount,e.toCoin.decimals),"coin-name":e.toCoin?e.toCoin.symbol:"","remove-balance":e.addCommom(e.currentLpInfo.myCoinYAmount,e.toCoin.decimals)||null,"swap-direction":"To","is-remove":!0,"coin-icon":e.toCoin?e.toCoin.logoURI:"",onOnMax:n[9]||(n[9]=a=>e.maxBtnSelect("toCoin")),onOnInput:n[10]||(n[10]=a=>e.toCoinAmount=a),onOnFocus:n[11]||(n[11]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-name","remove-balance","coin-icon"])])]),o("div",on,[o("div",nn,[o("div",sn,i(e.$t("common.rate")),1),o("div",{class:"induction-value induction-value-change",onClick:n[12]||(n[12]=a=>e.rateChange=!e.rateChange)},[e.rateChange?(t(),d("span",ln,"1 "+i(e.toCoin&&e.toCoin.symbol)+" \u2248 "+i(e.decimalFormat(String(1/e.currentLpInfo.price),e.fromCoin.decimals))+" "+i(e.fromCoin&&e.fromCoin.symbol),1)):(t(),d("span",tn,[N(" 1 "+i(e.fromCoin&&e.fromCoin.symbol)+" \u2248 ",1),e.currentLpInfo.price?(t(),d("span",an,i(e.decimalFormat(e.currentLpInfo.price,e.toCoin.decimals)),1)):(t(),S(R,{key:1,indicator:e.indicator},null,8,["indicator"])),N(" "+i(e.toCoin&&e.toCoin.symbol),1)])),rn])])]),w(E,{disabled:e.wallet.connected?e.sliderVal==0||!e.fromCoinAmount||!e.toCoinAmount||e.loading:!1,class:"remove-btn big-btn",onClick:n[13]||(n[13]=a=>e.wallet.connected?e.isShowRemoveModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:M(()=>[e.wallet.connected?(t(),d("svg",un,mn)):A("",!0),o("span",null,i(e.wallet.connected?e.btnText:"Connect Wallet"),1)]),_:1},8,["disabled"]),w(H),e.wallet.connected?(t(),d("div",cn,[o("div",vn,[o("div",pn,i(e.$t("common.yourLiquidity")),1),e.currentLpInfo.myLpBalance?(t(),d("div",fn,[o("p",null,i(e.currentLpInfo.myLpBalance)+" LP",1),o("span",null,"\u2248 $"+i(e.addCommom(e.currentLpInfo.myBalanceUSD,2)),1)])):(t(),S(R,{key:1,indicator:e.indicator},null,8,["indicator"]))]),o("div",hn,[o("div",Cn,[e.fromCoin?(t(),d("div",yn,[o("img",{src:e.fromCoin.logoURI||e.importIcon(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`),alt:""},null,8,gn),o("span",null,i(e.fromCoin.symbol),1),o("span",$n,i((V=e.fromCoin)==null?void 0:V.name),1)])):A("",!0),e.currentLpInfo.myCoinXAmount?(t(),d("div",bn,i(e.addCommom(e.currentLpInfo.myCoinXAmount,e.fromCoin.decimals)),1)):(t(),S(R,{key:2,indicator:e.indicator},null,8,["indicator"]))]),o("div",kn,[e.toCoin?(t(),d("div",Sn,[o("img",{src:e.toCoin.logoURI||e.importIcon(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`),alt:""},null,8,_n),o("span",null,i(e.toCoin.symbol),1),o("span",Ln,i((F=e.toCoin)==null?void 0:F.name),1)])):A("",!0),e.currentLpInfo.myCoinYAmount?(t(),d("div",wn,i(e.addCommom(e.currentLpInfo.myCoinYAmount,e.toCoin.decimals)),1)):(t(),S(R,{key:2,indicator:e.indicator},null,8,["indicator"]))])]),o("div",In,[o("div",An,[o("div",qn,i(e.$t("common.shareOfPool")),1),e.currentLpInfo.myshareOfPool?(t(),d("div",Rn,i(e.currentLpInfo.myshareOfPool)+" %",1)):(t(),S(R,{key:1,indicator:e.indicator},null,8,["indicator"]))])])])):A("",!0),e.isShowSwapSetting?(t(),S(U,{key:1,onOnClose:n[14]||(n[14]=a=>e.isShowSwapSetting=!1)})):A("",!0),e.isShowRemoveModal?(t(),S(K,{key:2,"liquidity-balance":e.selectLp,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.currentLpInfo.coinA,"to-coin":e.currentLpInfo.coinB,"from-coin-amount":e.addCommom(e.fromCoinAmount,e.fromCoin.decimals),"to-coin-amount":e.addCommom(e.toCoinAmount,e.toCoin.decimals),"burn-value":e.selectLpView,"current-lp-info":e.currentLpInfo,loading:e.loading,onOnClose:n[15]||(n[15]=a=>e.isShowRemoveModal=!1),onToRemove:e.toRemove},null,8,["liquidity-balance","fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","burn-value","current-lp-info","loading","onToRemove"])):A("",!0),e.isRemoveSuccessModal&&e.isCmmHavePool?(t(),S(D,{key:3,"from-coin":e.currentLpInfo.coinA,"to-coin":e.currentLpInfo.coinB,fee:e.fee,onOnClose:n[16]||(n[16]=()=>{e.isRemoveSuccessModal=!1,Number(e.sliderVal)==100&&e.router.push("/pools")})},null,8,["from-coin","to-coin","fee"])):A("",!0)])}const Un=te(Fo,[["render",Tn],["__scopeId","data-v-60e899ed"]]);export{Un as default};
